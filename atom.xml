<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Undefined NULL]]></title>
  <link href="https://www.undefinednull.com/atom.xml" rel="self"/>
  <link href="https://www.undefinednull.com/"/>
  <updated>2016-08-27T20:26:31+04:00</updated>
  <id>https://www.undefinednull.com/</id>
  <author>
    <name><![CDATA[Shidhin]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Debugging React Native Apps using Visual Studio Code]]></title>
    <link href="https://www.undefinednull.com/2016/04/21/debugging-react-native-apps-using-visual-studio-code/"/>
    <updated>2016-04-21T15:39:09+04:00</updated>
    <id>https://www.undefinednull.com/2016/04/21/debugging-react-native-apps-using-visual-studio-code</id>
    <content type="html"><![CDATA[<p> I always think that I am a <a href="https://blog.codinghorror.com/the-magpie-developer/">Magpie developer</a>. I don&rsquo;t know if others do this often; But, most of the times, I switch between my IDEs,  trying out new frameworks ( even though it doesn&rsquo;t solve most of my problems ).</p>

<!-- more -->


<p>So far I was using &mdash; and pretty happy with &mdash; Webstorm, Atom and Sublime.  As I started with react-native development these days, I was searching for all the tools that will make my life easier. That&rsquo;s when I added Visual studio Code to my IDEs list again. I tried Visual studio code initially when it&rsquo;s released but didn&rsquo;t give much importance. However,  after trying the new version 1.0.0, I really liked it. The one main reason is the smooth debugging support they added using <code>react-native-tools</code> plugin.</p>

<p>This post is all about setting up Visual studio code for react-native development. I&rsquo;m going to list down all the plugins I am using for linting, debugging and some of the settings I had to change to support ES6 code in Visual studio code.</p>

<h2>Download and Install</h2>

<p>Download the latest version of visual studio code from <a href="https://code.visualstudio.com/Download">here</a>. It&rsquo;s just lightweight as  Atom or Sublime.</p>

<p>install the following npm packages globally.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>npm install -g typescript eslint babel-eslint</span></code></pre></td></tr></table></div></figure>


<h2>Enable Plugins</h2>

<p>Installing the plugins in visual studio code is far easy. You just need to open the editor, press <code>CMD+SHIFT+P</code> ( in OSX ) and type <code>ext install</code>. Wait for some seconds, then VS code will show the available plugins ( extensions ).</p>

<p>Install the following plugins:</p>

<ul>
<li>React Native Tools</li>
<li>ESLint</li>
<li>Visual studio code settings sync ( this is useful for sharing the settings between multiple systems )</li>
<li>Material theme of OneDark theme ( depends on your interest, you can choose any other )</li>
<li>Babel ES6/ES7 ( for syntax highlighting )</li>
</ul>


<h2>Settings</h2>

<p>The first thing I wanted for react-native development is to make sure all my js files are treated as javascript with react support. Similarly, the default linting in VS Code is not so good with ES6. Yo&rsquo;ll get these errors often:</p>

<p><img src="https://i.imgur.com/pWQzDxb.png" alt="ES6 error" /></p>

<p>Let&rsquo;s add the following configurations to fix these issues. Press <code>CMD+,</code> VS Code will open the settings window for you.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;files.associations&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s2">&quot;*.js&quot;</span><span class="o">:</span> <span class="s2">&quot;javascriptreact&quot;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="s2">&quot;javascript.validate.enable&quot;</span> <span class="o">:</span> <span class="kc">false</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This should disable the default warnings and enable JSX highlighting inside the JS files.</p>

<p>Create a <code>.eslintrc</code> in the root folder and add the following code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="s2">&quot;parser&quot;</span><span class="o">:</span> <span class="s2">&quot;babel-eslint&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;ecmaFeatures&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;jsx&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;modules&quot;</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s2">&quot;env&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;es6&quot;</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="s2">&quot;plugins&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>    <span class="s2">&quot;react&quot;</span>
</span><span class='line'>  <span class="p">]</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Keyboard Shortcuts</h2>

<p>Before moving on, try to use these keyboard shortcuts. They&rsquo;ll come in handy soon.</p>

<ul>
<li>Toggle output console: <strong>CMD+SHIFT+U</strong></li>
<li>Open debugger panel: <strong>CMD+SHIFT+D</strong></li>
<li>Toggle debug console: <strong>CMD+SHIFT+Y</strong></li>
<li>Toggle file panel: <strong>CMD+B</strong></li>
<li>Open command pallete: <strong>CMD+SHIFT+P</strong></li>
<li>Search any file: <strong>CMD+P</strong></li>
<li>Search any symbol: <strong>CMD+SHIFT+O</strong></li>
<li>Rename any variable: <strong>F2</strong></li>
</ul>


<h2>React native debugging</h2>

<p>Once you install the react-native-tools extension, you can start debugging your react native application. For this, first, you need to add the configuration settings for the debugger.</p>

<p>Press <code>CMD+SHIFT+D</code> and click on the small play icon as shown in the below pic:</p>

<p><img src="https://i.imgur.com/bdRHCsk.png" alt="settings" /></p>

<p>VS Code will now ask you to select the environment for debugging. Select <code>react-native</code> from the dropdown, so a new launch.json will get created.</p>

<p>To start debugging, open the command window by pressing <code>CMD+SHIFT+P</code> and type <strong>Debug Run</strong></p>

<p>Now you can see that the debugger will attach to the react native packager itself and run <code>react-native run-android</code></p>

<h2>Heads up</h2>

<p>If you have the chrome debugger for react-native running in any of the browser tabs, you need to close that. Else the debugging from visual studio code doesn&rsquo;t work.</p>

<h2>That&rsquo;s for now!</h2>

<p>That&rsquo;s all required for the initial set-up. Now you can put breakpoints in your code and start debugging. You&rsquo;ll get the same environment like Chrome debugger, but right inside your editor. I will post more stuff about better debugging later. Enjoy!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[React Redux Part 1 : Implementing a counter component in react by using state]]></title>
    <link href="https://www.undefinednull.com/2016/01/21/react-redux-part-1-implementing-a-counter-component-in-react-by-using-state/"/>
    <updated>2016-01-21T23:07:48+04:00</updated>
    <id>https://www.undefinednull.com/2016/01/21/react-redux-part-1-implementing-a-counter-component-in-react-by-using-state</id>
    <content type="html"><![CDATA[<p>The frontend world is moving so fast these days. The hottest trend is React along with the Flux pattern. Flux is a architectural pattern introduced by Facebook to solve some of the problems in large data centric applications. Facebook introduced flux as a concept, but there&rsquo;re number of flux libraries born from then. Today we&rsquo;re gonna talk about the most popular library in that category named <a href="http://redux.js.org/">Redux</a>.</p>

<!-- more -->


<p>Redux is not exactly an flux library. As per the redux tagline, it is known as a &ldquo;predictable state container for Javascript apps&rdquo;. I don&rsquo;t want to state Redux as a flux framework as Redux is deviated from some of the flux principles; And, those are clearly explained in its documentation. This blog post is not about how redux works, but rather demonstrating how redux is used in a typical React application. The tutorial also divided into multiple blog posts, so that you can skip to the interested ones.</p>

<p><strong>Why this post:</strong></p>

<p>If you follow the <a href="https://egghead.io/series/getting-started-with-redux">egghead.io videos</a> from <a href="https://twitter.com/dan_abramov">@dan_abramov</a>, you might feel that Redux is super simple. But then if you try to follow the examples from different sources, you might be overwhelmed by the terms like <code>connect</code>, <code>bindActionCreators</code> ..etc. I was trying to learn them step by step and understand what each of these try to solve. These blog posts are the outcome of my learnings and these are for absolute beginners. So, if you think you&rsquo;re an advanced guy, just share it to your beginner friends.</p>

<p>Here we&rsquo;ll see how to implement a Counter component with:</p>

<ol>
<li>Section 1 : React with state ( not using Redux )</li>
<li>Section 2: Try to integrate Redux and using store</li>
<li>Section 3: Using React-redux library to connect between React and Redux</li>
<li>Section 4: Removing boilerplate code with redux helper methods.</li>
<li>Section 5: Async code handling with Redux</li>
</ol>


<h2>Building a simple counter in React ( with data saved in state )</h2>

<p>In our first section, we&rsquo;re going to build a simple <code>Counter</code> component with React. This section is just for the beginners and if you know how this works, feel free to skip to the next section.</p>

<p>Let&rsquo;s build the react Counter component and add a state to save the <code>number</code>. The code is given below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">&#39;react-dom&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kd">let</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="o">=</span> <span class="nx">React</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">class</span> <span class="nx">App</span> <span class="kr">extends</span> <span class="nx">Component</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
</span><span class='line'>    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">number</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">number</span> <span class="o">||</span> <span class="mi">0</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">_increment</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_increment</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">_decrement</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_decrement</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">render</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">let</span> <span class="p">{</span><span class="nx">number</span><span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
</span><span class='line'>    <span class="k">return</span><span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">The</span> <span class="nx">number</span> <span class="nx">is</span> <span class="o">=</span> <span class="p">{</span><span class="nx">number</span><span class="p">}</span> <span class="o">&lt;</span><span class="err">/h2&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">_increment</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Increment</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">_decrement</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Decrement</span><span class="o">&lt;</span><span class="err">/button&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">_increment</span><span class="p">(){</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">number</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">_decrement</span><span class="p">(){</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">number</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">number</span> <span class="o">-</span> <span class="mi">1</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">App</span><span class="p">.</span><span class="nx">propTypes</span> <span class="o">=</span><span class="p">{</span>
</span><span class='line'>  <span class="nx">number</span><span class="o">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">PropTypes</span><span class="p">.</span><span class="nx">number</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nx">App</span> <span class="nx">number</span><span class="o">=</span><span class="p">{</span><span class="mi">20</span><span class="p">}</span><span class="o">/&gt;</span><span class="p">,</span>
</span><span class='line'>  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The example code is available in this Github <a href="https://github.com/shidhincr/SimpleReactReduxCounter">repo</a>. Just clone the repo and switch to the branch <code>react-state</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git clone https://github.com/shidhincr/SimpleReactReduxCounter
</span><span class='line'><span class="nb">cd </span>SimpleReactReduxCounter
</span><span class='line'>git checkout react-state
</span></code></pre></td></tr></table></div></figure>


<p>In the next section we&rsquo;ll see how to use <a href="https://www.npmjs.com/package/redux">redux</a> to implement the same.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Injecting Custom JavaScript into React Native's Webview]]></title>
    <link href="https://www.undefinednull.com/2015/12/27/injecting-custom-javascript-into-react-natives-webview/"/>
    <updated>2015-12-27T22:11:28+04:00</updated>
    <id>https://www.undefinednull.com/2015/12/27/injecting-custom-javascript-into-react-natives-webview</id>
    <content type="html"><![CDATA[<p><img src="https://lh3.googleusercontent.com/-3JWl2Mvff3w/VoApfwiv1TI/AAAAAAAAssU/UJRZsSvHHpo/s800/Screen+Shot+2015-12-27+at+10.09.12+PM.png" title="Screen Shot 2015-12-27 at 10.09.12 PM.png" alt="react native webview" /></p>

<p>I was playing around with <a href="https://facebook.github.io/react-native/">React native</a> these days. Ever since they added the support for the webview in React native for Android ( which happened in their last <a href="https://github.com/facebook/react-native/releases/tag/v0.17.0">release</a> ), I was eager to try it out. So, today&rsquo;s post is about React native webview.</p>

<!-- more -->


<p>First, checkout the <a href="https://facebook.github.io/react-native/docs/webview.html#content">documentation</a> about webview component in React native. I was experimenting with the prop named <code>"injectedJavaScript"</code>. Since it&rsquo;s not explained in detail in their documentation, I&rsquo;ll explain with the code.</p>

<p>The <code>injectedJavaScript</code> is a custom <strong>prop</strong> of the React native Webview component. You can pass any JavaScript code ( as string ) to this prop, and React native will inject this JavaScript code into the Webview. The injected JavaScript will get executed once the Webview is finished loading.</p>

<p>Set up your react-native project as per their documentation. Now it&rsquo;s time to see some code:</p>

<figure class='code'><figcaption><span>index.android.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> * Sample React Native App</span>
</span><span class='line'><span class="cm"> * https://github.com/facebook/react-native</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react-native&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kd">let</span> <span class="p">{</span> <span class="nx">AppRegistry</span><span class="p">,</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">WebView</span><span class="p">,</span> <span class="nx">StyleSheet</span><span class="p">}</span> <span class="o">=</span> <span class="nx">React</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">let</span> <span class="nx">MyApp</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span><span class='line'><span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>
</span><span class='line'>  <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">let</span> <span class="nx">html</span> <span class="o">=</span> <span class="err">`</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;myContent&quot;</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="nx">This</span> <span class="nx">is</span> <span class="nx">my</span> <span class="nx">name</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>    <span class="err">`</span><span class="p">;</span>
</span><span class='line'>    <span class="kd">let</span> <span class="nx">jsCode</span> <span class="o">=</span> <span class="err">`</span>
</span><span class='line'>        <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#myContent&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="err">`</span><span class="p">;</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="nx">WebView</span>
</span><span class='line'>                <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">webView</span><span class="p">}</span>
</span><span class='line'>                <span class="nx">ref</span><span class="o">=</span><span class="s2">&quot;myWebView&quot;</span>
</span><span class='line'>                <span class="nx">html</span><span class="o">=</span><span class="p">{</span><span class="nx">html</span><span class="p">}</span>
</span><span class='line'>                <span class="nx">injectedJavaScript</span><span class="o">=</span><span class="p">{</span><span class="nx">jsCode</span><span class="p">}</span>
</span><span class='line'>                <span class="nx">javaScriptEnabledAndroid</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
</span><span class='line'>            <span class="o">&gt;</span>
</span><span class='line'>            <span class="o">&lt;</span><span class="err">/WebView&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/View&gt;</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="kd">let</span> <span class="nx">styles</span> <span class="o">=</span> <span class="nx">StyleSheet</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
</span><span class='line'><span class="nx">container</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">flex</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">backgroundColor</span><span class="o">:</span> <span class="s1">&#39;#fff&#39;</span><span class="p">,</span>
</span><span class='line'><span class="p">},</span>
</span><span class='line'><span class="nx">webView</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">backgroundColor</span><span class="o">:</span> <span class="s1">&#39;#fff&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">height</span><span class="o">:</span> <span class="mi">350</span><span class="p">,</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">AppRegistry</span><span class="p">.</span><span class="nx">registerComponent</span><span class="p">(</span><span class="s1">&#39;MyApp&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">MyApp</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>You should be able to see the background color of the <strong>DIV</strong> changes to red now.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iTerm tips and zsh plugins for better development environment]]></title>
    <link href="https://www.undefinednull.com/2015/07/31/iterm-tips-and-zsh-plugins-for-better-development-environment/"/>
    <updated>2015-07-31T13:31:07+04:00</updated>
    <id>https://www.undefinednull.com/2015/07/31/iterm-tips-and-zsh-plugins-for-better-development-environment</id>
    <content type="html"><![CDATA[<p>This post is about the two tools I use regularly in my development environment:  <strong>iTerm</strong> and <strong>oh-my-zsh</strong>. <a href="https://www.iterm2.com/">iTerm</a> is a mac terminal replacement and zsh + <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a> is an excellent combo to replace the bash shell with some cool stuffs.</p>

<!--more-->


<p><img src="https://lh3.googleusercontent.com/-Ccq2BJHbMmI/Vb8hLcwrnbI/AAAAAAAAk3Y/4Jx8wKfWBSk/s600/iterm-ohmyzsh.png" title="iterm-ohmyzsh.png" alt="iTerm and Oh-my-zsh" /></p>

<p>Here, we&rsquo;ll see how to achieve some productivity improvements by effectively using these tools.</p>

<h2>iTerm</h2>

<p>As I said already, iTerm is a mac terminal replacement. It comes with ton of features missing in default terminal. Below, you will see some of them which made me choose iTerm.</p>

<p><strong>Multiple tabs and split screens</strong></p>

<p>Often we have to work with multiple terminals. iTerm support splitting the current terminal panes vertically/horizontally and adding any number of tabs. The shortcuts for splitting the terminal is <code>CMD+D</code> ( for vertical ) and <code>CMD+SHIFT+D</code> ( for horizontal ).</p>

<p>For adding a new tab, the shortcut is <code>CMD + T</code> ( same like your browser ).</p>

<p><img src="https://lh3.googleusercontent.com/1VEt46R1AIZWg9W1Pj5He78A7ptDUxnk6VKyuxoks-LZ=s1200" title="Screen Shot 2015-07-31 at 11.11.25 AM.png" alt="iTerm tabs split terminal" /></p>

<p><strong>Auto-complete menu</strong></p>

<p>iTerm has a pretty cool drop-down menu for auto-completion.  Press <code>CMD+;</code> from the terminal and you can see the autocomplete dropdown showing the completion.</p>

<p><img src="https://lh3.googleusercontent.com/28zFeuRzWlvcnEag7bH5fbkED-EpPs_Z1-urIKDPbOsK=s1200" title="Screen Shot 2015-07-31 at 11.24.59 AM.png" alt="enter image description here" /></p>

<p><strong>Show paste history</strong></p>

<p>iTerm also keeps a buffer of the previous paste history. You can see the paste history in a dropdown menu by pressing the keys <code>CMD+SHIFT+H</code></p>

<p><img src="https://lh3.googleusercontent.com/bHk6sn9vQaprRLoWZ8nXk5H3dCOo7Y9hrN9IWzi5bT7l=s1200" title="Screen Shot 2015-07-31 at 12.51.41 PM.png" alt="iterm search history" /></p>

<p><strong>Find the cursor</strong></p>

<p>Once you start working with multiple split panes and tabs, sometimes it&rsquo;s hard to find where your cursor is. Press the key combination <code>CMD+/</code> and iTerm will highlight where your cursor is. Pretty smart, huh ?</p>

<p><img src="https://lh3.googleusercontent.com/-yhazmLTbXbE/Vbs2Ka1EdVI/AAAAAAAAknw/Ehj7tIR2LLw/s1200/Screen+Shot+2015-07-31+at+12.39.47+PM.png" title="Screen Shot 2015-07-31 at 12.39.47 PM.png" alt="iterm highlight cursor" /></p>

<p><strong>Search all tabs ( aka Expose tabs )</strong></p>

<p>This is another feature excites me when I have to work with so many tabs or panes. It is hard to move from one tab/pane to another pane when not sure where exactly it is. iTerm can expose all the tabs for you with the key combination <code>CMD+OPTIONS+E</code> and then you can search for the tab.</p>

<p><img src="https://lh3.googleusercontent.com/0tBtS6PAKy96fDhsK-6rEZ7mpag8Y6mWsBC13NbVUgw_=s1200" title="Screen Shot 2015-07-31 at 12.56.05 PM.png" alt="expose tabs iterm" /></p>

<p>This is not the end; iTerm has lot of features, but this post is not enough for explaining all of them. For the complete set of iTerm features, check this <a href="https://iterm2.com/documentation-highlights.html">link</a>.</p>

<h2>ZSH + Oh-My-ZSH</h2>

<p>Like iTerm, ZSH is the default bash shell replacement; and Oh-my-zsh is the framework built for configuring the zsh shell. It also provides extending the framework with custom plugins. This can be done by adding them into the .zshrc file.</p>

<p>From their <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Customization">documentation</a>:</p>

<blockquote><p>Let&rsquo;s say you if you want to add a plugin foobar to your configuration.
edit  the ~/.zshrc file. then add to
plugins=(git bundler foobar)</p></blockquote>

<p>I found some these oh-my-zsh plugins extremely useful in my daily tasks:</p>

<p><strong>The Z plugin</strong></p>

<p>One of my all time favourite plugin. The Z plugin remembers your navigation history in the terminal, and auto completes it for you next time. For example, after enabling the <code>z</code> plugin, if I do this:</p>

<pre><code>cd  ~/Dropbox/code_playground/LookAround
</code></pre>

<p>The <code>z</code> plugin remembers this navigation and the next time I just need to type the following and press <code>TAB</code></p>

<pre><code>z LookAround
</code></pre>

<p>See <code>z</code> in action:</p>

<p><img src="https://lh3.googleusercontent.com/-kDYjTHFSZ8c/Vb8QT0tD6CI/AAAAAAAAk1Y/XcLh-HinVxI/s0/z-plugin.gif" title="z-plugin.gif" alt="zsh z plugin" /></p>

<p><strong>The H plugin</strong></p>

<p>The <code>H</code> plugin lists all your previous command history right there. Sometimes it is easy to see all of them and select the desired one. Enable the <code>h</code> plugin by adding it to the plugin section of .zshrc.</p>

<p>Then, type <code>h</code> in the command prompt and enter.</p>

<p><strong>Git Plugin</strong></p>

<p>This plugin provides a set of git aliases to oh-my-zsh. I use this a lot everyday and I think I might&rsquo;ve forgotten the original git commands now :). Just kidding, this is a wonderful plugin that saves a lot of my time.  See the below image to know how I usually work with these aliases.</p>

<p><img src="https://lh3.googleusercontent.com/-5dd8PIO6EsM/Vb8U-IU02-I/AAAAAAAAk2s/vm7nEywxfWU/s0/git-plugin.gif" title="git-plugin.gif" alt="zsh git plugin" /></p>

<p>I am sure that once you start using this plugin, you won&rsquo;t look back. You can find the complete zsh git cheatsheet here in this <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Cheatsheet#git">link</a></p>

<p><strong>Zsh syntax highlighting plugin</strong></p>

<p>Fish shell like syntax highlighting in your zsh shell. See any of the GIF images, you can observe that the command syntax color changes as when I type.</p>

<p>Read more : <a href="https://github.com/zsh-users/zsh-syntax-highlighting">https://github.com/zsh-users/zsh-syntax-highlighting</a></p>

<p><strong>Open PR from command line</strong></p>

<p>I haven&rsquo;t played around with this plugin much. I included this because I think this might be useful to some of you.</p>

<p><a href="https://github.com/caarlos0/zsh-open-pr">https://github.com/caarlos0/zsh-open-pr</a></p>

<blockquote><p>Basically, when you call open-pr, the function will verify if you are working on a fork (by convention, you have an upstream remote), then, it will open your browser in the correct URL so you can just hit the Create Pull Request button.</p></blockquote>

<p><strong>The <code>take</code> command</strong></p>

<p>One of my  favourite shortcut command provided by Oh-my-zsh. Basically, what the <code>take</code> command does is  to create a directory and change the path to it. So instead of doing the following:</p>

<pre><code>md someDirectory &amp;&amp; cd someDirectory
</code></pre>

<p>I could just do:</p>

<pre><code>take someDirectory
</code></pre>

<p>That&rsquo;s really nice !</p>

<p>Everything else: <a href="https://github.com/unixorn/awesome-zsh-plugins">https://github.com/unixorn/awesome-zsh-plugins</a></p>

<h2>Antigen for ZSH</h2>

<p>Antigen is a simple tool to manage the zsh environment. I recently started using Antigen and it seems a better option for installing plugins and all.</p>

<blockquote><p>Antigen is a small set of functions that help you easily manage your shell (zsh) plugins, called bundles. The concept is pretty much the same as bundles in a typical vim+pathogen setup. Antigen is to zsh, what Vundle is to vim.</p></blockquote>

<p>Find more about Antigen here: <a href="https://github.com/zsh-users/antigen.">https://github.com/zsh-users/antigen.</a></p>

<h2>Summary</h2>

<p>Effectively using tools saves a lot of time and improves productivity. I hope these tips are useful to you. Feedbacks are welcome.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[React TDD Example: Unit Testing and Building a React Component with Jest, Gulp and React Test Utils]]></title>
    <link href="https://www.undefinednull.com/2015/05/03/react-tdd-example-unit-testing-and-building-a-react-component-with-jest-gulp-and-react-test-utils/"/>
    <updated>2015-05-03T10:32:01+04:00</updated>
    <id>https://www.undefinednull.com/2015/05/03/react-tdd-example-unit-testing-and-building-a-react-component-with-jest-gulp-and-react-test-utils</id>
    <content type="html"><![CDATA[<p>ReactJs has attained lot of momentum since its initial release in 2013, and became the best JavaScript library for developing rich UI interface. React also popularized different concepts like Virtual DOM, Uni-directional data flow and Componentization in the front-end community. As of today, React has more than 20,000 stars in <a href="https://github.com/facebook/react">Github repo</a>, and actively maintained by the Facebook team.</p>

<!-- more -->


<div class="info">
  <strong>Update Feb 9 2016</strong> : The ReactJS version is bumped to 0.14 in the seed project and updated the article accordingly.
</div>


<br/>


<p><img src="https://lh4.googleusercontent.com/-qJ1PeOhFiBM/VVBaO3ZI6qI/AAAAAAAAhpw/l-WLLtdZuxM/w640-h480-no/react-jest.jpg" alt="React and Jest for TDD" /></p>

<p>As I said already, React is a solid piece of work from Facebook. Any solid software will be built with testability in mind; And React is not an exception to that. Facebook built React with complete testing support &mdash; They even released their own testing framework named &ldquo;<strong>Jest</strong>&rdquo; and <strong>React Test Utils</strong> for unit testing React components.</p>

<p>Here in this post, we&rsquo;ll see how to build a react component in TDD approach.</p>

<h2>What we&rsquo;re going to build ?</h2>

<p>We will build a simple Accordion component in React. If you&rsquo;re not sure what an Accordion is, have a look at the twitter bootstrap page:</p>

<p><a href="http://getbootstrap.com/2.3.2/javascript.html#collapse">Accordion  Widget</a>
Or,  see
<a href="https://jqueryui.com/accordion/">jQuery UI Accordion</a></p>

<p>We&rsquo;ll be creating a simple Accordion component in React.</p>

<h2>Setting up the tools</h2>

<p>We&rsquo;re going to build our component in TDD fashion. Hence, we need to set up our environment with a test runner (for running unit tests), and local server ( with automatic reloading enabled ).</p>

<p>These are the tools I am going to use:</p>

<ol>
<li><a href="www.browsersync.io">BrowserSync</a> for live development ( browser reloading ).</li>
<li><a href="https://facebook.github.io/jest/">Jest</a> for unit testing.</li>
<li><a href="http://jspm.io/">JSPM</a> and <a href="https://www.npmjs.org/">npm</a> for package management.</li>
<li><a href="http://gulpjs.com/">Gulp</a> for running build and test tasks.</li>
<li>Finally, <a href="https://facebook.github.io/react/">ReactJS</a> for developing our component</li>
</ol>


<p>Setting up all these takes time. Therefore, I have created a  <a href="https://github.com/shidhincr/react-jest-gulp-jspm-seed">seed project</a> for bootstrapping the set-up and the initial boiler plate code. So, as the first step, clone the seed project to your system:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git clone git@github.com:shidhincr/react-jest-gulp-jspm-seed.git react-seed
</span><span class='line'><span class="nb">cd </span>react-seed
</span><span class='line'>npm install
</span></code></pre></td></tr></table></div></figure>


<p>Once you download the seed and install the node modules, we&rsquo;re good to start.</p>

<h2>Developing the Component in TDD</h2>

<p>We&rsquo;re using <em>Gulp</em> as our build and task tool. If you open the <strong>gulpfile.js</strong> in the seed folder, you can see there are two main tasks for test driven development ( as explained in the project README file ). One task will build the project and open the development server in browser, while the other task run the unit tests and watch for any changes the source files and test files.</p>

<p>Open two terminal windows, and run <code>gulp develop</code> in one and <code>gulp test</code> in the other one.</p>

<p>There are two example files provided in the <code>scripts</code> folder and <code>__tests__</code> folder. When you run the <code>gulp test</code> task at first, you should see those tests passing.</p>

<h3>Accordion React Component</h3>

<p>Let&rsquo;s add the file <strong>accordionComponent.js</strong> in <code>scripts</code> and <strong>accordionComponent-spec.js</strong> in the <code>__tests__</code> folders respectively.</p>

<p>From here onwards, we&rsquo;re going to build our component by writing each functionality as a test case and then implementing them. When adding the test case, you should be able to see the tests failing in the terminal ( gulp test ). Hence, once we see the failing test, the next step is to implement the code to make them pass.</p>

<p><strong>Test Case 1:</strong></p>

<blockquote><p>The accordion should exist as a React Component</p></blockquote>

<p>Write the first test case in <strong>accordionComponent-spec.js</strong></p>

<figure class='code'><figcaption><span>accordionComponent-spec.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">jest</span><span class="p">.</span><span class="nx">dontMock</span><span class="p">(</span><span class="s1">&#39;../scripts/accordionComponent.js&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Accordion&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">ReactDOM</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react-dom&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">TestUtils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react-addons-test-utils&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">Accordion</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../scripts/accordionComponent&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should exists&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// Render into document</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">accordion</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">renderIntoDocument</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">Accordion</span> <span class="o">/&gt;</span> <span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">TestUtils</span><span class="p">.</span><span class="nx">isCompositeComponent</span><span class="p">(</span><span class="nx">accordion</span><span class="p">)).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>




<div class="info">
Note: By using <strong>jest.dontMock</strong>, we get the original react component in the scripts folder ( as Jest tries to mock every component by default ).
</div>


<br>


<p>Let&rsquo;s make the test pass:</p>

<figure class='code'><figcaption><span>accordionComponent.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">Accordion</span> <span class="nx">component</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Accordion</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Okay, the tests are passing now. Let&rsquo;s also make sure that our component renders properly in the browser. Modify the <strong>app.js</strong> to render the <strong>accordionComponent</strong>.</p>

<figure class='code'><figcaption><span>app.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ReactDOM</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react-dom&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;components/accordionComponent&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Accordion</span><span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>If it works, proceed to next test case.</p>

<p><strong>Test Case 2:</strong></p>

<blockquote><p>Accordion should build the layout from an array of objects passed as prop.</p></blockquote>

<p>This time let&rsquo;s make our component configurable. We have to pass an array data to the component, and expect it to build the layout for the Accordion.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should build the layout from an array of objects passed as prop&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 1&#39;</span>
</span><span class='line'>    <span class="p">},{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 2&#39;</span>
</span><span class='line'>    <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">accordion</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">renderIntoDocument</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">Accordion</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">input</span><span class="p">}</span><span class="o">/&gt;</span> <span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-header&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">headers</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Title 1&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Title 2&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Content belongs to title 1&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Content belongs to title 2&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>To make everything green:</p>

<figure class='code'><figcaption><span>accordionComponent.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">panes</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">panes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion-header&quot;</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion-content&quot;</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>      <span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion&quot;</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">panes</span><span class="p">}</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Accordion</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>All the tests pass now. To see the component works in browser, edit the <code>app.js</code> and pass the configuration:</p>

<figure class='code'><figcaption><span>app.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ReactDOM</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react-dom&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;components/accordionComponent&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 1&#39;</span>
</span><span class='line'><span class="p">},{</span>
</span><span class='line'>  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 2&#39;</span>
</span><span class='line'><span class="p">}];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Accordion</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">input</span><span class="p">}</span><span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>You should be able to see that our Accordion component renders the new layout.</p>

<p><strong>Test Case 3:</strong></p>

<blockquote><p>By default, all the content section should be hidden unless specified by a flag.</p></blockquote>

<p>Add the following test case:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should hide all the contents by default unless specified by a flag&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 1&#39;</span>
</span><span class='line'>    <span class="p">},{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 2&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">showOnLoad</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>    <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">accordion</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">renderIntoDocument</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">Accordion</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">input</span><span class="p">}</span><span class="o">/&gt;</span> <span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Content belongs to title 2&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>And make it pass:</p>

<figure class='code'><figcaption><span>accordionComponent.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">panes</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">getContent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
</span><span class='line'>      <span class="k">return</span> <span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">showOnLoad</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span><span class="o">:</span> <span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion-content&quot;</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>      <span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">panes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion-header&quot;</span><span class="o">&gt;</span>
</span><span class='line'>            <span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
</span><span class='line'>          <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>          <span class="p">{</span> <span class="nx">getContent</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>      <span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion&quot;</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">panes</span><span class="p">}</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Accordion</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This code will make the above test case pass, but you can see that it makes the previous test case ( Test case 2 ) fail.</p>

<p>This is not a problem at all, because in TDD this is what we expect. We need to continuously refactor both source and test codes while we build the component. Let&rsquo;s modify the <code>input</code> in the previous test case to make the tests pass.</p>

<figure class='code'><figcaption><span>TestCase2</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>   <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 1&#39;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">showOnLoad</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'> <span class="p">},{</span>
</span><span class='line'>   <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 2&#39;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">showOnLoad</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'> <span class="p">}];</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is the beauty of TDD; designing the component step by step. By now, we made our component configurable also.</p>

<p><strong>Test Case 4:</strong></p>

<blockquote><p>It should be able to toggle the content by clicking on the respective title.</p></blockquote>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should be able to toggle the content by clicking on the respective title.&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 1&#39;</span>
</span><span class='line'>    <span class="p">},{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 2&#39;</span>
</span><span class='line'>    <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">accordion</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">renderIntoDocument</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">Accordion</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">input</span><span class="p">}</span><span class="o">/&gt;</span> <span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-header&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">Simulate</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>    <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Content belongs to title 1&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">Simulate</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>    <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>The tests are <span style="color:red">RED</span> again. Before we move on, it&rsquo;s time to think about the code design again. If you obeserve, we have a stateful component now. It means, each of the <em>pane</em> in the Accordion can have its own closed or open states.</p>

<p>While designing your applications, it&rsquo;s a bad practice to put whole logic into one single component. We should think about small components &mdash; which handles single tasks &mdash; and create composite components for big features. Here, in our code we should move the state-full code into a separate component; Let&rsquo;s call it as a <strong>Pane</strong> component.</p>

<p>See the code below:</p>

<figure class='code'><figcaption><span>accordionComponent.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">Pane</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">show</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">showOnLoad</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">show</span><span class="o">:</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">show</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">getContent</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">show</span> <span class="o">?</span> <span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion-content&quot;</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>      <span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}).</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion-header&quot;</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">toggle</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>        <span class="p">{</span> <span class="nx">getContent</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">panes</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">panes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">Pane</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span><span class="o">/&gt;</span>
</span><span class='line'>      <span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion&quot;</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">panes</span><span class="p">}</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Accordion</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>All tests are <span style="color: green">GREEN</span> now ! If you check your browser window ( where the server is running ), you can see that our Accordion component is functional.</p>

<p>Before we summarise, see the final source code and tests:</p>

<figure class='code'><figcaption><span>accordionComponent-spec.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">jest</span><span class="p">.</span><span class="nx">dontMock</span><span class="p">(</span><span class="s1">&#39;../scripts/accordionComponent.js&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Accordion&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">TestUtils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react-addons-test-utils&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">Accordion</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../scripts/accordionComponent&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should exists&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// Render into document</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">accordion</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">renderIntoDocument</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">Accordion</span> <span class="o">/&gt;</span> <span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">TestUtils</span><span class="p">.</span><span class="nx">isCompositeComponent</span><span class="p">(</span><span class="nx">accordion</span><span class="p">)).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should build the layout from an array of objects passed as prop&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 1&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">showOnLoad</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>    <span class="p">},{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 2&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">showOnLoad</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>    <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">accordion</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">renderIntoDocument</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">Accordion</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">input</span><span class="p">}</span><span class="o">/&gt;</span> <span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-header&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">headers</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Title 1&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Title 2&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Content belongs to title 1&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Content belongs to title 2&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should hide all the contents by default unless specified by a flag&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 1&#39;</span>
</span><span class='line'>    <span class="p">},{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 2&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">showOnLoad</span><span class="o">:</span> <span class="kc">true</span>
</span><span class='line'>    <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">accordion</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">renderIntoDocument</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">Accordion</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">input</span><span class="p">}</span><span class="o">/&gt;</span> <span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Content belongs to title 2&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should be able to toggle the content by clicking on the respective title.&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 1&#39;</span>
</span><span class='line'>    <span class="p">},{</span>
</span><span class='line'>      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 2&#39;</span>
</span><span class='line'>    <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">accordion</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">renderIntoDocument</span><span class="p">(</span> <span class="o">&lt;</span><span class="nx">Accordion</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">input</span><span class="p">}</span><span class="o">/&gt;</span> <span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">headers</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-header&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">Simulate</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>    <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">&#39;Content belongs to title 1&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">Simulate</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">headers</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span><span class='line'>    <span class="nx">contents</span> <span class="o">=</span> <span class="nx">TestUtils</span><span class="p">.</span><span class="nx">scryRenderedDOMComponentsWithClass</span><span class="p">(</span><span class="nx">accordion</span><span class="p">,</span> <span class="s1">&#39;accordion-content&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span><span class="nx">contents</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>accordionComponent.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">Pane</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">getInitialState</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">show</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">showOnLoad</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">show</span><span class="o">:</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">show</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">getContent</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">show</span> <span class="o">?</span> <span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion-content&quot;</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">content</span><span class="p">}</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>      <span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}).</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion-header&quot;</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">toggle</span><span class="p">}</span><span class="o">&gt;</span>
</span><span class='line'>          <span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>        <span class="p">{</span> <span class="nx">getContent</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">}</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createClass</span><span class="p">({</span>
</span><span class='line'>  <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">panes</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">data</span> <span class="o">||</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">index</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">panes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nx">Pane</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span><span class="o">/&gt;</span>
</span><span class='line'>      <span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&quot;accordion&quot;</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">panes</span><span class="p">}</span>
</span><span class='line'>      <span class="o">&lt;</span><span class="err">/div&gt;</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Accordion</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>app.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">ReactDOM</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;react-dom&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">Accordion</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;components/accordionComponent&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 1&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 1&#39;</span>
</span><span class='line'><span class="p">},{</span>
</span><span class='line'>  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Title 2&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;Content belongs to title 2&#39;</span>
</span><span class='line'><span class="p">}];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Accordion</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">input</span><span class="p">}</span><span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Summary</h2>

<p>When I saw ReactJs first time, I didn&rsquo;t like the syntax at all. I watched the project grow with quite skepticism. Later, I got chance to work with it, and then I knew how powerful it was. Writing code in React really changed my thinking process about a UI driven application. Now I started thinking everything in terms of components, and I know that&rsquo;s the <a href="http://webcomponents.org/">future of web development</a>.</p>

<p>This article is my attempt to mix TDD with ReactJs . Here, we saw how to make a React component from scratch using TDD approach. I hope this tutorial is useful for everyone. Feedbacks are most welcome.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Repeating Multiple Elements using ng-repeat-start and ng-repeat-end in AngularJS]]></title>
    <link href="https://www.undefinednull.com/2015/04/10/repeating-multiple-elements-using-ng-repeat-start-and-ng-repeat-end-in-angularjs/"/>
    <updated>2015-04-10T23:45:27+04:00</updated>
    <id>https://www.undefinednull.com/2015/04/10/repeating-multiple-elements-using-ng-repeat-start-and-ng-repeat-end-in-angularjs</id>
    <content type="html"><![CDATA[<p>When the AngularJS <a href="http://www.angularjs.org">website</a> is released, the TODO example in their website was one of the main attractions. The example was simple and just below 30 lines of code ( Here is the <a href="https://jsfiddle.net/1waxcf9x/">link</a>  if you want to check ). The whole trick behind the scene was done by a directive named <strong>ng-repeat</strong>, as shown below:</p>

<!-- more -->


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">ng</span><span class="o">-</span><span class="nx">repeat</span><span class="o">=</span><span class="s2">&quot;todo in todoList.todos&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Till Angular 1.2, ng-repeat was designed to work on a single DOM element. In other words, ng-repeat can repeat only the DOM element on which it is added. Therefore, some of the situations &mdash; see below &mdash; lead Angular community to think about modifying ng-repeat in version 1.2. In the next section, we&rsquo;ll see the problem with ng-repeat and the solutions introduced.</p>

<h3>What was the issue ?</h3>

<p>Consider the model like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$scope</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">[{</span>
</span><span class='line'>    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Shidhin&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">info</span><span class="o">:</span> <span class="s1">&#39;I am from Dubai&#39;</span>
</span><span class='line'><span class="p">},</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Someone&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">info</span><span class="o">:</span> <span class="s1">&#39;I am from New york&#39;</span>
</span><span class='line'><span class="p">}]</span>
</span></code></pre></td></tr></table></div></figure>


<p>And assume if we need an output like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;table&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>        <span class="nt">&lt;td&gt;</span>Shidhin<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>        <span class="nt">&lt;td&gt;</span>I am from Dubai<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>        <span class="nt">&lt;td&gt;</span>Someone<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>        <span class="nt">&lt;td&gt;</span>I am from New york<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'><span class="nt">&lt;/table&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The fundamental problem here is, the <code>TR</code> tag cannot be grouped in another element other than <code>TABLE</code>. Since creating each <code>TABLE</code> for each <code>TR</code> is not feasible, it is difficult to create the above mark-up using ng-repeat.</p>

<h3>What changed in Angular 1.2</h3>

<p>From Angular version 1.2 onwards, ng-repeat got two siblings directives named <code>ng-repeat-start</code> and <code>ng-repeat-end</code>. With these, we can explicitly specify the starting and ending for ng-repeat. So, instead of using the ng-repeat directive on one single DOM element, we can specify the ng-repeat-start and ng-repeat-end on any two DOM elements.</p>

<p>These directives do the same job as ng-repeat &mdash; it uses the same expressions as ng-repeat  &mdash; but the main difference is, it <strong>repeats all DOM elements</strong> between the starting element and ending element (including the starting and ending tags).</p>

<p>Let&rsquo;s implement the above example with these new directives:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;table&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tr</span> <span class="na">ng-repeat-start=</span><span class="s">&quot;d in data&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;td&gt;</span>{{d.name}}<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>    <span class="nt">&lt;tr</span> <span class="na">ng-repeat-end</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;td&gt;</span>{{d.info}}<span class="nt">&lt;/td&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'><span class="nt">&lt;/table&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>The above code will generate the desired output. You can see a <a href="http://jsfiddle.net/shidhincr/3eLp5u6m/1/">DEMO</a> here</p>

<iframe style="width: 100%; height: 300px" frameborder="0" seamless="seamless" src="https://jsfiddle.net/shidhincr/3eLp5u6m/1/embedded/js,resources,html,css,result/light/"></iframe>


<h3>Summary</h3>

<p>Angular community had done a great job by introducing <strong>ng-repeat-start</strong> and <strong>ng-repeat-end</strong> directives. They&rsquo;re really powerful and solve some of the short-comings of the ng-repeat directive. I hope this article will help you for start using ng-repeat effectively in your next project. Thanks for reading!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Implementing a curry function in JavaScript using TDD]]></title>
    <link href="https://www.undefinednull.com/2015/03/19/implementing-a-curry-function-in-javascript-using-tdd/"/>
    <updated>2015-03-19T18:51:27+04:00</updated>
    <id>https://www.undefinednull.com/2015/03/19/implementing-a-curry-function-in-javascript-using-tdd</id>
    <content type="html"><![CDATA[<p>TDD stands for Test Driven Development. To those who don&rsquo;t know what TDD means: In a typical TDD Environment, a developer start with a basic test case describing the minimal requirement for implementing the module. Then he writes the actual implementation code for making the test case pass.</p>

<!--more-->


<p><img src="https://lh3.googleusercontent.com/dtPfB5V-ew-rm3aApkXHTA8jFVwsFzoNNepbn9wU=w264-h207-p-no" alt="TDD" /></p>

<p>Next, another test case is written for a different expectation for the module, followed by writing the implementation to make the test pass. This process goes on till the all the expectations for the actual module is implemented.</p>

<p>This way of development ( driven by series of test cases ) is called TDD.</p>

<h3>Setting up the tools</h3>

<p>Here we&rsquo;re going to use <a href="http://mochajs.org">Mocha</a> as the unit testing framework. For running the tests, we will be using <a href="https://github.com/airportyh/testem">Testem</a>.</p>

<p>We&rsquo;ll be using BDD ( Behaviour Driven Development, which is similar to TDD, but instead of <code>assertions</code> we use <code>expectaions</code>) style syntax. For that purpose let&rsquo;s use the excellent <a href="http://chaijs.com/">Chai.js</a> library.</p>

<p>First install Testem:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>npm install -g testem
</span></code></pre></td></tr></table></div></figure>


<p>Now create a folder called <code>TDD</code> anywhere in your system. We&rsquo;re going to keep all our files in this folder.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>mkdir TDD <span class="o">&amp;&amp;</span> <span class="nb">cd </span>TDD
</span></code></pre></td></tr></table></div></figure>


<p>Create the following files:</p>

<ol>
<li>curry.js  ( The module we&rsquo;re going to implement )</li>
<li>curry-spec.js ( Test file for the curry.js )</li>
<li>testem.yml ( Testem configurations )</li>
</ol>


<h4>Testem Configuration</h4>

<p>Edit the <code>testem.yml</code> and set up the source files for running the tests.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">src_files</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">curry.js</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">curry-spec.js</span>
</span></code></pre></td></tr></table></div></figure>


<p>Open Terminal and run the command <code>testem</code> from the TDD folder to verify testem is running.</p>

<h4>Mocha and Chai</h4>

<p>As I said earlier, we&rsquo;re going to use <strong>Mocha</strong> and <strong>Chai</strong> for writing the test cases. By default, testem uses Jasmine as the testing framework. So to use Mocha and Chai, we need to change the testem configuration.</p>

<p>First install Chai.js from npm.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>npm install chai
</span></code></pre></td></tr></table></div></figure>


<p>Open the <code>testem.yml</code> in editor and modify like below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mocha</span>
</span><span class='line'><span class="l-Scalar-Plain">src_files</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">node_modules/chai/chai.js</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">curry.js</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">curry-spec.js</span>
</span></code></pre></td></tr></table></div></figure>


<p>We also need to override the global <code>expect</code> in Testem with the <code>expect</code> method of Chai.js</p>

<p>Create a <code>setup.js</code> file in TDD folder like below:</p>

<figure class='code'><figcaption><span>setup.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">expect</span> <span class="o">=</span> <span class="nx">chai</span><span class="p">.</span><span class="nx">expect</span>
</span></code></pre></td></tr></table></div></figure>


<p>To make sure that everything works fine, edit the <strong>curry-spec.js</strong> with the following code and run the <code>testem</code> command from terminal.</p>

<figure class='code'><figcaption><span>curry-spec.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Testem setup&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should verify the tests are passing&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>    <span class="p">})</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Open the link in the terminal to start capture the browser and run the tests. Once the tests ran, you should be able to see an output like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>TEST<span class="s1">&#39;EM &#39;</span>SCRIPTS!
</span><span class='line'>Open the URL below in a browser to connect.
</span><span class='line'>http://localhost:7357/
</span><span class='line'>
</span><span class='line'>  Chrome 40.0 
</span><span class='line'>    1/1      
</span><span class='line'>              
</span><span class='line'>
</span><span class='line'> 1 tests complete.
</span><span class='line'><span class="o">[</span>Press ENTER to run tests; q to quit; p to pause<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Thinking about Behaviours of the Module</h2>

<p>Behaviour of the module is the output it produces for various inputs. Or we can say, how the module is responding to various scenarios. These scenarios are going to be our test cases. So, before we start writing our test cases, we should think about all possible scenarios the module can handle with.</p>

<h3>JavaScript Curry Function</h3>

<p>Here we&rsquo;re going to implement a curry function in JavaScript. So in this case, the <em>module</em> or the <em>unit</em> is the function named <code>curry</code>. Let&rsquo;s think and start identifying different scenarios ( in this context, inputs ) for our <code>curry</code> function.</p>

<p>According to <a href="http://en.wikipedia.org/wiki/Currying">Wikipedia</a>, curry function is defined as:</p>

<blockquote><p>In mathematics and computer science, currying is the technique of translating the evaluation of a function that takes multiple arguments (or a tuple of arguments) into evaluating a sequence of functions, each with a single argument (partial application).</p></blockquote>

<p>So by definition, a function <code>add(a,b,c)</code> is a curried function if the <code>add</code> function supports following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// should return 6</span>
</span><span class='line'><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// should return 6</span>
</span><span class='line'><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// should return 6</span>
</span><span class='line'><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// should return 6</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">sumofTwoAndThree</span> <span class="o">=</span> <span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">// sumofTwoAndThree should be a function</span>
</span><span class='line'><span class="nx">sumofTwoAndThree</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// should return 6</span>
</span></code></pre></td></tr></table></div></figure>


<p>So, what we&rsquo;re going to implement now is a function that can create a curried function from any other function. We&rsquo;ll divide our test cases into two groups: one for curry function generator and another one for the actual curry function.</p>

<h3>Writing the first test case</h3>

<p>Let&rsquo;s start with the curry function generator. We&rsquo;ll name it as <code>makeCurry</code>. Its behaviour is to transform any function into a curried function.</p>

<p>Edit the <strong>curry-spec.js</strong> and remove the test code we already added. Start with a new <code>describe</code> block. The <strong>curry-spec.js</strong> should be like this now:</p>

<figure class='code'><figcaption><span>curry-spec.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Curry function generator&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return a function&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){}</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span><span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">)).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Run the <code>testem</code> command ( if it&rsquo;s already running, you can see the following output in the browser captured )</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>ReferenceError: makeCurry is not defined
</span><span class='line'>    at Context.&lt;anonymous&gt; <span class="o">(</span>http://localhost:7357/curry-spec.js:4:16<span class="o">)</span>
</span><span class='line'>    at callFn <span class="o">(</span>http://localhost:7357/testem/mocha.js:4338:21<span class="o">)</span>
</span><span class='line'>    at Test.Runnable.run <span class="o">(</span>http://localhost:7357/testem/mocha.js:4331:7<span class="o">)</span>
</span><span class='line'>    at Runner.runTest <span class="o">(</span>http://localhost:7357/testem/mocha.js:4728:10<span class="o">)</span>
</span><span class='line'>    at http://localhost:7357/testem/mocha.js:4806:12
</span><span class='line'>    at next <span class="o">(</span>http://localhost:7357/testem/mocha.js:4653:14<span class="o">)</span>
</span><span class='line'>    at http://localhost:7357/testem/mocha.js:4663:7
</span><span class='line'>    at next <span class="o">(</span>http://localhost:7357/testem/mocha.js:4601:23<span class="o">)</span>
</span><span class='line'>    at http://localhost:7357/testem/mocha.js:4630:5
</span><span class='line'>    at timeslice <span class="o">(</span>http://localhost:7357/testem/mocha.js:5761:27<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>We can see that the test is failing. The whole TDD starts from a failing test, and by making it pass. So why waiting, let&rsquo;s implement the <code>makeCurry</code> function inside the <strong>curry.js</strong> file.</p>

<figure class='code'><figcaption><span>curry.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">makeCurry</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now in the testem window, we can see another failure:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>AssertionError: expected undefined to be a <span class="k">function</span>
</span></code></pre></td></tr></table></div></figure>


<p>Modify the <code>makeCurry</code> function to return a dummy function as its output.</p>

<figure class='code'><figcaption><span>curry.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">makeCurry</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">function</span><span class="p">(){};</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Our first test should pass now. By far, we have implemented the test case for the simple <code>makeCurry</code> function and implemented the <code>makeCurry</code> function.</p>

<p>This is how the TDD works. In the next section, we&rsquo;ll see how the whole unit implementation is evolved in series of test cases and the code to make them pass.</p>

<h2>Evolving the Final Code</h2>

<p>For now, we have only one test case for the <code>makeCurry</code> function. Let&rsquo;s think about different scenarios for our curry function.</p>

<ol>
<li>Our curry function should always accept one function as parameter, if there is no function provided, it should throw an error.</li>
</ol>


<p>Add the another test case inside the <code>curry-spec.js</code></p>

<figure class='code'><figcaption><span>curry-spec.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Curry function generator&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return a function&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){}</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span><span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">)).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should throw an error if there is no valid function provided as argument&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>            <span class="nx">makeCurry</span><span class="p">();</span>
</span><span class='line'>        <span class="p">}).</span><span class="nx">to</span><span class="p">.</span><span class="k">throw</span><span class="p">(</span><span class="s1">&#39;No function provided&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we can see that our test case is failing:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>AssertionError: expected <span class="o">[</span>Function<span class="o">]</span> to throw an error
</span></code></pre></td></tr></table></div></figure>


<p>This is because we haven&rsquo;t added the code in our <code>makeCurry</code> function to validate the arguments for it. Let&rsquo;s implement this functionality now:</p>

<figure class='code'><figcaption><span>curry.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">makeCurry</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">fn</span><span class="o">!==</span><span class="s1">&#39;function&#39;</span><span class="p">){</span>
</span><span class='line'>        <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;No function provided&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">function</span><span class="p">(){};</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we&rsquo;re getting into the rhythm of TDD. For now, we&rsquo;re done with the expectations for the <code>makeCurry</code> function. Let&rsquo;s implement the real <code>curry</code> function logic.</p>

<p>We are going to add a new describe block for the expectations for curry function. Here, the curry function is the one <code>makeCurry</code> returns. I am going to list down all the expectations for the <code>curry</code> function here. We&rsquo;ll take one by one from the list and add to the test and implement the logic.</p>

<p><strong>Expectations for the curry function</strong>:</p>

<ul>
<li>We should be able to call the curried function as the original function provided. Ie, if the original function is <code>add(1,2,3)</code> the curried function <code>curriedAdd(1,2,3)</code> should behave same as <code>add</code> function. Like this:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="nx">c</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">curriedAdd</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span> <span class="nx">add</span> <span class="p">);</span>
</span><span class='line'><span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// should return 6.</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>If we call the curried function with the lesser number of arguments, it should return a function</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">// should return a function</span>
</span><span class='line'><span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">// should return a function</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>When the total number or arguments is equal to or greater than the original number of arguments, it should return the results</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// should return 6</span>
</span><span class='line'><span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// should return 6</span>
</span><span class='line'><span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// should return 6</span>
</span><span class='line'><span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="c1">// should return 6</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>We should be able to make any number of independent curried functions using <code>makeCurry</code> function.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="o">+</span><span class="nx">c</span><span class="p">;</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">curryA</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">curryB</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">curryA</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// return 6</span>
</span><span class='line'><span class="nx">curryB</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">// return 6</span>
</span></code></pre></td></tr></table></div></figure>


<p>We came up with all the test scenarios for our curry function. Let&rsquo;s pick one by one and implement the logic. Add the first test case inside the new <code>describe</code> block.</p>

<figure class='code'><figcaption><span>curry-spec.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Curry function generator&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return a function&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){}</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span><span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">)).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should throw an error if there is no valid function provided as argument&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>            <span class="nx">makeCurry</span><span class="p">();</span>
</span><span class='line'>        <span class="p">}).</span><span class="nx">to</span><span class="p">.</span><span class="k">throw</span><span class="p">(</span><span class="s1">&#39;No function provided&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Curry function&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">add</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span>
</span><span class='line'>            <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span><span class="p">;</span>
</span><span class='line'>        <span class="p">};</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return the proper result if called with original number of arguments&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">curriedAdd</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span> <span class="nx">add</span> <span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Testem output should be like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>Curry <span class="k">function </span>should <span class="k">return </span>the proper result <span class="k">if </span>called with original number of arguments
</span><span class='line'>     expected undefined to equal 6
</span><span class='line'>        AssertionError: expected undefined to equal 6
</span><span class='line'>            at Context.&lt;anonymous&gt; <span class="o">(</span>http://localhost:7357/curry-spec.js:25:40<span class="o">)</span>
</span><span class='line'>            at callFn <span class="o">(</span>http://localhost:7357/testem/mocha.js:4338:21<span class="o">)</span>
</span><span class='line'>            at Test.Runnable.run <span class="o">(</span>http://localhost:7357/testem/mocha.js:4331:7<span class="o">)</span>
</span><span class='line'>            at Runner.runTest <span class="o">(</span>http://localhost:7357/testem/mocha.js:4728:10<span class="o">)</span>
</span><span class='line'>            at http://localhost:7357/testem/mocha.js:4806:12
</span><span class='line'>            at next <span class="o">(</span>http://localhost:7357/testem/mocha.js:4653:14<span class="o">)</span>
</span><span class='line'>            at http://localhost:7357/testem/mocha.js:4663:7
</span><span class='line'>            at next <span class="o">(</span>http://localhost:7357/testem/mocha.js:4601:23<span class="o">)</span>
</span><span class='line'>            at http://localhost:7357/testem/mocha.js:4625:7
</span><span class='line'>            at <span class="k">done</span> <span class="o">(</span>http://localhost:7357/testem/mocha.js:4300:5<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let&rsquo;s make the test pass by adding the implementation:</p>

<figure class='code'><figcaption><span>curry.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">makeCurry</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">fn</span><span class="o">!==</span><span class="s1">&#39;function&#39;</span><span class="p">){</span>
</span><span class='line'>        <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;No function provided&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">slice</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">;</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">function</span> <span class="nx">curriedFn</span><span class="p">(){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Okay now, tests are passing. Let&rsquo;s add the next test case inside the &ldquo;Curry function&rdquo; describe block:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return a function when arguments count is less than the original number of arguments&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">curriedAdd</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span> <span class="nx">add</span> <span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Tests are failing now. Time to make them pass.</p>

<p>Now we need to verify that the number of arguments passed is less than the original number of arguments. If it lesser, the tests are expecting a function to be returned ( than executing the original function ). Let&rsquo;s implement this:</p>

<figure class='code'><figcaption><span>curry.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">makeCurry</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">fn</span><span class="o">!==</span><span class="s1">&#39;function&#39;</span><span class="p">){</span>
</span><span class='line'>        <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;No function provided&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">slice</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">;</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">function</span> <span class="nx">curriedFn</span><span class="p">(){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">curriedFn</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>All the tests are passing now. Let&rsquo;s pick the next test case.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return the result whenever the total number of arguments is greater than or equal to the original number of arguments&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">curriedAdd</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span> <span class="nx">add</span> <span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>And the implementation:</p>

<figure class='code'><figcaption><span>curry.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">makeCurry</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">fn</span><span class="o">!==</span><span class="s1">&#39;function&#39;</span><span class="p">){</span>
</span><span class='line'>        <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;No function provided&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">slice</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">;</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">function</span> <span class="nx">curriedFn</span><span class="p">(){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
</span><span class='line'>        <span class="k">return</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">curriedFn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span> <span class="p">));</span>
</span><span class='line'>        <span class="p">};</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, we&rsquo;re going to add our last test case.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should support creating multple curry functions&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">curryA</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">);</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">curryB</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curryA</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curryA</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curryB</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">expect</span><span class="p">(</span> <span class="nx">curryB</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>And this time, Testem reports that all tests are passing. Voila!, it means we&rsquo;re done with our curry function implementation.</p>

<h2>Final code</h2>

<p>Here is the final code for <strong>curry-spec.js</strong> and the <strong>curry.js</strong>.</p>

<figure class='code'><figcaption><span>curry-spec.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Curry function generator&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return a function&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){}</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span><span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">)).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should throw an error if there is no valid function provided as argument&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>            <span class="nx">makeCurry</span><span class="p">();</span>
</span><span class='line'>        <span class="p">}).</span><span class="nx">to</span><span class="p">.</span><span class="k">throw</span><span class="p">(</span><span class="s1">&#39;No function provided&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;Curry function&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">add</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">beforeEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span>
</span><span class='line'>            <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span><span class="p">;</span>
</span><span class='line'>        <span class="p">};</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return the proper result if called with original number of arguments&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">curriedAdd</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span> <span class="nx">add</span> <span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return the curried function when arguments count is less than the original number of arguments&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">curriedAdd</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span> <span class="nx">add</span> <span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should return the result whenever the total number of arguments is greater than or equal to the original number of arguments&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">curriedAdd</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span> <span class="nx">add</span> <span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curriedAdd</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should support creating multple curry functions&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">curryA</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">);</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">curryB</span> <span class="o">=</span> <span class="nx">makeCurry</span><span class="p">(</span><span class="nx">add</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curryA</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curryA</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curryB</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">expect</span><span class="p">(</span> <span class="nx">curryB</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)</span> <span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">a</span><span class="p">(</span><span class="s1">&#39;function&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>curry.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">makeCurry</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">fn</span><span class="o">!==</span><span class="s1">&#39;function&#39;</span><span class="p">){</span>
</span><span class='line'>        <span class="k">throw</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;No function provided&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">slice</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">;</span>
</span><span class='line'>    <span class="k">return</span> <span class="kd">function</span> <span class="nx">curriedFn</span><span class="p">(){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
</span><span class='line'>      <span class="k">if</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
</span><span class='line'>        <span class="k">return</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">curriedFn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span> <span class="p">));</span>
</span><span class='line'>        <span class="p">};</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Summary</h2>

<p>I wouldn&rsquo;t say TDD is nice and simple. Writing all the code in TDD way is tough and frustrating for beginners. But if you keep practicing TDD, eventually you are going to love it. TDD will help you to concentrate on a small part of your code and complete it with perfection. Finally, that will lead to implement a better design for your actual module. So my point is, TDD is useful for better architecture of your code and the code will be less error prone.</p>

<p>Thanks for reading. I hope this will help for implementing TDD for your next project. Feedbacks are welcome.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Remote debugging localhost with weinre ( and HTTPS too ) ]]></title>
    <link href="https://www.undefinednull.com/2015/03/17/remote-debugging-localhost-with-weinre/"/>
    <updated>2015-03-17T10:33:00+04:00</updated>
    <id>https://www.undefinednull.com/2015/03/17/remote-debugging-localhost-with-weinre</id>
    <content type="html"><![CDATA[<p>Debugging mobile websites/applications is a real pain. No debuggers for Javascript, no console logs, cannot inspect html/css, and so on.</p>

<!--more-->


<p>Sometimes I think that I am debugging like the old IE6 days where I had to put <code>alert</code> in every line of the code to find out where the actual issue is. If you also came across the same, you know the pain.</p>

<p>Lately, Google chrome came for the rescue. They relieved this pain by introducing remote debugging support in chrome mobile. Chrome remote debugging was a real life saver, where we get the same chrome devtools connected to the webpage in mobile browser. And, We can debug like the way we do it in desktop browsers.</p>

<blockquote><p>That is Awesome!</p></blockquote>

<p>But still the problem of Android browser debugging remains the same. Chrome remote debugging can be connected to the webpages loaded inside Chrome browser ( mobile ) only. If we need to debug default browsers, we have to use any other debugging tool. Here, in this post, we&rsquo;ll discuss about another wonderful remote debugging tool known as <strong>Weinre</strong>.</p>

<h2>Install Weinre</h2>

<p>Weinre is available as an npm package. If you have configured npm in your system, let&rsquo;s install weinre globally with the below command:</p>

<p><code>npm -g install weinre</code></p>

<p>You can find more instructions installing weinre <a href="http://people.apache.org/~pmuellr/weinre-docs/latest/Installing.html">HERE</a>.</p>

<p>Now run the command <code>weinre --help</code> to see all available options.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>usage:   weinre <span class="o">[</span>options<span class="o">]</span>
</span><span class='line'>version: 2.0.0-pre-HH0SN197
</span><span class='line'>
</span><span class='line'>options:
</span><span class='line'>    --httpPort     port to run the http server on        default: 8080
</span><span class='line'>    --boundHost    ip address to <span class="nb">bind </span>the server to      default: localhost
</span><span class='line'>    --verbose      print more diagnostics                default: <span class="nb">false</span>
</span><span class='line'>    --debug        print even more diagnostics           default: <span class="nb">false</span>
</span><span class='line'>    --readTimeout  seconds to <span class="nb">wait </span><span class="k">for </span>a client message  default: 5
</span><span class='line'>    --deathTimeout seconds to <span class="nb">wait </span>to <span class="nb">kill </span>client        default: 3*readTimeout
</span><span class='line'>
</span><span class='line'>--boundHost can be an ip address, hostname, or -all-, where -all-
</span><span class='line'>means binding to all ip address on the current machine
</span></code></pre></td></tr></table></div></figure>


<p>To run weinre in default configurations, use the command <code>weinre -all-</code>.</p>

<h2>Access localhost in mobile browser</h2>

<p>The easiest way of accessing the dev machine is by using the IP address and port. Let&rsquo;s say the application is running on port 9002. To open it in the browser, first, we have to find out the IP address of the system where the application is running. Use the command <code>ifconfig</code> in OSX/Linux and <code>ipconfig</code> in Windows to find out the IP address. Now navigate to the browser window and use the <strong>IP_ADDRESS:PORT</strong> to see the running application.</p>

<p>There are situations where we need to access the application using local hostname. These includes host header validation, solving cross domain request from JavaScript..etc. Normally these things are restricted when using the <strong>IP_ADDRESS:PORT</strong> combination.</p>

<p>Accessing the local hostname in mobile devices is our first hurdle. I have found an excellent article about how to solve this issue. I don&rsquo;t want to explain all of those here, so let&rsquo;s follow this link:</p>

<p><a href="http://egalo.com/2012/05/29/testing-mac-web-site-using-local-hostname-on-mobile-device/">http://egalo.com/2012/05/29/testing-mac-web-site-using-local-hostname-on-mobile-device/</a></p>

<p>Once you&rsquo;re done, come back to check the next section.</p>

<h2>Let&rsquo;s start remote debugging</h2>

<p>Let&rsquo;s run weinre using a custom port and your IP address.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>weinre --httpPort 1234 --boundHost 192.168.2.109
</span></code></pre></td></tr></table></div></figure>


<p>This will start the weinre server in port 1234.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>2015-02-19T13:56:42.520Z weinre: starting server at http://192.168.2.109:1234
</span></code></pre></td></tr></table></div></figure>


<p>Open the link <code>http://192.168.2.109:1234</code> in your browser. We&rsquo;re mainly interested in the following links:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>Access Points
</span><span class='line'>--------------
</span><span class='line'>debug client user interface:    http://localhost:1234/client/#anonymous
</span><span class='line'>documentation:  http://localhost:1234/doc/
</span><span class='line'>
</span><span class='line'>Target Script
</span><span class='line'>--------------
</span><span class='line'>You can use this script to inject the weinre target code into your web page.
</span><span class='line'>http://localhost:1234/target/target-script-min.js#anonymous
</span></code></pre></td></tr></table></div></figure>


<p>Add the target script to which-ever page you need to inspect and use the debug client user interface link. The debug client is very similar to the Chrome dev tools.</p>

<h2>HTTPS Support ?</h2>

<p>As of now, weinre target script doesn&rsquo;t not support https. The problem with this is that if your site runs on https protocol and if you need to inject the weinre target script in any of the pages, the browser will block the script. Because the weinre script is loading through http protocol and the browser will not block any http resources if your website is https.</p>

<p>We can fix this problem by using another service called <strong>ngrok</strong>. Basically, ngrok is a tunneling proxy where it exposes a tunnel to any web server and port as a subdomain. Since ngrok supports https, it is fairly easy to get the weinre server tunneled through ngrok with htttps.</p>

<p>Let&rsquo;s see how this is done:</p>

<p><strong>Install ngrok</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>npm install -g ngrok
</span></code></pre></td></tr></table></div></figure>


<p><strong>Start the weinre server</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>weinre --httpPort 1234 --boundHost 192.168.2.109
</span></code></pre></td></tr></table></div></figure>


<p><strong>Run ngrok pointing to the weinre server</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>ngrok 192.168.2.109:1234
</span></code></pre></td></tr></table></div></figure>


<p>This will output like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>ngrok                                                                                            <span class="o">(</span>Ctrl+C to quit<span class="o">)</span>
</span><span class='line'>
</span><span class='line'>Tunnel Status                 online
</span><span class='line'>Version                       1.7/1.7
</span><span class='line'>Forwarding                    http://74bd4fb7.ngrok.com -&gt; 192.168.2.109:1234
</span><span class='line'>Forwarding                    https://74bd4fb7.ngrok.com -&gt; 192.168.2.109:1234
</span><span class='line'>Web Interface                 127.0.0.1:4040
</span><span class='line'><span class="c"># Conn                        0</span>
</span><span class='line'>Avg Conn Time                 0.00ms
</span></code></pre></td></tr></table></div></figure>


<p>Now, <code>https://74bd4fb7.ngrok.com</code> is your https tunnel to weinre server. Open your browser and navigate to <code>192.168.2.109:1234</code>. Follow the set-up instructions given in that page after replacing <code>192.168.2.109</code> with <code>https://74bd4fb7.ngrok.com</code> for https support.</p>

<p><strong>Note:</strong></p>

<p>If you&rsquo;re having any Javascript error in the target script, you might need to modify the <code>target-min-script.js</code>. To do that, find out the weinre path first:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">cd</span> <span class="sb">`</span>which weinre<span class="sb">`</span>/../web/target
</span><span class='line'>vi target-min-script.js
</span></code></pre></td></tr></table></div></figure>


<p>Now in the editor, search for the following text</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">pattern</span> <span class="o">=</span> <span class="sr">/(http:\/\/(.*?)\/)/</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Replace it with the below one and save.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">pattern</span> <span class="o">=</span> <span class="sr">/(https?:\/\/(.*?)\/)/</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now you can use weinre in https pages.</p>

<h2>Summary</h2>

<p>Weinre is really a powerful tool for remote debugging. Here in this guide, we saw how to configure and use weinre to debug local websites. I hope this will help someone who would be struggling to work with Android browsers. I would like also mention that there is an online hosted weinre server available. You can check it out <a href="http://debug.build.phonegap.com/">http://debug.build.phonegap.com/</a>. The only drawback is that it will not support https pages.</p>

<p>Thanks for reading. Let me know the feedback and any comments.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Whatsapp web client: Hide/blur thumbnail images preview]]></title>
    <link href="https://www.undefinednull.com/2015/02/04/whatsapp-web-client-hide-slash-blur-thumbnail-images-preview/"/>
    <updated>2015-02-04T14:07:17+04:00</updated>
    <id>https://www.undefinednull.com/2015/02/04/whatsapp-web-client-hide-slash-blur-thumbnail-images-preview</id>
    <content type="html"><![CDATA[<p>The most anticipated Whatsapp web is here finally. If you haven&rsquo;t seen it go check it out: <a href="http://web.whatsapp.com">http://web.whatsapp.com</a>. I really like it because of these reasons:</p>

<ol>
<li>Desktop notifications in chrome</li>
<li>I don&rsquo;t need to check my phone whenever any message is arrived. The chat window is in the right corner of my screen.</li>
<li><strong>The main one:</strong> I can type as fast as writing an email or using a chat application.</li>
</ol>


<!-- more -->


<h2>But is it a complete Whatsapp client ?</h2>

<p>Not yet. Basically the web client mirror the Whatsapp application from the phone. That&rsquo;s why they say that Whatsapp application in your phone should be connected to internet when you use the web client.</p>

<p>Besides, the whatsapp web client lacks many functions provided by the mobile app. For example: You cannot forward message/media from one window to another. You cannot stop the media ( Images ) autodownload .. etc</p>

<h2>Is media autodownload required for a web client ?</h2>

<p>I know that Whatsapp has an option to stop media auto-download mainly for reducing network data consumption. That&rsquo;s said, it should not be a problemfor the web client.</p>

<p>But what about user&rsquo;s privacy ? When you receive any images/videos in your mobile phone, there are less chances that others going to see it ( as the mobile screen is small ). But you&rsquo;re going to use the web client from your laptop/desktop, may be from a public cafe or even from your office. Chances are more for others to see your chats. And whatsapp web doesn&rsquo;t have any option to stop the auto-download images.</p>

<h2>Solution</h2>

<p>I use whatsapp web and I had the same problem. That&rsquo;s when I decided to make a Chrome extension to solve this issue. I did publish it in the Chrome webstore, and you can install it from here:</p>

<p><strong><a href="https://chrome.google.com/webstore/detail/whatsapp-web-hide-media-i/elioehejcldpnphaohhkcdjhjojjbkim">WhatsApp web Hide Images Chrome Extension</a></strong></p>

<p>Preview:</p>

<p><img src="https://lh6.googleusercontent.com/u8Y1oIPCC_ejXU5OlpQJIxZCHEJr5Fx-HsV9UzG6KnR0gk6VmrkcHnN-QjRCQRqbMTy5xnTM=s640-h400-e365" alt="screenshot" /></p>

<p>The extension will not stop the media auto-download. But it will hide all the thumbnail images by default. On mouseover, a transparent image will be shown, and onclick it will show the full image. I hope this will be useful to some of you guys.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A brief walk-through of the ng-options in AngularJS]]></title>
    <link href="https://www.undefinednull.com/2014/08/11/a-brief-walk-through-of-the-ng-options-in-angularjs/"/>
    <updated>2014-08-11T11:13:45+04:00</updated>
    <id>https://www.undefinednull.com/2014/08/11/a-brief-walk-through-of-the-ng-options-in-angularjs</id>
    <content type="html"><![CDATA[<p><img src="https://lh4.googleusercontent.com/-ts5lhPEvP2U/VA2txu4TiLI/AAAAAAAASWs/ZR8EkWYzhcI/w681-h250-no/ng-options.jpg" alt="" /></p>

<p>Using ng-options was bit tough for me. I banged my head couple of times when I actually used ng-options in my code. And most of the times, I had to google and find out how to make it work. Looking the AngularJS documentation didn&rsquo;t help much, as it&rsquo;s less informative and doesn&rsquo;t have much code samples.</p>

<p>But, I could find lot of Stackoverflow links, and infact I understood the concepts after reading those links only. Here, finally, I decided to write a blog posts about what I learned. And you know, this post is going to be mostly useful to me more than any one; because next time, I don&rsquo;t need to google it.. :)</p>

<!--more-->


<h2>Why ng-options</h2>

<p>Before that, let&rsquo;s see ng-repeat. The simple way of creating a dropdown in Angular is by using ng-repeat. Look at the code below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;p&gt;</span>selected item is : {{selectedItem}}<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>      <span class="nt">&lt;select</span> <span class="na">ng-model=</span><span class="s">&quot;selectedItem&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;option</span> <span class="na">ng-repeat=</span><span class="s">&quot;item in items&quot;</span> <span class="na">value=</span><span class="s">&quot;{{item}}&quot;</span><span class="nt">&gt;</span>{{item}}<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>And the JavaScript:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">,[]);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;Test&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">){</span>
</span><span class='line'>   <span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="s1">&#39;three&#39;</span><span class="p">,</span><span class="s1">&#39;four&#39;</span><span class="p">]</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>We have an array of text in a property called <code>items</code>. The above code is ideal when the items array consists of only string data. However, this cannot be used when the items array contains objects.</p>

<p>The AngularJS documentation for &lsquo;select&rsquo; says to use ng-options instead of ng-repeat in this scenario. The reason behind is, option element can only hold string type as its value.</p>

<p>Quoted from AngularJS documentation:</p>

<blockquote><p>Note: ngOptions provides an iterator facility for the &lsquo;<code>option</code>&rsquo; element which should be used instead of ngRepeat when you want the select model to be bound to a non-string value. This is because an option element can only be bound to string values at present.</p></blockquote>

<p>Let&rsquo;s change the items to an array of objects.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">30</span> <span class="p">},{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">27</span> <span class="p">},{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">50</span> <span class="p">}];</span>
</span></code></pre></td></tr></table></div></figure>


<p>and the HTML</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;p&gt;</span>selected item is : {{selectedItem}}<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>      <span class="nt">&lt;select</span> <span class="na">ng-model=</span><span class="s">&quot;selectedItem&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;option</span> <span class="na">ng-repeat=</span><span class="s">&quot;item in items&quot;</span> <span class="na">value=</span><span class="s">&quot;{{item.age}}&quot;</span><span class="nt">&gt;</span>{{item.name}}<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>If you notice, the <code>selectedItem</code> model is bound to the value of the selected option element. Here, as already explained, we&rsquo;re restricted to have only strings in our items array. We cannot set the selectedItem model to the object inside items. Therefore we need to use the ng-options for these kind of situations. Let&rsquo;s see how to do it.</p>

<p><strong>Re-write the above code using ng-options</strong>:</p>

<p>We can re-write the above code using ng-options. The new html looks like below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">&quot;Test&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;p&gt;</span>selected item is : {{selectedItem}}<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>      <span class="nt">&lt;p&gt;</span> age of selected item is : {{selectedItem.age}} <span class="nt">&lt;/p&gt;</span>
</span><span class='line'>      <span class="nt">&lt;select</span> <span class="na">ng-model=</span><span class="s">&quot;selectedItem&quot;</span> <span class="na">ng-options=</span><span class="s">&quot;item.name for item in items&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>Now the <code>selectedItem</code> is bound to an object instead of the string value. You can see it in action <a href="http://codepen.io/shidhincr/pen/LeuDw">here</a></p>

<div class="info">
If you notice, the first element inside the dropdown is a blank option element. This is because, initially, the &#8216;selectedItem&#8217; does not have any default value and is undefined. Since there&#8217;s no default option selected, AngularJS will generate a new option tag and select it as default. To fix the issue, just set the &#8216;selectedItem&#8217; to the first object in the items array. <br/>
$scope.selectedItem = $scope.items[0];
</div>


<br/>


<p>In the next section, we&rsquo;ll see different types of ng-options expressions.</p>

<h2>Different kinds of syntax</h2>

<p>Before we start, read the official <a href="https://docs.angularjs.org/api/ng/directive/select">documentation</a> here. If you notice, the type of the ng-options is named as  a <strong>comprehension expression</strong>. As quoted from this <a href="https://groups.google.com/forum/#!topic/angular/4EDe8xIbjLU">link</a></p>

<blockquote><p>The &ldquo;comprehension expression&rdquo; is not the same as Angular expressions that $parse parses.  It is a custom expression specific to ngSelect.  You can actually see the regex it uses to parse in the ngSelect source file.</p></blockquote>

<p>We&rsquo;ll cover these different type of <strong>comprehension expressions</strong> with the help of examples below.</p>

<p><u><strong>For Array data  :</strong></u></p>

<p><strong>1) <code>label</code> for <code>value</code> in <code>array</code></strong></p>

<p>This is the simplest and commonly used expression. This tells <strong>ng-options</strong> directive to loop through the array, and generate option element containing the current value. The generated html looks like this:</p>

<p><img src="https://lh3.googleusercontent.com/-sWj95dIg0Co/VA0e8YuM7UI/AAAAAAAASRY/kmmupaPV1Ac/h114/Screenshot%2B2014-09-08%2B07.06.16.png" alt="" /></p>

<p>The <em>value</em> of each option element is the loop couter and the text inside the option element is the current array content. Note the <code>label</code> is the one generates the text inside each option element. So it should be same name as <code>value</code> if items array contains all premitive type. In the above example, both label and value referred as <code>item</code>.</p>

<p>The flexibility of ng-options is when the array contains objects rather than plain strings. To know more, let&rsquo;s change the items like this:</p>

<pre><code>$scope.items = [{name: 'one', age: 30 },{ name: 'two', age: 27 },{ name: 'three', age: 50 }];
</code></pre>

<p>And we can change our expression as</p>

<pre><code>ng-options="item.name for item in items"
</code></pre>

<p>The above code is pretty simple to understand. We&rsquo;re telling angular that to loop through all the items in use <code>item.name</code> as the text inside each option element. Let&rsquo;s move to much more complex type of expressions.</p>

<p><strong>2) <code>select</code> as <code>label</code> for <code>value</code> in <code>array</code></strong></p>

<p>By default, unless specified, the model bound the parent select box will be the <code>value</code> of the expression. That means, in the previous example, the <code>item</code> is the model for the select element. If we select the second element in the select box, the model is this:</p>

<p><img src="https://lh5.googleusercontent.com/-H_M5Y7QW9Jw/VA0l1wZY6WI/AAAAAAAASRw/EB54lG4L-rA/h240/Screen%2BShot%2B2014-09-08%2Bat%2B7.43.05%2BAM.png" alt="" /></p>

<p>However, AngularJS provides another variation of expression to change this behaviour. Using <code>select as</code> we can specify a different model to the select box. Let&rsquo;s see the below example:</p>

<pre><code>ng-options="item.age as item.name for item in items"
</code></pre>

<p><img src="https://lh5.googleusercontent.com/-AY6sL4nCidI/VA0nnsQRQuI/AAAAAAAASR8/ja0NvwcMtyI/h128/Screen%2BShot%2B2014-09-08%2Bat%2B7.50.24%2BAM.png" alt="" /></p>

<p><img src="https://lh6.googleusercontent.com/-MkszZ2GNFv4/VA0n65cdfcI/AAAAAAAASSM/45mrEy-1XKU/h240/Screen%2BShot%2B2014-09-08%2Bat%2B7.51.34%2BAM.png" alt="" /></p>

<p>Here, each option will have the text as <code>item.name</code> but when we select any of them, the selectedItem will be <code>item.age</code>.</p>

<p><strong>3) <code>label</code> group by <code>group</code> for <code>value</code> in <code>array</code></strong></p>

<p>Group by is really a short cut for adding options groups.  In plain html, we need to use the <code>&lt;optgroup&gt;</code> tags to group a set of options. But here, we can specify ng-options to render optgroups based on <code>group</code> value. Let&rsquo;s see the below code.</p>

<figure class='code'><figcaption><span>javascript</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>     <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">30</span> <span class="p">},</span>
</span><span class='line'>     <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">27</span> <span class="p">},</span>
</span><span class='line'>     <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">50</span> <span class="p">},</span>
</span><span class='line'>     <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;four&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">15</span> <span class="p">},</span>
</span><span class='line'>     <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;five&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">27</span> <span class="p">},</span>
</span><span class='line'>     <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;six&#39;</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">30</span> <span class="p">}</span>
</span><span class='line'><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>and the ng-options in HTML</p>

<pre><code>ng-options="item.name group by item.age for item in items"
</code></pre>

<p>The above expression tells Angular to group each options based on the <code>item.age</code>. If we run the code, the output looks like this</p>

<p><img src="https://lh4.googleusercontent.com/-IMgiQ1KQINw/VA2flqQxDiI/AAAAAAAASVQ/LYQ4LHM6Th0/w239-h301-no/Screen%2BShot%2B2014-09-08%2Bat%2B1.38.12%2BPM.png" alt="" /></p>

<p><strong>4) <code>select</code> as <code>label</code> group by <code>group</code> for <code>value</code> in <code>array</code> track by <code>trackexpr</code></strong></p>

<p>This is similar to the previous one, and the only addition is the <code>track by</code>. If you have ever used <code>ng-repeat</code>, the <code>track by</code> won&rsquo;t surprise you. The syntax and usage is same as with <code>ng-repeat</code>.</p>

<p>Using <code>track by</code>, we can explicitly tell AngularJS to track each DOM node by the specified value. For example, we can use like this:</p>

<pre><code>ng-options="item.name group by item.age for item in items track by item.name"
</code></pre>

<p><strong>Bennadel</strong> explained this pretty well in his <a href="http://www.bennadel.com/blog/2556-using-track-by-with-ngrepeat-in-angularjs-1-2.htm">blog post</a>.</p>

<p> <u><strong>For Object data  :</strong></u></p>

<p>ng-options is not just restricted to array types, but can be used for object data sources too.  In this section, we&rsquo;ll see how ng-options are used for object data. Let&rsquo;s modify the <code>items</code> in our code like below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">$scope</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s1">&#39;one&#39;</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;two&#39;</span><span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;three&#39;</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;four&#39;</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;five&#39;</span><span class="o">:</span> <span class="mi">27</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;six&#39;</span><span class="o">:</span> <span class="mi">30</span>
</span><span class='line'>   <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p><strong>1) <code>label</code> for <code>(key , value)</code> in <code>object</code></strong></p>

<p>The expression for object data source is similar to the array data source. The only difference in object data source is, everything is key value pairs. ng-options for object allows us to loop through these (key,value) pairs; The expression is pretty much self explanatory, as all other parts are similar to what we have seen already.</p>

<p>Let&rsquo;s modify the expression like this in our mark-up</p>

<pre><code>ng-options="name for (name, value) in items"
</code></pre>

<p>The generated html is like this:</p>

<p><img src="https://lh3.googleusercontent.com/-eoAgJdq75go/VA_CWccGIqI/AAAAAAAASeo/OE-cjTGnGr4/h166/Screen%2BShot%2B2014-09-10%2Bat%2B7.15.04%2BAM.png" alt="" /></p>

<p>The generated html is a select box with all the key names. Similarly, we can create the select box with only values, shown below.</p>

<pre><code>ng-options="name for (name, value) in items"
</code></pre>

<div class="info">
For object data sources, the default model bound to the select box is the value, not the key. That means, in the above example, even though the select box displays only the key names, the model is actually bounds to its value. Try selecting an option in our demo, you can see that the selectedItem is printed as its value. However, this behaviour can be changed by using the &#8216;select as&#8217; syntax.
</div>


<br/>


<p>The remaining expressions available for object data source is given below. There is no need of any explanation as they are similar to the array data source. The only difference is, for objects, both <code>(key, value)</code> are available.</p>

<p><strong>2) <code>select</code> as <code>label</code> for <code>(key , value)</code> in <code>object</code></strong></p>

<p><strong>3) <code>label</code> group by <code>group</code> for <code>(key, value)</code> in <code>object</code></strong></p>

<p><strong>4) <code>select</code> as <code>label</code> group by <code>group</code> for <code>(key, value)</code> in <code>object</code></strong></p>

<h2>Extra Points</h2>

<ol>
<li>If the model is present and not selected, Angular will generate a default option element. This is done for not accidentally setting the model value when the select box gets rendered.</li>
<li>There is no straight forward way of selecting the default options. Usually the controller is responsible for setting the model for select box, so that the default option will be selected automatically.</li>
<li>It&rsquo;s also possible to add filters to the ng-options expressions.</li>
</ol>


<h4>Please re-tweet if you found this article helpful</h4>

<blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">A brief walk-through of the ng-options in <a href="https://twitter.com/hashtag/AngularJS?src=hash">#AngularJS</a> <a href="https://t.co/RopuFUtD35">https://t.co/RopuFUtD35</a> via <a href="https://twitter.com/shidhincr">@shidhincr</a></p>&mdash; Shidhin (@shidhincr) <a href="https://twitter.com/shidhincr/status/661084286808756224">November 2, 2015</a></blockquote>


<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


<h2>Summary</h2>

<p>Thanks for reading !! ng-options is a powerful directive. Mastering it properly will save lot of time in your next project.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Practical Guide to PreLink, PostLink and Controller Methods of Angular Directives]]></title>
    <link href="https://www.undefinednull.com/2014/07/07/practical-guide-to-prelink-postlink-and-controller-methods-of-angular-directives/"/>
    <updated>2014-07-07T14:20:58+04:00</updated>
    <id>https://www.undefinednull.com/2014/07/07/practical-guide-to-prelink-postlink-and-controller-methods-of-angular-directives</id>
    <content type="html"><![CDATA[<p>I have discussed about the scope of a directive in my previous <a href="http://www.undefinednull.com/2014/02/11/mastering-the-scope-of-a-directive-in-angularjs/">article</a>. Here we&rsquo;re going to see how to use the link and controller functions of an AngularJs directive.</p>

<!--more-->


<h2>Link function of an Angular Directive</h2>

<p>As the name implicates, the link function has the duty of linking the model to the templates. Link function is the place where AngularJs does the data binding to the compiled templates. Let&rsquo;s take a look at the signature of a link function.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">link</span><span class="o">:</span> <span class="kd">function</span> <span class="nx">LinkFn</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">attr</span><span class="p">,</span> <span class="nx">ctrl</span><span class="p">){}</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are 4 parameters available to the link function.</p>

<ol>
<li><strong>scope</strong> :  The <code>scope</code> of the directive</li>
<li><strong>elem</strong> :   Dom element where the directive is applied</li>
<li><strong>attr</strong> :   Collection of attributes of the Dom Element</li>
<li><strong>ctrl</strong> :       Array of controllers required by the directive</li>
</ol>


<p>Now let&rsquo;s create a simple directive to see how the data binding works. See the JSFiddle below:</p>

<iframe style="width: 100%; height: 300px" frameborder="0" seamless="seamless" src="https://jsfiddle.net/shidhincr/Bpxn2/embedded/js,resources,html,css,result/light/"></iframe>


<p>The <code>name</code> and <code>greeting</code> properties attached to the scope are linked to the template once the link function is executed. And, the browser will show <strong>&ldquo;Hey, I am Paul&rdquo;</strong> in the view.</p>

<p>The above is the usual way to create a link function inside a directive. However, AngularJs  allows to set the <code>link</code> property to an object also. Advantage of having an object is, we can split the link function into two separate methods called, <code>pre-link</code> and <code>post-link</code>. In the following sections, we&rsquo;ll see how to use these link functions.</p>

<h2>PostLink</h2>

<!--1. Post link is same as the link function-->


<!--2. Example syntax-->


<p>In the previous sections, we saw how to create a link function. For AngularJs, the link function is we created is a post-link function. So in general we can write the post-link function in two ways:</p>

<p><strong>1)</strong> Simply set the link method.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;dad&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">restrict</span><span class="o">:</span> <span class="s1">&#39;EA&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span><span class="nx">elem</span><span class="p">,</span><span class="nx">attr</span><span class="p">){</span>
</span><span class='line'>            <span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;Paul&#39;</span><span class="p">;</span>
</span><span class='line'>            <span class="nx">scope</span><span class="p">.</span><span class="nx">greeting</span> <span class="o">=</span> <span class="s1">&#39;Hey, I am &#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>2)</strong> link property points to a object literal, which has a <code>post</code> method.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;app&#39;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;dad&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">restrict</span><span class="o">:</span> <span class="s1">&#39;EA&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">link</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">post</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span><span class="nx">elem</span><span class="p">,</span><span class="nx">attr</span><span class="p">){</span>
</span><span class='line'>              <span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;Paul&#39;</span><span class="p">;</span>
</span><span class='line'>              <span class="nx">scope</span><span class="p">.</span><span class="nx">greeting</span> <span class="o">=</span> <span class="s1">&#39;Hey, I am &#39;</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<div class="info">
Both denotes valid post-link functions. In most cases, we need to use the link as a method as shown in step 1.
</div>


<h2>PreLink</h2>

<!--1. Most of the times not required-->


<!--2. We're going to see one of the use case when it's required.-->


<!--3. Create a directive <son> and add it to the <dad> directive&#8211;>


<!--4. Create data binding : scope.text = 'my dad's name is name.'-->


<p>The signature is of the pre-link function is same as that of a post-link. The only difference between the pre-link and a post-link is the order they gets executed. The following code will explain more clearly.</p>

<p>Let&rsquo;s create a new directive called <code>&lt;son&gt;</code> and place inside the template of <code>&lt;dad&gt;</code> directive.</p>

<iframe style="width: 100%; height: 300px" frameborder="0" seamless="seamless" src="https://jsfiddle.net/shidhincr/Bpxn2/1/embedded/js,resources,html,css,result/light/"></iframe>


<p>We created a <strong>son</strong> directive and placed inside the <strong>dad</strong> directive&rsquo;s template. Since there is no scope specified for the <strong>son</strong> directive, we assume that all parent directive scope should be available to it. Let&rsquo;s look at the output tab of the jsFiddle, we can see that the <strong>son</strong> directive prints like this:</p>

<pre><code>Hey, I am son, and my dad is undefined
</code></pre>

<p>Notice that the dad&rsquo;s name is <em>undefined</em> ?</p>

<p>Now let&rsquo;s analyse what happened. Here, both the <strong>dad</strong> and <strong>son</strong> directives have link functions, and both these link functions are post-links. When a directive contains multiple child directives, all of the child directive&rsquo;s link functions executed first then the parent directive link function. So, in this case, when  <strong>son</strong> directive&rsquo;s link function executes, the <strong>dad</strong> directive is still not linked the data to the template. That&rsquo;s why the <strong>son</strong> directive outputs the dad&rsquo;s name as <strong>undefined</strong>.</p>

<p><u>How to solve this issue ?</u></p>

<p>This is where the <code>pre-link</code> comes handy. A pre-link function of a directive will get executed before all of its child directives&#8217; link functions. Let&rsquo;s modify our jsFiddle:</p>

<iframe style="width: 100%; height: 300px" frameborder="0" seamless="seamless" src="https://jsfiddle.net/shidhincr/Bpxn2/2/embedded/js,resources,html,css,result/light/"></iframe>


<p>See the output tab. Dad&rsquo;s name is now available to the son.</p>

<h2>Controller</h2>

<p>Changing post-link to pre-link will solve the above problem. However, it&rsquo;s not a best practice to create pre-link functions whenever we introduce a child directive. Assume, if instead of a child directive, what if we want to share some data to another directive applied to the same DOM element ?</p>

<p>Directive&rsquo;s controller is designed for that. A controller is a place where directive can define it&rsquo;s public API. Let&rsquo;s solve the above problem in controller way.</p>

<iframe style="width: 100%; height: 300px" frameborder="0" seamless="seamless" src="https://jsfiddle.net/shidhincr/Bpxn2/3/embedded/js,resources,html,css,result/light/"></iframe>


<p>Here, we&rsquo;re defining a proper API, and our directive is more robust now. Similarly,  we&rsquo;re making sure that the <strong>son</strong> directive has a dependency on the <strong>dad</strong> directive. In simple words, son cannot exist with out a dad. We can see that, AngularJs will throw an error when the son directive is placed outside the dad directive. This makes sure that our code is well error handled.</p>

<h2>Order of Execution</h2>

<ol>
<li>Controller gets executed first</li>
<li>Pre-link gets  executed next</li>
<li>Post-link gets executed last</li>
</ol>


<h2>Summary</h2>

<p><u><strong>Post :</strong></u>
This is the most commonly used for data binding</p>

<ul>
<li>Safe to attach event handlers to the  DOM element</li>
<li>All children directives are linked, so it&rsquo;s safe to access them</li>
<li>Never set any data required by the child directive here. Because child directive&rsquo;s will be linked already.</li>
</ul>


<p><u><strong>Pre :</strong></u>
Used rarely. One of the use case is when a child directive requires data from its parent, the parent directive should set it through its pre-link function.</p>

<ul>
<li>Set data required for its child directives</li>
<li>Safe to attach event handlers to the DOM element</li>
<li>Not safe to access DOM elements belong to child directives. They&rsquo;re not linked yet.</li>
</ul>


<p><u><strong>Controller :</strong></u>
Used for defining a proper API to the directive. Using controller, directives can communicate and share data each other.</p>

<ul>
<li>Set the data required to other directives.</li>
<li>Never access DOM element inside the controller; it&rsquo;s against Angular&rsquo;s philosophy and make testing hard.</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Explaining Call and Apply in JavaScript, through Mr.Dave]]></title>
    <link href="https://www.undefinednull.com/2014/06/26/explaining-call-and-apply-in-javascript-through-mr-dot-dave/"/>
    <updated>2014-06-26T10:41:07+04:00</updated>
    <id>https://www.undefinednull.com/2014/06/26/explaining-call-and-apply-in-javascript-through-mr-dot-dave</id>
    <content type="html"><![CDATA[<h3>Call and Apply, makes sense. Who is Mr.Dave ?</h3>

<p>First, I admit the title looks bit weird. I know this topic has been explained a thousand times in many JavaScript blogs, and I don&rsquo;t want to repeat the same here too. So I am gonna explain this through a person &lsquo;<strong>Dave</strong>&rsquo;.</p>

<!--more-->


<p>Yesterday I got a chance to explain the call and apply methods in JavaScript to some of my friends. I had to pick a real world scenario to make them properly understand how it works. Here I am going to explain the same. Excuse me if this is going to be dumb story.</p>

<h3>Real world scenario</h3>

<p>Let&rsquo;s assume, you&rsquo;ve got a friend called Dave, and he is very smart. An interesting thing about him is, he has developed a <strong>method</strong> for booking flight tickets for cheap and easily. Basically how he has done this is by creating lot of contacts in this field, so that he can get more offers while flight booking. It took him many months to get it done.</p>

<p>Whenever Dave wants to make a flight booking, he calls his friends ( the contacts he made ) and tells them a secret code. They verifies the code and returns good offer details to him. After that, he provides the details of his travel and payment ..etc. He gets the tickets printed on his name, age, and id card number. Till now, all is well !</p>

<p><strong>Now, if you want to a book a flight ticket using the same method, what will you do ?</strong></p>

<ul>
<li>You can build the same method as Dave built.

<ul>
<li>No ! that&rsquo;s gonna take lot of time</li>
</ul>
</li>
<li>You can ask Dave to use this method.

<ul>
<li>This is okay, but the ticket will have always Dave&rsquo;s name, age and id card number</li>
</ul>
</li>
<li>Fool Dave&rsquo;s friends by impersonating as Dave and provide your details

<ul>
<li>Whaaaaat ?</li>
</ul>
</li>
</ul>


<p>Yeah, you are going to do the third step now. That&rsquo;s the exact need of <code>call</code> and <code>apply</code> in JavaScript.</p>

<h3>Structure of Dave in Code</h3>

<p>Dave looks more like this in the code :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">Dave</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Dave&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">age</span>    <span class="o">:</span> <span class="s1">&#39;30&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">getIdNumber</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="k">return</span> <span class="s1">&#39;id number of dave&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nx">bookCheapFlightTickets</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">place</span><span class="p">,</span> <span class="nx">numberOfPeople</span><span class="p">,</span> <span class="nx">paymentDetails</span> <span class="p">){</span>
</span><span class='line'>      <span class="kd">function</span> <span class="nx">sendSecretCode</span><span class="p">(){</span>
</span><span class='line'>          <span class="c1">// Dave&#39;s own logic for generating secret code</span>
</span><span class='line'>          <span class="c1">// and sending to his friends</span>
</span><span class='line'>          <span class="c1">// ...</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="kd">function</span> <span class="nx">bookTickets</span><span class="p">(){</span>
</span><span class='line'>          <span class="c1">// book the tickets using the given details</span>
</span><span class='line'>          <span class="c1">// the ticket will be printed always in this.name , this.age, this.getIdNumber() and here **this** is pointing to Dave</span>
</span><span class='line'>          <span class="k">return</span> <span class="s2">&quot;Ticket is booked for &quot;</span><span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">+</span><span class="s2">&quot;, &quot;</span><span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getIdNumber</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">isVerified</span> <span class="o">=</span> <span class="nx">sendSecretCode</span><span class="p">();</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">isVerified</span> <span class="o">?</span> <span class="nx">bookTickets</span><span class="p">()</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Do you see any problem here ? The <code>bookCheapFlightTickets()</code> is complex. Also you cannot just execute it with <code>Dave.bookCheapFlightTickets()</code> by giving the <strong>place</strong>, <strong>numberOfPeople</strong>, and <strong>paymentDetails</strong> as parameters. Yes, the problem is the ticket is going to be printed on Dave&rsquo;s  details ( here the  details are his name, age and idNumber ).</p>

<h3>What are Call and Apply</h3>

<p>In simple, <code>call</code> and <code>apply</code> are two methods of the Function object. Normally you can execute a function by appending &lsquo;()&rsquo; to its name. Say, a function <code>foo</code>, can be invoked by calling <code>foo()</code>. Alternately, using call or apply :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">foo</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">,</span> <span class="nx">param3</span> <span class="p">);</span>
</span><span class='line'><span class="nx">foo</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="p">[</span><span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">,</span> <span class="nx">param3</span> <span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<div class='info'>
Note: Only difference between the &#8216;call&#8217; and &#8216;apply&#8217; is the way to you pass the parameters to them. The former takes parameters as comma separated while the latter takes only array of parameters. Honestly, I don&#8217;t know why there are two implementations.
</div>


<br>


<p>Now you may ask, what is this <code>context</code> parameter. Yeah, this is the only special thing about call and apply. The <code>context</code> is used for changing the execution context of the function. So when provided, it will replace all <code>this</code> references in the function with itself. Remember, if the <code>context</code> object is null/undefined, the execution context will be defaulted to global window object. i.e., <code>this</code> will reference to the window object. ( this will be changed in <a href="http://es5.github.io/">ES5</a> ).</p>

<p>So the main point is anything points to <code>this</code> inside a function can be changed to this <code>context</code> object. Voila,  that&rsquo;s what we&rsquo;re looking for !</p>

<h3>Let&rsquo;s Apply What You Learnt</h3>

<p>So now you know how to fool Dave&rsquo;s friends by impersonating as Dave. You will be mostly look like below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">You</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;You&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">age</span><span class="o">:</span>    <span class="s1">&#39;29&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">getIdNumber</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>      <span class="k">return</span> <span class="s1">&#39;your id number&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now you can borrow Dave&rsquo;s <strong>method</strong> using <code>call</code> or <code>apply</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">davesMethodForFlightBooking</span> <span class="o">=</span> <span class="nx">Dave</span><span class="p">.</span><span class="nx">bookCheapFlightTickets</span><span class="p">;</span>
</span><span class='line'><span class="c1">// using call</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">bookedTicket</span> <span class="o">=</span> <span class="nx">davesMethodForFlightBooking</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">You</span><span class="p">,</span> <span class="nx">place</span><span class="p">,</span> <span class="nx">numberOfPeople</span><span class="p">,</span> <span class="nx">paymentDetails</span><span class="p">);</span>
</span><span class='line'><span class="c1">// using apply</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">bookedTicket</span> <span class="o">=</span> <span class="nx">davesMethodForFlightBooking</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">You</span><span class="p">,</span> <span class="p">[</span><span class="nx">place</span><span class="p">,</span> <span class="nx">numberOfPeople</span><span class="p">,</span> <span class="nx">paymentDetails</span><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<h3>tl;dr</h3>

<p><code>Call</code> and <code>Apply</code> are two important tools of advanced JavaScript programming. In JavaScript, a function always have an execution context, called as <code>this</code>. When the function is executed normally, like this <code>foo()</code> the execution context points to the global window object. If the function is a method of an object, the execution context points to that object. For example, in the code <code>obj.foo()</code> the execution context <code>this</code> points to <code>obj</code>.</p>

<p><code>Call</code> and <code>Apply</code> are the only way to change the execution context when a function is invoked. You can pass an object as the first parameter of the <code>Call</code> and <code>Apply</code> and the <code>this</code> reference will point to the object passed the function.</p>

<p>The only difference between the <code>call</code> and <code>apply</code> is the way to you pass the parameters to them. The former takes parameters as comma separated while the latter takes only array of parameters. Honestly, I don&rsquo;t know why there are two implementations.</p>

<h3>That&rsquo;s it</h3>

<p>Thanks for reading ! Please correct me if I made any mistakes in the post.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AngularJS: Real time model persistence using local storage]]></title>
    <link href="https://www.undefinednull.com/2014/02/25/angularjs-real-time-model-persistence-using-local-storage/"/>
    <updated>2014-02-25T07:46:00+04:00</updated>
    <id>https://www.undefinednull.com/2014/02/25/angularjs-real-time-model-persistence-using-local-storage</id>
    <content type="html"><![CDATA[<p>Last week, I came across a situation while working on a simple AngularJS application. I&rsquo;d to sync the data between multiple open tabs. As you guess,  the easy way to sync data between multiple tabs is through <strong>local storage</strong>. Ofcourse there are better ways of doing this using <strong>websockets</strong>; but here I am going to explain the client-side way  using local storage and real time updating other tabs.</p>

<!--more-->


<h2>The Code</h2>

<p>I created a demo app in Plunker. Code is given below</p>

<figure class='code'><figcaption><span>index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html</span> <span class="na">ng-app=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script  </span><span class="na">src=</span><span class="s">&quot;http://code.angularjs.org/1.2.13/angular.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;script.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span><span class='line'><span class="nt">&lt;body</span> <span class="na">ng-controller=</span><span class="s">&quot;MaintCtrl as m&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span><span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h2&gt;</span>Current LocalStorage value is = <span class="nt">&lt;em&gt;</span><span class="nt">&lt;/em&gt;&lt;/h2&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;m.value&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;update&quot;</span> <span class="na">ng-click=</span><span class="s">&quot;m.update(m.value)&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And the JavaScript :</p>

<figure class='code'><figcaption><span>script.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span><span class="p">;</span>
</span><span class='line'><span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">&quot;MaintCtrl&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">LS</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">greeting</span> <span class="o">=</span> <span class="s2">&quot;This is a localstorage demo app&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">LS</span><span class="p">.</span><span class="nx">getData</span><span class="p">();</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">latestData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">LS</span><span class="p">.</span><span class="nx">getData</span><span class="p">();</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">LS</span><span class="p">.</span><span class="nx">setData</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s2">&quot;LS&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$window</span><span class="p">,</span> <span class="nx">$rootScope</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">setData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$window</span><span class="p">.</span><span class="nx">localStorage</span> <span class="o">&amp;&amp;</span> <span class="nx">$window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;my-storage&#39;</span><span class="p">,</span> <span class="nx">val</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">getData</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">$window</span><span class="p">.</span><span class="nx">localStorage</span> <span class="o">&amp;&amp;</span> <span class="nx">$window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;my-storage&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>The above shows a simple application that stores data in local storage. This works well when there&rsquo;s only one tab. Our challenge is to ensure the view is same when the application is opened in multiple tabs as well.</p>

<h2>The Technique</h2>

<p>Local storage provides an <code>event</code> called <code>storage</code> on window object. Whenever the localstorage gets updated, all the event listeners attached to <code>storage</code> gets invoked. The first parameter to the handler function is an event object which contains  an <code>event.key</code> pointing to the local storage value changed.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">$window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;storage&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span> <span class="o">===</span> <span class="s1">&#39;my-storage&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$rootScope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>$rootScope.$apply()</strong>, will trigger a digest cycle from root scope, and all the views will be updated with the new model value.</p>

<p>Final JavaScript :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span><span class="p">;</span>
</span><span class='line'><span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">&quot;MaintCtrl&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">LS</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">greeting</span> <span class="o">=</span> <span class="s2">&quot;This is a localstorage demo app&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">LS</span><span class="p">.</span><span class="nx">getData</span><span class="p">();</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">latestData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">LS</span><span class="p">.</span><span class="nx">getData</span><span class="p">();</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">LS</span><span class="p">.</span><span class="nx">setData</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s2">&quot;LS&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$window</span><span class="p">,</span> <span class="nx">$rootScope</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">$window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;storage&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span> <span class="o">===</span> <span class="s1">&#39;my-storage&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$rootScope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">setData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$window</span><span class="p">.</span><span class="nx">localStorage</span> <span class="o">&amp;&amp;</span> <span class="nx">$window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">&#39;my-storage&#39;</span><span class="p">,</span> <span class="nx">val</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">getData</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">$window</span><span class="p">.</span><span class="nx">localStorage</span> <span class="o">&amp;&amp;</span> <span class="nx">$window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;my-storage&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Demo</h2>

<p>Try opening the following link in multiple  tabs. Update the input text from different tabs, and you can see them updating the other tabs as well.</p>

<p><a href="http://embed.plnkr.co/ThpFwX7BRhRhNWPuq5ap/preview" target="_blank">Angular LocalStorage Demo</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA['Resolve' in AngularJS routes, explained as story]]></title>
    <link href="https://www.undefinednull.com/2014/02/17/resolve-in-angularjs-routes-explained-as-story/"/>
    <updated>2014-02-17T11:09:00+04:00</updated>
    <id>https://www.undefinednull.com/2014/02/17/resolve-in-angularjs-routes-explained-as-story</id>
    <content type="html"><![CDATA[<p>I feel AngularJS documentation is baffling sometimes. Reason may be,  I&rsquo;m going through the same <a href="http://www.bennadel.com/blog/2439-My-Experience-With-AngularJS-The-Super-heroic-JavaScript-MVW-Framework.htm">learning curve</a> described by <a href="https://twitter.com/bennadel">@bennadel</a>. Through this article, I&rsquo;m primarily aiming to help those who got stuck at some point of the curve. Don&rsquo;t take it too seriously; I&rsquo;m just sharing some of my experiences with AngularJS.</p>

<!--more-->


<p>Recently, I was learning how routes work in AngularJS, and how they talk to the controller ..etc. Then I observed the controller initialisation can differ based on the route configurations and events like <code>$routeChangeSuccess</code> and <code>$routeChangeError</code> are fired accordingly. Most of these are achieved by a <code>resolve</code> attribute of  the route configuration object. Here, I&rsquo;ll explain it through 3 versions of a story.</p>

<h2>The Story</h2>

<p>On one day, I was planning for a trip to a Switzerland. So I called the tour coordinator who makes the arrangements to this place. He explained the itinerary and hotel details clearly, so I asked him to make the necessary arrangements. After that, it&rsquo;s the tour coordinator&rsquo;s responsibility to book the room and make other required set-ups for my trip. Finally, I did a trip to Switzerland.</p>

<p>Let&rsquo;s convert this to AngularJS context.  Now we have:</p>

<ul>
<li><code>visitplace</code> is our first route.</li>
<li>The place, its surroundings and the hotel room are the contents of our template. Let&rsquo;s add it to <code>placetovisit.html</code>.</li>
<li>Tour coordinator is the one who connects to the place, so we have a controller called <code>TourCoordinatorCtrl</code>.</li>
</ul>


<figure class='code'><figcaption><span>Application (app.js)</span> <a href='https://www.undefinednull.com/downloads/code/angular_resolve/app.js'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="p">]</span> <span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$routeProvider</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$routeProvider</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span> <span class="s2">&quot;/visitplace&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s2">&quot;placetovisit.html&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">controller</span><span class="o">:</span> <span class="s2">&quot;TourCoordinatorCtrl&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span> <span class="s2">&quot;accommodation&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">hotelName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="s2">&quot;Some Hotel&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">roomNo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="s2">&quot;203&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span> <span class="s2">&quot;TourCoordinatorCtrl&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$scope</span><span class="p">,</span> <span class="nx">accommodation</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Shidhin&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">place</span> <span class="o">=</span> <span class="s2">&quot;Switzerland&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">hotel</span> <span class="o">=</span> <span class="nx">accommodation</span><span class="p">.</span><span class="nx">hotelName</span><span class="p">(</span> <span class="p">);</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">roomno</span> <span class="o">=</span> <span class="nx">accommodation</span><span class="p">.</span><span class="nx">roomNo</span><span class="p">(</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>And the templates <code>placetovisit.html</code> and <code>index.html</code> :</p>

<figure class='code'><figcaption><span>Template (placetovisit.html)</span> <a href='https://www.undefinednull.com/downloads/code/angular_resolve/placetovisit.html'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;h1&gt;</span>Trip details<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'><span class="nt">&lt;div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h2&gt;</span>Hi, {{name}}. Welcome to {{place}}<span class="nt">&lt;/h2&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>The accomodation is arranged on <span class="nt">&lt;strong&gt;</span>{{hotel}}<span class="nt">&lt;/strong&gt;</span> and room number is <span class="nt">&lt;strong&gt;</span>{{roomno}}<span class="nt">&lt;/strong&gt;&lt;/div&gt;</span>    
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!doctype html&gt;</span>
</span><span class='line'><span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span> <span class="na">ng-app=</span><span class="s">&quot;app&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;UTF-8&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;title&gt;</span>AngularJS Resolve routes example<span class="nt">&lt;/title&gt;</span>
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/visitplace&quot;</span><span class="nt">&gt;</span>I want to go for a trip<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">ng-view</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;https://ajax.googleapis.com/ajax/libs/AngularJS/1.0.1/angular.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;app.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Everything works as expected when we navigate to the route <code>/visitplace</code>. If you notice, the tour controller has a dependency on <code>accommodation</code> service. But it&rsquo;s just the controller&rsquo;s responsibility to find the hotel and room details. Also, getting the hotel and room details are completely synchronous events. That means, the room will be arranged before I reach the place.</p>

<p>But what if they&rsquo;re asynchronous events? Let&rsquo;s think this way: What If the tour coordinator is not so professional and he forgot to book the hotel and room. Because of this, when I arrive at the place, I&rsquo;d to wait till I get a new room. Similarly, in the code, we can see that the view is rendered, but the <code>getHotel()</code> and <code>getRoom()</code> methods taking extra time to get the room details.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="p">]</span> <span class="p">);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$routeProvider</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$routeProvider</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span> <span class="s2">&quot;/visitplace&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s2">&quot;placetovisit.html&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">controller</span><span class="o">:</span> <span class="s2">&quot;TourCoordinatorCtrl&quot;</span>
</span><span class='line'>  <span class="p">}</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span> <span class="s2">&quot;accommodation&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$timeout</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">hotelName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">scope</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">scope</span><span class="p">.</span><span class="nx">hotel</span> <span class="o">=</span> <span class="s2">&quot;Some hotel&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">},</span><span class="mi">3000</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="s2">&quot;---&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nx">roomNo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">scope</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">scope</span><span class="p">.</span><span class="nx">roomno</span> <span class="o">=</span> <span class="s2">&quot;103&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">},</span><span class="mi">3000</span><span class="p">);</span>
</span><span class='line'>      <span class="k">return</span> <span class="s2">&quot;---&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span> <span class="s2">&quot;TourCoordinatorCtrl&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$scope</span><span class="p">,</span> <span class="nx">accommodation</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Shidhin&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">place</span> <span class="o">=</span> <span class="s2">&quot;Switzerland&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">hotel</span> <span class="o">=</span> <span class="nx">accommodation</span><span class="p">.</span><span class="nx">hotelName</span><span class="p">(</span> <span class="nx">$scope</span> <span class="p">);</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">roomno</span> <span class="o">=</span> <span class="nx">accommodation</span><span class="p">.</span><span class="nx">roomNo</span><span class="p">(</span> <span class="nx">$scope</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is not ideal in sometimes. I&rsquo;ve to render the view and wait for some of the data to be loaded. In my case, it&rsquo;s like I already started the trip and reached the place; but I&rsquo;m waiting in the place to get my accommodation. This is really annoying ! Is there any way to make sure that these dependencies are resolved before I start my journey ? Let&rsquo;s see :</p>

<h2>Version 2 of the Story</h2>

<p>This time, I&rsquo;ve a friend who is a hotel owner in Switzerland. He is a close friend of mine, so I can ask him for a room at any time. If I do this, I don&rsquo;t need to depend upon the accommodation provided by tour coordinator. Finally, all I have to do is, to make sure that I myself resolve the accommodation problem and tell the tour coordinator to arrange the rest.</p>

<p>This is exactly what we need if the route itself needs to resolve some dependencies in our application. For this, Angular provides a configuration on the <code>$routeProvider</code> service, called as <code>resolve</code>.  The resolve property is an optional map object / [ array of existing service names ]. All the keys of the map object can be injected to the controller as a dependency. The key would be a simple string, and its value can be either a function or string. If string is provided, Angular will assume that it&rsquo;s an existing service and inject that particular service to the controller. If the value is a function, it will act as a factory function and the return value will be injected to the controller.</p>

<p>Let&rsquo;s relate our current story to Angular&rsquo;s context by using this resolve object. Look at our modified application code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="p">]</span> <span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$routeProvider</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$routeProvider</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span> <span class="s2">&quot;/visitplace&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s2">&quot;placetovisit.html&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">controller</span><span class="o">:</span> <span class="s2">&quot;TourCoordinatorCtrl&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;myFriendsHotel&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">hotelName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="s2">&quot;My Friend&#39;s hotel&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="p">},</span>
</span><span class='line'>          <span class="nx">roomNo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="s2">&quot;100&quot;</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>        <span class="p">};</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span> <span class="s2">&quot;TourCoordinatorCtrl&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$scope</span><span class="p">,</span> <span class="nx">myFriendsHotel</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Shidhin&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">place</span> <span class="o">=</span> <span class="s2">&quot;Switzerland&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">hotel</span> <span class="o">=</span> <span class="nx">myFriendsHotel</span><span class="p">.</span><span class="nx">hotelName</span><span class="p">(</span> <span class="p">);</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">roomno</span> <span class="o">=</span> <span class="nx">myFriendsHotel</span><span class="p">.</span><span class="nx">roomNo</span><span class="p">(</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>Note: When controller is defined in the route, never initialise it again through ng-controller. That might throw an error when used with resolve configuration.</em></p>

<p>By doing this way, we can make sure that the controller initialisation is delayed till the hotel is ready. The view will be rendered only when the controller is initialised and a <code>$routeChangeSuccess</code> event will be fired. Also notice that, finding a hotel is a synchronous action; it means, since my friend is a hotel owner, I got a room immediately. In real world applications, most of the times we&rsquo;re going to deal with asynchronous actions. Let&rsquo;s move to the 3rd version of the story to sort that out.</p>

<h2>Final version of the Story</h2>

<p>Last time we saw that I&rsquo;d a friend who was a hotel owner. But in this version of the story, there is no hotel owner. This time, I&rsquo;ve another friend in Switzerland who knows some of the hotel owners and he can find me a better room for cheaper cost. Once I call him and tell that my requirements, he&rsquo;ll take some time to talk to his friends and arrange me a room. The time cannot be predictable; because my friend will ask his friends, and his friends may talk to their friends, and it can go on like this. But when I called him first, he gave me back a promise that he will surely update the status  so that I can set up the rest. So, only when I get an update from him, I am going to call up the tour coordinator and ask him to set up the rest of arrangements.</p>

<p>Let&rsquo;s see the final version of our code  in Angular:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span> <span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="p">]</span> <span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$routeProvider</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$routeProvider</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span> <span class="s2">&quot;/visitplace&quot;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s2">&quot;placetovisit.html&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">controller</span><span class="o">:</span> <span class="s2">&quot;TourCoordinatorCtrl&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>      <span class="s2">&quot;accommodation&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$q</span><span class="p">,</span> <span class="nx">$timeout</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">myFriend</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>
</span><span class='line'>        <span class="nx">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>          <span class="nx">myFriend</span><span class="p">.</span><span class="nx">resolve</span><span class="p">({</span>
</span><span class='line'>            <span class="nx">hotelName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="s2">&quot;My Friend&#39;s friend&#39;s hotel&quot;</span><span class="p">;</span>
</span><span class='line'>            <span class="p">},</span>
</span><span class='line'>            <span class="nx">roomNo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="k">return</span> <span class="s2">&quot;404&quot;</span><span class="p">;</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>          <span class="p">});</span>
</span><span class='line'>        <span class="p">},</span><span class="mi">5000</span><span class="p">);</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">myFriend</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span> <span class="s2">&quot;TourCoordinatorCtrl&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$scope</span><span class="p">,</span> <span class="nx">accommodation</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Shidhin&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">place</span> <span class="o">=</span> <span class="s2">&quot;Switzerland&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">hotel</span> <span class="o">=</span> <span class="nx">accommodation</span><span class="p">.</span><span class="nx">hotelName</span><span class="p">(</span> <span class="p">);</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">roomno</span> <span class="o">=</span> <span class="nx">accommodation</span><span class="p">.</span><span class="nx">roomNo</span><span class="p">(</span> <span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Closely look at each lines and see the differences from the previous one. Did you notice that, this time we&rsquo;ve defined a variable <code>myFriend</code> inside the resolve function and initialised it using <code>$q.defer()</code>. The <strong>$q</strong> is the implementation of <em>Promises</em> API in AngularJS. It&rsquo;s inspired by the &ldquo;<strong>Q</strong>&rdquo; library implementation by kriskowal ( <a href="https://github.com/kriskowal/q">link</a> here ). If you don&rsquo;t know what a <em>Promise</em> is, then you should definitely check it out <a href="http://12devs.co.uk/articles/promises-an-alternative-way-to-approach-asynchronous-javascript/">here</a>.</p>

<p>What happens here is : Our resolve function has created the variable <code>myFriend</code> and it immediately returned the <code>myFriend.promise</code>. This means, we know that something is going to happen later and <code>myFriend</code> will update the result of that action to the promise returned. The action can be either successful or a failure. For a successful action, the promise will be resolved with the hotel room data; and for the failure action, the promise will be rejected with data ( mostly the error message ).</p>

<p>When the factory function returns a promise, the controller initialisation will wait till the promise gets resolved/rejected. Once the promise is resolved, the controller will be initialised and the resolved data will be injected to the controller. In our case, it&rsquo;s the <code>accommodation</code> object; after this, a <code>$routeChangeSuccess</code> event will be fired. There&rsquo;re also chances that, the first promise can return another promise. In that case, our controller initialisation will be delayed till all the promises are resolved. At any point, if any of the promises are rejected, the controller will not be initialised; instead a <code>$routeChangeError</code> event will be fired.</p>

<p>The <code>resolve</code> is very useful if we need to load some data upfront before the controller initialisation and rendering the view. In real world applications, the <code>$timeout</code> can be replaced with a <code>$http</code> object to load data from server. Since it&rsquo;s an asynchronous event, we can always make sure that our view will be rendered with proper data.</p>

<h2>That&rsquo;s the End of All Stories</h2>

<p>I tried to make these as clear I can. Hope everybody understood the concept of resolve in AngularJS routes. Feel free to comment for any improvements/ suggestions. Thanks for reading !</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mastering the scope of the directives in AngularJS]]></title>
    <link href="https://www.undefinednull.com/2014/02/11/mastering-the-scope-of-a-directive-in-angularjs/"/>
    <updated>2014-02-11T08:26:00+04:00</updated>
    <id>https://www.undefinednull.com/2014/02/11/mastering-the-scope-of-a-directive-in-angularjs</id>
    <content type="html"><![CDATA[<p><img src="https://lh5.googleusercontent.com/-XOGfvAHr7HQ/UvoUItkZMZI/AAAAAAAAHJk/IJz5JcUB9dw/w520-h274-no/scopes_in_directives.png" alt="" /></p>

<h2>What are Directives</h2>

<p>Directives are one of the most powerful features of AngularJS. You can imagine them as building blocks ( aka re-usable components ) of any AngularJS application. Mastering all the directives, is totally out of this articles scope. For that, I would really recommend this <a href="http://www.packtpub.com/AngularJS-directives/book">book</a>; it covers everything you need to know about directives. Here, well discuss one aspect of directives called : &ldquo;<strong>Directive scope</strong>&rdquo;.</p>

<!--more-->


<h2>Scopes in AngularJS</h2>

<p>Unlike the other MVC frameworks, AngularJS doesn&rsquo;t have specific classes or functions to create <code>model</code> objects. Instead, AngularJS extended the raw JavaScript objects with custom methods and properties. These objects, also known as <code>scope</code> in AngularJS terms, work as a glue between the view and other parts ( directives, controllers and services ) inside the AngularJS application.</p>

<p>Whenever the AngularJS application is bootstrapped, a <code>rootScope</code> object is created. Each scope created by controllers, directives and services are prototypically inherited from <code>rootScope</code>. AngularJS documentation is one of the best resources to learn how scope inheritance works: see <a href="https://github.com/angular/angular.js/wiki/Understanding-Scopes">Scopes in AngularJS</a>. Understanding how scope inheritance works will be useful in following sections.</p>

<h2>Scope inside a directive</h2>

<p><em><strong>Note</strong>: This section assumes you&rsquo;ve prior knowledge of creating  a simple directive</em></p>

<p>All directives have a scope associated with them. They use this scope for accessing data/methods inside the template and link function. By default, unless explicitly set, directives don&rsquo;t create their own scope. Therefore, directives use their parent scope ( usually a controller ) as their own.</p>

<p>However, AngularJS allows us to change the default scope of directives by passing a configuration object known as <strong>directive definition object</strong>. A directive definition object  let&rsquo;s call it as  <em>DDO</em>  is a simple JavaScript object used for configuring the directive&rsquo;s behaviour,template..etc. Check out <a href="http://docs.AngularJS.org/guide/directive">AngularJS docs</a> about <em>DDO</em>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,[]);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">&quot;myDirective&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">restrict</span><span class="o">:</span> <span class="s2">&quot;EA&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">scope</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span><span class="nx">elem</span><span class="p">,</span><span class="nx">attr</span><span class="p">){</span>
</span><span class='line'>          <span class="c1">// code goes here ...</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>    
</span><span class='line'> <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the above example, we created a directive by returning a <em>DDO</em> from the function. There are a lot of properties of the <em>DDO</em> to learn, but here we&rsquo;re just going to discuss the <code>scope</code> property, because, the values of scope property decides how the actual scope is created and used inside a directive. These values can be either <strong>&ldquo;false&rdquo;</strong>, <strong>&ldquo;true&rdquo;</strong> or <strong>&ldquo;{}&rdquo;</strong>. In the following sections, we&rsquo;ll see how each of these affects directive&rsquo;s behaviour.</p>

<h2>Different types of directive scopes</h2>

<p><u><strong>Scope :</u>  False</strong>  (  Directive uses its parent scope )</p>

<p>Let&rsquo;s try another example. We&rsquo;ll create simple directive to render a div and a textbox that can show and change a name. The <code>name</code> property gets the initial value from the <code>Ctrl1</code> scope ( parent scope of the directive ).</p>

<iframe style="width: 100%; height: 300px" frameborder="0" seamless="seamless" src="https://jsfiddle.net/shidhincr/eyNYw/4/embedded/js,resources,html,css,result/light/"></iframe>


<p>If we change the name inside the textbox, notice the header name also gets changed. Since there&rsquo;s no scope provided in the <em>DDO</em>, the directive uses its parent scope. Therefore, any changes we make inside the directive are actually reflected in the parent scope. Similarly, parent <code>Ctrl1</code> scope has  a method to reverse the name and this gets triggered when we click on the header. Now as we expect, clicking on the header should reverse the name inside the directive too.</p>

<p><u> <strong>Scope :</u> True</strong>  ( Directive gets a new scope )</p>

<p>Now it&rsquo;s time for the directive to get its own scope. This is achieved by setting a &ldquo;true&rdquo;  value to the scope property of the <em>DDO</em>. When directive scope is set to &ldquo;true&rdquo;, AngularJS will create a new scope object and assign to the directive. This newly created scope object is prototypically inherited from its parent scope ( the controller scope where it&rsquo;s been used ).</p>

<p>Confused ? Let&rsquo;s see the exact differences between setting <code>scope: true</code> and <code>scope: false</code> :</p>

<ul>
<li>When scope is set to &ldquo;<strong>true</strong>&rdquo;, AngularJS will create a new scope by inheriting parent scope ( usually controller scope, otherwise the application&rsquo;s rootScope ). Any changes made to this new scope will not reflect back to the parent scope. However, since the new scope is inherited from the parent scope, any changes made in the <code>Ctrl1</code> ( the parent scope ) will be reflected in the directive scope.</li>
<li>When scope is set to &ldquo;<strong>false</strong>&rdquo;, the controller <code>Ctrl1</code> and directive are using the same scope object. This means any changes to the controller or directive will be in sync.</li>
</ul>


<p>Let&rsquo;s look at the following fiddle to make it more clear :</p>

<iframe style="width: 100%; height: 300px" frameborder="0" seamless="seamless" src="https://jsfiddle.net/shidhincr/q3kex/3/embedded/js,resources,html,css,result/light/"></iframe>


<p>First, try clicking on the header. We can see that the name gets reversed inside controller <code>Ctrl1</code> and the directive. Next, change the name inside the textbox; the parent <code>scope</code> is not at all affected.</p>

<p><em><strong>Note:</strong> Clicking on header again, makes no changes to the directive <code>scope</code>. I guess this is because the <code>ng-model</code> will create a new name property only when the textbox value is changed. Before this, name property inside directive was referring to it&rsquo;s parent <code>scope</code> ( through prototype chain )</em></p>

<p><u> <strong>Scope :</u>  { }</strong> ( Directive gets a new isolated scope )</p>

<p>This is the most interesting section. Till now, we saw two situations for directive scope creation. In the third type, we are going to set scope property in <em>DDO</em>  to an <strong>Object literal</strong>. When an object literal is passed to the scope property, things are bit different. This time, there will be a new scope created for the directive, but it <strong>will not be inherited from the parent scope</strong>. This new scope also known as <strong>Isolated scope</strong> because it is completely detached from its parent scope.</p>

<p>Let&rsquo;s re-write our original example like this :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,[]);</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">&quot;myDirective&quot;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">restrict</span><span class="o">:</span> <span class="s2">&quot;EA&quot;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">scope</span><span class="o">:</span> <span class="p">{},</span>
</span><span class='line'>      <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span><span class="nx">elem</span><span class="p">,</span><span class="nx">attr</span><span class="p">){</span>
</span><span class='line'>          <span class="c1">// code goes here ...</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>    
</span><span class='line'> <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>So far, this is the recommended way of setting the <code>scope</code> on <em>DDO</em> while creating custom directives. Why? Because:</p>

<ul>
<li>It&rsquo;ll make sure that our directive is generic, and placed anywhere inside the application. Parent scope is not going to interfere with the directive scope.</li>
</ul>


<p>Though it&rsquo;s called as an <em>Isolated scope</em>, AngularJS allows to communicate with the parent scope using some special symbols knows as <strong><code>prefixes</code></strong>. Because of course there are still situations where the directive needs to be able to exchange data with parent scope. The next section is  dedicated to <em>Isolated scope</em> and its properties.</p>

<h2>Isolated Scope Explained</h2>

<p>See the below fiddle:</p>

<iframe style="width: 100%; height: 300px" frameborder="0" seamless="seamless" src="https://jsfiddle.net/shidhincr/q3kex/4/embedded/js,resources,html,css,result/light/"></iframe>


<p>We just created a directive with an isolated scope. Notice, even the parent scope has a name &ldquo;Harry&rdquo;, the textbox inside directive is blank. This is because of the new <em>Isolated scope</em> doesn&rsquo;t know anything about its parent scope.</p>

<p><strong>But, can we pass some values from the parent <code>scope</code> to the directives now?</strong></p>

<p>Yes ! Not only that, we might need to handle situations like invoking callbacks in parent scope, two-way binding between parent &amp; directives scope ..etc</p>

<p>To access any parent scope data, we need to pass that to our directive explicitly. This is achieved by setting properties on the scope object in the <em>DDO</em>. Imagine these properties as interfaces of the directive to communicate with outside scope. Another important thing is that, these properties also <strong>MUST</strong> be set as the attributes of the directive html element. If this confusing, let me explain with an example:</p>

<p>Just go through the below fiddle, and look at the &ldquo;HTML&rdquo;, &ldquo;JavaScript&rdquo; and  &ldquo;Results&rdquo; tabs.</p>

<iframe style="width: 100%; height: 300px" frameborder="0" seamless="seamless" src="https://jsfiddle.net/shidhincr/pJLT8/10/embedded/js,resources,html,css,result/light/"></iframe>


<p>Let&rsquo;s try to understand how this works. Take the JavaScript code first:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'> <span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s2">&quot;app&quot;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'> <span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s2">&quot;MainCtrl&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">$scope</span> <span class="p">){</span>
</span><span class='line'>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Harry&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s2">&quot;#333333&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">reverseName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>     <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">randomColor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="nx">$scope</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span><span class="o">+</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">16777215</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s2">&quot;myDirective&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">restrict</span><span class="o">:</span> <span class="s2">&quot;EA&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">scope</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;@&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">color</span><span class="o">:</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">reverse</span><span class="o">:</span> <span class="s2">&quot;&amp;&quot;</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>        <span class="nx">template</span><span class="o">:</span> <span class="p">[</span>
</span><span class='line'>            <span class="s2">&quot;&lt;div class=&#39;line&#39;&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;Name : &lt;strong&gt;&lt;/strong&gt;;  Change name:&lt;input type=&#39;text&#39; ng-model=&#39;name&#39; /&gt;&lt;br/&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;&lt;/div&gt;&lt;div class=&#39;line&#39;&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;Color : &lt;strong style=&#39;color:&#39;&gt;&lt;/strong&gt;;  Change color:&lt;input type=&#39;text&#39; ng-model=&#39;color&#39; /&gt;&lt;br/&gt;&lt;/div&gt;&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s2">&quot;&lt;br/&gt;&lt;input type=&#39;button&#39; ng-click=&#39;reverse()&#39; value=&#39;Reverse Name&#39;/&gt;&quot;</span>
</span><span class='line'>        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>It&rsquo;s clear that, the controller <code>MainCtrl</code> creates the parent scope. This parent scope has following properties and methods.</p>

<pre><code>name = "Harry"
color =  "#333333"
reverseName = function for reversing the name
randomColor = function for generating random color code
</code></pre>

<p>Similarly, we&rsquo;ve created our directive in <em>Isolated scope</em> by setting an object literal in the <em>DDO</em>. Notice our scope object has some properties now :</p>

<pre><code>scope: {
        name: "@",
        color: "=",
        reverse: "&amp;"
    }
</code></pre>

<p>Look at the directive template and we can see the scope properties are used there. Mostly the directive&rsquo;s templates and link function are going to consume the scope properties. The behaviour of these properties again depends on their values  also known as  <strong><em>Prefixes</em></strong>   provided. These  <strong><em>Prefixes</em></strong> are used to bind the parent scope&rsquo;s methods and properties to the directive scope.</p>

<p>There&rsquo;re 3 types of prefixes AngularJS provides.</p>

<pre><code>1. "@"   (  Text binding / one-way binding )
2. "="   ( Direct model binding / two-way binding )
3. "&amp;"   ( Behaviour binding / Method binding  )
</code></pre>

<p>All these prefixes receives data from the attributes of the directive element. Let&rsquo;s take another look at the HTML code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">my-directive</span>
</span><span class='line'>  <span class="na">class=</span><span class="s">&quot;directive&quot;</span>
</span><span class='line'>  <span class="na">name=</span><span class="s">&quot;{{name}}&quot;</span>
</span><span class='line'>  <span class="na">reverse=</span><span class="s">&quot;reverseName()&quot;</span>
</span><span class='line'>  <span class="na">color=</span><span class="s">&quot;color&quot;</span> <span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>When the directive encounters a prefix in the scope property, it will look for an attribute ( with same property name ) on directive&rsquo;s html element. However, we can provide a different mapping between property and attributes. This is done by giving a separate attribute name after the prefix. Look at below code to make it more clear.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">scope</span> <span class="o">:</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;@&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The above will be mapped to an attribute &ldquo;name&rdquo; in the directive. Now let&rsquo;s see what happens if we change the code like below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">scope</span> <span class="o">:</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;@parentName&quot;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>At this time, the name property will be looking for an attribute &ldquo;parent-name&rdquo; in the html element to get its value. Simply, any string after the  <strong><em>Prefixes</em></strong> should match the attribute name.</p>

<p><em><strong>Note</strong> : If you gets confused in any of the sections below, have a look at the demo code ( HTML,JS ) and come back</em></p>

<ul>
<li><p>The &ldquo;@&rdquo; prefix is a one-way binding between the directive scope and parent scope. It always expects the mapped attribute to be an expression. This is very important; because to make the &ldquo;@&rdquo; prefix work, we need to wrap the attribute value inside <code>{{}}</code>. Since &ldquo;@&rdquo; is creating a one-way binding between the parent and directive scope, any changes made in the parent scope will reflect inside the directive scope, but not the other way. &ldquo;@&rdquo; prefix is really useful when our directive needs to be initialised with some data from parent scope.
  <div class='info'>
  See this in demo by clicking on the &ldquo;Reverse name&rdquo; button in the parent scope. You can see that names inside parent and directive scopes gets reversed. Now let&rsquo;s change the name from the directive&rsquo;s textbox; you can see that the changes will be applicable only to the directive scope.
  </div></p></li>
<li><p>Secondly we have the &ldquo;=&rdquo; prefix. It creates a two-way binding between the parent and directive scope. The most important point about &ldquo;=&rdquo; prefix is, it&rsquo;ll always expect the attribute value to be the <code>model</code> name. That means you cannot provide an expression as the value of attribute mapped to &ldquo;=&rdquo; prefix. This is useful, when any of our directive scope property to be same as the parent scope property.
  <div class='info'>
  In the demo, try clicking on the &ldquo;Randomize color&rdquo; button and observe the changes inside the parent and directive scopes. Similarly, try changing the color textbox and you can see that the parent scope color also gets changed.
  </div></p></li>
<li><p>Finally, we&rsquo;re going to talk about the last prefix. The &ldquo;&amp;&rdquo; prefix is also known as a method binding. This is used to bind any methods from the parent scope to the directive scope. This will be particularly useful when our directive needs to execute any callbacks in the parent scope. Look at the code to see how attribute value for the &ldquo;&amp;&rdquo; prefix to be set.
  <div class='info'>
  Parent scope has a method called &ldquo;reverseName&rdquo;. Through our &ldquo;&amp;&rdquo; prefix, we bound the &ldquo;reverseName&rdquo; method to a scope property named &ldquo;reverse&rdquo;. So whenever the &ldquo;reverse()&rdquo; method is executed inside the directive, it&rsquo;ll basically invoke the &ldquo;reverseName&rdquo; in the parent scope. Click on the &ldquo;Reverse name&rdquo; inside directive to see it in action.
  </div></p></li>
</ul>


<p>I know that AngularJS have made these things a little bit difficult to understand. Especially when it comes to the random naming conventions they&rsquo;d chosen. If youre still confused, I would recommend having a look at the below article:</p>

<p><a href="https://umur.io/angularjs-directives-using-isolated-scope-with-attributes/">AngularJS directives: Isolated scope prefixes </a> . This one explains the <em>Isolated scope</em>  and its properties.</p>

<p>That&rsquo;s it !  This post ended up becoming much longer than I expected, because I wanted to include everything I know. I hope everyone enjoyed reading this. If you find any errors I would really appreciate it if you guys could send me your corrections and comments   the comment box is made just for that. Thanks everyone !!</p>

<p>Special thanks to <em>David Tulip</em> for proof-reading and helping me to fix grammatical errors.</p>

<h4>Please re-tweet if you found this article helpful</h4>

<blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">Everything you need to know about the directive scope in <a href="https://twitter.com/hashtag/AngularJS?src=hash">#AngularJS</a> <a href="http://t.co/qhDDYjo6MD">http://t.co/qhDDYjo6MD</a></p>&mdash; Shidhin (@shidhincr) <a href="https://twitter.com/shidhincr/status/443665764382281728">March 12, 2014</a></blockquote>


<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


<p><u><strong>Further Read :</strong></u></p>

<ol>
<li><a href="https://github.com/angular/angular.js/wiki/Understanding-Scopes">https://github.com/angular/angular.js/wiki/Understanding-Scopes</a></li>
<li><a href="http://amitgharat.wordpress.com/2013/06/08/the-hitchhikers-guide-to-the-directive/">http://amitgharat.wordpress.com/2013/06/08/the-hitchhikers-guide-to-the-directive/</a></li>
<li><a href="http://www.ng-newsletter.com/posts/directives.html">http://www.ng-newsletter.com/posts/directives.html</a></li>
<li><a href="https://egghead.io/lessons/angularjs-understanding-isolate-scope">https://egghead.io/lessons/angularjs-understanding-isolate-scope</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Multiple Left-hand assignment in JavaScript, is really bad. Think before you do it.]]></title>
    <link href="https://www.undefinednull.com/2014/02/03/multiple-left-hand-assignment-in-javascript-is-really-bad-think-once-before-you-do-it/"/>
    <updated>2014-02-03T12:04:00+04:00</updated>
    <id>https://www.undefinednull.com/2014/02/03/multiple-left-hand-assignment-in-javascript-is-really-bad-think-once-before-you-do-it</id>
    <content type="html"><![CDATA[<p><strong>JavaScript allows multiple left-hand assignments</strong></p>

<p>You may ask, what does that mean ? Well, if youre not familiar, in JavaScript you can write the variable assignment expressions like this.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The assignment expressions are always evaluated from right-to-left. So what the above expression actually does is, assign the value <code>10</code> to the variable <code>d</code>, then assign the value of <code>d</code> to <code>c</code> and so on. <!--more-->Finally all the variables will get the value <code>10</code>. This kind of &ldquo;short-hand&rdquo; code will allows you to get rid of the repetitive code; especially when you want to initialise multiple variables with an initial value.</p>

<h3>And whats the catch here ?</h3>

<p>Well, in simple words: <strong>the scope</strong>  . To understand that, lets move the same expression inside a function. Like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">foo</span> <span class="p">(){</span>
</span><span class='line'>   <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you expect all of these variables are having a scope local to the function <code>foo</code>, then youre wrong. What happens here is, the var statement is only applicable to the variable <code>a</code>. And all the other variables are considered with out the <code>var</code> statement, hence will be the global. Try executing foo method, you would see:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">foo</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">a</span> <span class="c1">// undefined</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">b</span> <span class="c1">// will be 10</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">c</span> <span class="c1">// will be 10</span>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">d</span> <span class="c1">// will be 10 </span>
</span></code></pre></td></tr></table></div></figure>


<p>Yes, thats the catch ! So avoid multiple left-hand assignments inside any functions. If youre writing this in global level ( youre assuming all of your variables to go in global scope ), then this is not at all an issue. So better watch out next time before you do this.</p>

<h3>Final note</h3>

<p>If  you&rsquo;re not convinced and still want to do left-hand assignments, then the right way of doing it is like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Declaring all the variables in the first line is <strong>one of the good coding style</strong>. This will make sure that youre not the victim of scope issues and hoisting problems.  So always read about the JavaScript best practices, and adhere to good coding style.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Starting VerbalRegex.com open source project]]></title>
    <link href="https://www.undefinednull.com/2014/01/29/starting-verbalregex-dot-com-open-source-project/"/>
    <updated>2014-01-29T01:09:00+04:00</updated>
    <id>https://www.undefinednull.com/2014/01/29/starting-verbalregex-dot-com-open-source-project</id>
    <content type="html"><![CDATA[<p>On the other day, while exploring the Github repositories, this one grabbed my attention.</p>

<p><a href="https://github.com/VerbalExpressions/JSVerbalExpressions">https://github.com/VerbalExpressions/JSVerbalExpressions</a></p>

<p>I like this idea so much. In fact, I also were trying to build something similar. Writing regular expressions were always a tedious task for me. I&rsquo;ve tried learning it enormous times, but still when I want to construct one, I&rsquo;ve to google around.</p>

<!-- more -->


<p>So that&rsquo;s why this project got my interest. The idea is pretty cool; Instead of remembering all those complex patterns of regular expressions, I can just use the simple API provided by the library. That&rsquo;s really cool!</p>

<p>But again, There&rsquo;s a limitation: It&rsquo;s just a JavaScript library that can be used inside the code only. What I really wanted is an user interface where I can use some simple steps  mostly like the API methods of the above library  to build my final regular expression.</p>

<p>That&rsquo;s when I started working on a new website called <a href="VerbalRegex.com">http://wwww.verbalregex.com</a>. The website is not live yet. I&rsquo;ve created the repository in Github and started working on the UI of it.</p>

<ul>
<li><p>The tools used so far are:</p>

<pre><code>- Yeo man for scaffolding
- AngularJS 
- Angular UI and Twitter Bootstrap
- Grunt
- Karma ( unit testing )
</code></pre></li>
</ul>


<p>The project is in the very early stage. I&rsquo;ve invited some of my friends for the contribution. Once all the designs and requirements ready, the project will find it&rsquo;s momentum.</p>

<p>Here is a screenshot of what I&rsquo;ve built so far.</p>

<p><img src="https://lh5.googleusercontent.com/-oNcO5nhOIwQ/UugGMrn13mI/AAAAAAAAG_c/DSUWGrNxGAw/w958-h495-no/Screen+Shot+2014-01-29+at+1.03.33+am.png" alt="verbalregex.com" /></p>

<p>I&rsquo;m trying to work more on this project on my spare times. Hope everything will go well !!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress Blog Tweaks: Adding Author Info Section Below Each Posts]]></title>
    <link href="https://www.undefinednull.com/2013/10/15/octopress-blog-tweaks-adding-author-information-section-below-each-posts/"/>
    <updated>2013-10-15T10:15:00+04:00</updated>
    <id>https://www.undefinednull.com/2013/10/15/octopress-blog-tweaks-adding-author-information-section-below-each-posts</id>
    <content type="html"><![CDATA[<p>A good blogging platform is one which allows easy customization. I&rsquo;ve been using Octopress for more than 2 weeks and happy to tell that it&rsquo;s one of those allows customization with out any pain. I want to share a tweak I added to my blog recently : It&rsquo;s an author information section below every post. Let&rsquo;s see how I built it and added to my blog.</p>

<!--more-->


<h2>What we&rsquo;re going to achieve</h2>

<p><img src="//lh3.googleusercontent.com/-hT72wlBvU-Y/UlzR3V8twdI/AAAAAAAACP0/2aoFaMfzjA0/s916/Screen%2520Shot%25202013-10-15%2520at%252010.57.29%2520AM.png"></p>

<p>See the above screenshot ? It&rsquo;s a simple section containing the author image, description and a twitter follow button. I&rsquo;ll explain how to build this and add to every post.</p>

<h2>Let&rsquo;s Begin</h2>

<p>Octopress is basically based on Jekyll and liquid templating. Everything in the main view is broken-down to subviews called partials. These partials are nothing but re-usable html files which will be included in other views. So for creating our author information section, we also need to create a partial and include it in the post view.</p>

<p>Before start creating our author information view, let&rsquo;s analyse the files and folders we&rsquo;re interested in.</p>

<p>Open the octopress blog folder and get familiar with these:</p>

<ol>
<li> source/_layouts/post.html</li>
<li> source/_includes/custom/</li>
<li> sass/custom/_styles.scss</li>
<li> source/images/</li>
</ol>


<p><strong>source/_layouts/post.html</strong></p>

<p>This is the partial responsible for rendering the blog post entry. We need to make modifications in this view to show any changes in the post.</p>

<p><strong>source/_includes/custom/</strong></p>

<p>This folder contains custom partials  usually from the 3rd party plugins and all. We&rsquo;re going to add our view html file here only.</p>

<p><strong>sass/custom/_styles.scss</strong></p>

<p>Octopress uses SCSS ( a CSS preprocessor ) for all of it&rsquo;s styling and theming. This particular file will be processed at the end, hence any custom styles required for the blog are added in this file only.</p>

<p><strong>source/images/</strong></p>

<p>All the image assets goes to this folder.</p>

<p>Time to create the view for the author information section. I&rsquo;ve created a new file called <strong>&ldquo;aboutauthor.html&rdquo;</strong> (code is given below ) and placed in the <strong><code>source/_includes/custom/</code></strong> folder. It&rsquo;s just the sample and you can create your own template.</p>

<figure class='code'><figcaption><span>aboutauthor.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;about&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>     <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;about-image&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;/images/author.jpg&quot;</span> <span class="na">alt=</span><span class="s">&quot;author name&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>     <span class="nt">&lt;/span&gt;</span>
</span><span class='line'>     <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;about-desc&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;span&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
</span><span class='line'>          tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
</span><span class='line'>          quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
</span><span class='line'>          consequat.<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>          <span class="nt">&lt;br/&gt;</span>
</span><span class='line'>          <span class="nt">&lt;hr/&gt;</span>
</span><span class='line'>          <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://twitter.com/yourtwittername&quot;</span> <span class="na">class=</span><span class="s">&quot;twitter-follow-button&quot;</span> <span class="na">data-show-count=</span><span class="s">&quot;false&quot;</span> <span class="na">data-size=</span><span class="s">&quot;large&quot;</span><span class="nt">&gt;</span>Follow @yourtwittername<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>     <span class="nt">&lt;/span&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The above code is self explanatory. One more extra effort is to add the author image  which should go to the <strong><code>source/images/</code></strong> folder. I&rsquo;ve used a jpeg image of dimension <code>175x120</code>.</p>

<p>To apply some CSS for our view, open the <strong>&ldquo;_styles.scss&rdquo;</strong> and add the following rules.</p>

<figure class='code'><figcaption><span>_styles.scss</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nc">.about</span> <span class="p">{</span>
</span><span class='line'>     <span class="na">font-style</span><span class="o">:</span> <span class="no">italic</span><span class="p">;</span>
</span><span class='line'>     <span class="na">background-color</span><span class="o">:</span> <span class="mh">#FFF</span><span class="p">;</span>
</span><span class='line'>     <span class="na">padding</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span class='line'>     <span class="na">border-radius</span><span class="o">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
</span><span class='line'>     <span class="na">border</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="mh">#CCC</span><span class="p">;</span>
</span><span class='line'>     <span class="na">box-shadow</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="kt">px</span> <span class="mh">#CCC</span><span class="p">;</span>
</span><span class='line'>     <span class="na">overflow</span><span class="o">:</span> <span class="no">hidden</span><span class="p">;</span>
</span><span class='line'>     <span class="na">clear</span><span class="o">:</span> <span class="no">both</span><span class="p">;</span>
</span><span class='line'>     <span class="nc">.about-image</span> <span class="p">{</span>
</span><span class='line'>          <span class="na">width</span><span class="o">:</span> <span class="mi">150</span><span class="kt">px</span><span class="p">;</span>
</span><span class='line'>          <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="p">;</span>
</span><span class='line'>          <span class="na">display</span><span class="o">:</span> <span class="no">inline</span><span class="o">-</span><span class="no">block</span><span class="p">;</span>
</span><span class='line'>          <span class="na">margin-right</span><span class="o">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
</span><span class='line'>     <span class="p">}</span>
</span><span class='line'>     <span class="nc">.about-desc</span> <span class="o">&gt;</span> <span class="nt">hr</span> <span class="p">{</span>
</span><span class='line'>          <span class="na">border</span><span class="o">:</span> <span class="no">none</span><span class="p">;</span>
</span><span class='line'>          <span class="na">border-top</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">dotted</span> <span class="mh">#CCC</span><span class="p">;</span>
</span><span class='line'>          <span class="na">padding-top</span><span class="o">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
</span><span class='line'>     <span class="p">}</span>
</span><span class='line'>     <span class="nn">#twitter-widget-1</span> <span class="p">{</span>
</span><span class='line'>          <span class="na">float</span><span class="o">:</span> <span class="no">right</span>
</span><span class='line'>     <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Update Post Template</h2>

<p>Now we&rsquo;ve the CSS and Markup ready for our author information view. We can add the <strong>&ldquo;aboutauthor.html&rdquo;</strong> view to any other view by using <code>include</code> keyword. Let&rsquo;s open the <strong><code>source/_layouts/post.html</code></strong> partial and include our newly created view below the post content.</p>

<p>Here is the diff file for <strong><em>updated post.html</em></strong> :</p>

<div><script src='https://gist.github.com/6989638.js'></script>
<noscript><pre><code> &lt;div&gt;
 &lt;article class=&quot;hentry&quot; role=&quot;article&quot;&gt;
   {% include article.html %}
   &lt;footer&gt;
     &lt;p class=&quot;meta&quot;&gt;
       {% include post/author.html %}
       {% include post/date.html %}{% if updated %}{{ updated }}{% else %}{{ time }}{% endif %}
       {% include post/categories.html %}
     &lt;/p&gt;
     {% unless page.sharing == false %}
       {% include post/sharing.html %}
     {% endunless %}
+    &lt;p class=&quot;meta&quot;&gt;
+    {% include custom/aboutauthor.html %}
+    &lt;/p&gt;
     &lt;p class=&quot;meta&quot;&gt;
       {% if page.previous.url %}
         &lt;a class=&quot;basic-alignment left&quot; href=&quot;{{page.previous.url}}&quot; title=&quot;Previous Post: {{page.previous.title}}&quot;&gt;&amp;laquo; {{page.previous.title}}&lt;/a&gt;
       {% endif %}
       {% if page.next.url %}
         &lt;a class=&quot;basic-alignment right&quot; href=&quot;{{page.next.url}}&quot; title=&quot;Next Post: {{page.next.title}}&quot;&gt;{{page.next.title}} &amp;raquo;&lt;/a&gt;
       {% endif %}
     &lt;/p&gt;
   &lt;/footer&gt;
 &lt;/article&gt;
 {% if site.disqus_short_name and page.comments == true %}
   &lt;section&gt;
     &lt;h1&gt;Comments&lt;/h1&gt;
     &lt;div id=&quot;disqus_thread&quot; aria-live=&quot;polite&quot;&gt;{% include post/disqus_thread.html %}&lt;/div&gt;
   &lt;/section&gt;
 {% endif %}
 &lt;/div&gt;
 {% unless page.sidebar == false %}
 &lt;aside class=&quot;sidebar&quot;&gt;
   {% if site.post_asides.size %}
     {% include_array post_asides %}
   {% else %}
     {% include_array default_asides %}
   {% endif %}
 &lt;/aside&gt;
 {% endunless %}</code></pre></noscript></div>


<h2>Preview it</h2>

<p>Use below rake commands to preview the blog.</p>

<pre><code>rake generate; rake preview
</code></pre>

<p>That&rsquo;s it !! The author information section should be appearing below each blog post by now. Replace the &ldquo;Lorum ipsum&rdquo; with the words best describes you.</p>

<p>Thanks for reading, feedbacks are welcome. Enjoy blogging !!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ Some Gotchas In Arithmetic Expression Evaluation : JavaScript]]></title>
    <link href="https://www.undefinednull.com/2013/09/26/some-gotchas-in-arithmetic-expression-evaluation-javascript/"/>
    <updated>2013-09-26T16:15:00+04:00</updated>
    <id>https://www.undefinednull.com/2013/09/26/some-gotchas-in-arithmetic-expression-evaluation-javascript</id>
    <content type="html"><![CDATA[<h2>Solve a small problem in JavaScript</h2>

<p>This post is just for recollecting some of the basics of JavaScript. Let&rsquo;s start with a small JavaScript code. Here is the code  Solve it with out using the console.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</span><span class='line'><span class="nx">a</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="p">)</span> <span class="o">-</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Take your own time to come up with an answer before moving to the next section.</p>

<!-- more -->


<h2>Analyzing the problem</h2>

<p>If your answer is <code>a = 3 and b = 5</code>, this post is written for you. Open your favorite browser and fire up the console. Put the above code in the console and see the values of <code>a</code> and <code>b</code> now.</p>

<p>Stunned ?  Yeah, The values of <code>a</code> and <code>b</code> are <code>a = 0  and b = 5</code> now. Honestly I also got it wrong initially. I did ask this question to some of my friends ( who are in JavaScript circle ),  and all of them gave me wrong answer.</p>

<h2>Some flashback</h2>

<p>So, here is how I arrived this to particular question. Last week I was trying to write the code for an interview problem in JavaScript  and it&rsquo;s a very common one  How to swap values of 2 variables with out using a 3rd variable.</p>

<p>Let the variables be <code>a = 5</code> and <code>b = 3</code>. Swap the values of <code>a</code> and <code>b</code> with out using any 3rd variable .</p>

<p>Solution is simple . Just do the following arithmetic operations</p>

<pre><code>a = a + b
b = a - b
a = a - b
</code></pre>

<p>This will do the job.</p>

<p>What I was trying is to write the entire expression in one single line. I wrote it like below.</p>

<p><strong>Code 1 :</strong></p>

<figure class='code'><figcaption><span>CODE 1</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</span><span class='line'><span class="nx">a</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">-</span> <span class="p">(</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="p">)</span> <span class="o">-</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Cool .. I thought it&rsquo;s done.</p>

<p>But I got surpriced when I tried it in the console. I was expecting final values should be <code>a = 3 and b = 5</code> but the output was different. I got <code>a = 0 and b =5</code>.</p>

<p>WTF ? Let me change the code a bit. I modified the code like this</p>

<p><strong>Code 2 :</strong></p>

<figure class='code'><figcaption><span>CODE 2</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</span><span class='line'><span class="nx">a</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="p">)</span> <span class="o">-</span> <span class="nx">b</span> <span class="p">)</span> <span class="o">-</span> <span class="nx">a</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>
This time I got the correct results <code>a = -3 and b = 5</code>. So why the hell it didn&rsquo;t work for the first expression ?</p>

<h2>The answer is :</h2>

<p>We&rsquo;re evaluating it wrongly. I mean we are not doing the way JavaScript engine does. I went to the EcmaScript specification and read the section for &ldquo;Arithmetic Expression&rdquo;.</p>

<blockquote><p>Expressions : Any valid unit code that resolves to some value.</p></blockquote>

<p><strong>Two things to note :</strong></p>

<ul>
<li>Assignment operators are right to left associative. That means for the expression <code>a = b = 5</code>, the value <code>5</code> will be assigned to variable <code>b</code> and then assigned to variable <code>b</code>.</li>
<li>Arithmetic and multiplicative operators are left to right associative. For the expression <code>c = a + b</code>, the value of <code>a</code> will be computed first, then goes to <code>b</code> and computes it&rsquo;s value.</li>
</ul>


<p>For our problem, if I draw the parse tree roughly, it will be like below.</p>

<pre><code>   =
 /   \
a     -
    /   \
   a     =
       /   \
      b     -
          /   \
         =      b
       /   \
      a     +
          /   \
         a     b
</code></pre>

<p>Ideally parse tree doesn&rsquo;t contain the <code>=</code> operator. I made it like this to understand how the parser start evaluating the expression.</p>

<p>In the above parse tree, all the <code>=</code> operators are evaluated from right-to left ( that means the right node will be evaluated first and the value will be assigned to the left node ). On the other hand, arithmetic/multiplicative expressions are evaluated from left to right ( that means the values will be assigned from left and the arithmetic/multiplicative operation will be carried out ).</p>

<p>We can identify sub-expressions in our code. Basically, we can extract the expressions containing <code>=</code> to sub-expressions. Hence the above parse tree can be re-drawn like below.</p>

<pre><code>   =
 /   \
a     -
    /   \
   a     X
</code></pre>

<p>Where <code>X</code> is the <strong>Sub-Expression 1</strong> given below :</p>

<pre><code>         =
       /   \
      b     -
          /   \
         Y     b
</code></pre>

<p>Where <code>Y</code> is the <strong>Sub-Expression 2</strong> given below :</p>

<pre><code>         =
       /   \
      a     +
          /   \
         a     b
</code></pre>

<p>Let&rsquo;s see how JavaScript parser evaluate the value of <code>a</code> finally.</p>

<h3>Steps :</h3>

<ul>
<li><p>Parser takes the main expression <code>a = a - X</code> and evaluated from left to right. At first, parser finds the variable<code>a</code> and finds it&rsquo;s value. Now the parser moves to the next variable <code>X</code> and try to calculate it&rsquo;s value. Since <code>X</code> is an expression, it need to be evaluated to form a primitive value.</p>

<p>  <em>Note: To get the value, parser internally calls the <a href="http://es5.github.io/#x8.7.1">GetValue</a> of each operands</em></p>

<p>  So, for the parser, the expression becomes  like this :</p></li>
</ul>


<figure class='code'><figcaption><span>Value Of &#8220;a&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">a</span> <span class="o">=</span> <span class="nx">GetValue</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="o">-</span> <span class="nx">GetValue</span><span class="p">(</span> <span class="nx">Evaluate</span><span class="p">(</span> <span class="nx">X</span> <span class="p">)</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Which is :</p>

<figure class='code'><figcaption><span>Value of &#8220;a&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="nx">GetValue</span><span class="p">(</span> <span class="nx">Evaluate</span><span class="p">(</span> <span class="nx">X</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<ul>
<li><p>Now it need to evaluate the expression <code>X</code> where <code>b = Y - b</code>. Here the first operand <code>Y</code> itself a sub-expression, so parser has to evaluate it first before calculating the value of the second operand <code>b</code>.</p></li>
<li><p>Let&rsquo;s evaluate the expression <code>Y</code> which is <code>a = a + b</code>. This is straightforward and contains no sub expression , hence evaluated like this.</p></li>
</ul>


<figure class='code'><figcaption><span>New value of &#8220;a&#8221; is</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">a</span> <span class="o">=</span> <span class="nx">GetValue</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">GetValue</span><span class="p">(</span> <span class="nx">b</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This equals to :</p>

<figure class='code'><figcaption><span>&#8220;a&#8221; became 8   </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">3</span>
</span></code></pre></td></tr></table></div></figure>


<p>  <br/>
Finally the value of expression <code>Y</code> becomes <code>8</code>.</p>

<ul>
<li>Coming back to step 2 where expression <code>X</code> needs to be completed. expression <code>X</code> is</li>
</ul>


<figure class='code'><figcaption><span>Computing the value of &#8220;b&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">b</span> <span class="o">=</span> <span class="nx">GetValue</span><span class="p">(</span> <span class="nx">Y</span> <span class="p">)</span> <span class="o">-</span> <span class="nx">GetValue</span><span class="p">(</span> <span class="nx">b</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Becomes like this :</p>

<figure class='code'><figcaption><span>Value of &#8220;b&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">b</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">-</span> <span class="nx">GetValue</span><span class="p">(</span> <span class="nx">b</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Which is :</p>

<figure class='code'><figcaption><span>Final value of &#8220;b&#8221;</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">b</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">-</span> <span class="mi">3</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finally the value of <code>b</code> and expression <code>X</code> becomes <code>5</code>.</p>

<ul>
<li>So now all the sub expressions are evaluated , the main expression can be completed now.</li>
</ul>


<p>The main expression was :</p>

<figure class='code'><figcaption><span>Evaluating the main expression</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">-</span> <span class="nx">GetValue</span><span class="p">(</span> <span class="nx">X</span> <span class="p">)</span> <span class="p">;</span> <span class="c1">// value of X = 5 now</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>That means final value of <code>a = 5 - 5</code>  which is <code>0</code>.</p>

<ul>
<li>Finally the values of <code>a</code> and <code>b</code> will become <code>a = 0 and b = 5</code></li>
</ul>


<p>Now we&rsquo;re in the same direction with JS engine. We can apply what we learned for the <strong>Code 2</strong> also.</p>

<h2>Conclusion</h2>

<p>I didn&rsquo;t want to write this much long. All I wanted to recollect some of those basic stuff. Thanks for reading !!</p>

<p> References :</p>

<ol>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators</a></li>
<li><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-8.7">http://www.ecma-international.org/ecma-262/5.1/#sec-8.7</a></li>
<li><a href="http://es5.github.io/#x8.7.1">http://es5.github.io/#x8.7.1</a></li>
<li><a href="http://stackoverflow.com/questions/19045411/can-somebody-explain-how-javascript-arithmetic-expressions-work">http://stackoverflow.com/questions/19045411/can-somebody-explain-how-javascript-arithmetic-expressions-work</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Starting my new blog: Finally Octopress]]></title>
    <link href="https://www.undefinednull.com/2013/09/25/starting-my-new-blog-finally-octopress/"/>
    <updated>2013-09-25T07:36:00+04:00</updated>
    <id>https://www.undefinednull.com/2013/09/25/starting-my-new-blog-finally-octopress</id>
    <content type="html"><![CDATA[<h2>Finally Octopress !!</h2>

<p>I wanted to start writing blog ever since I started coding. I never had a success setting it up because of time constraints and many other reasons. During this time, I&rsquo;ve evaluated a number of blogging platforms and eventually I thought of using wordpress as my blogging platform when I start my blog.</p>

<p>Now finally I&rsquo;m having some time. I decided to spend some time everyday dedicating to my blog. So first thing I need to do is setting up a wordpress blog with default template.</p>

<p>I started browsing to find a good theme for the wordpress blog before setting up anything. While browsing, I opened <strong><a href="http://www.paulirish.com">paulirish.com</a></strong> and saw that he&rsquo;d recently switched his blog to some new blogging software called Octopress.</p>

<!-- more -->


<p>I also read about Octopress from my daily reading list, but didn&rsquo;t give much attention to it. But I found Paul&rsquo;s blog very neat  The default theme of Octopress is awesome  and it&rsquo;s responsive too. I started checking out all Octopress blogs, and how to configure it. Finally I decided to use Octopress for my blog.</p>

<h3>Why Octopress and not Wordpress ?</h3>

<p>Octopress is simple and comes up with a neat, elegant ( and responsive ) theme. Obviously Wordpress is really the most powerful and most widely used blogging software, and it has lot of extentions and plugins available. But for me , for writing some tech tips , don&rsquo;t need all those stuff. Using Octopress , I can use familiar git commands , write everything in markdown and finally can deploy to github pages.</p>

<p>Another thing I liked is, all my blog content will be residing in my system itself in the form of markdown files. I can generate my static blog site anytime I need and deploy to number of hosting services. The advantage of a static website over a dynamic platform like Wordpress is : It&rsquo;s loading time will be faster. Because everytime I access a blog post in Wordpress, it need to fetch from the database. But Octopress blog will have only static html pages  so it will be loaded faster.</p>

<h3>How to set up an Octopress blog ?</h3>

<p>This had been covered in many articles. Just google around , you can find a lot. I followed these simple instructions given in the Octopress website. Link is given below</p>

<p><a href="http://octopress.org/docs/deploying/github/">http://octopress.org/docs/deploying/github/</a></p>

<p>There&rsquo;re couple of good themes built for Octopress ( It&rsquo;s all 3rd party ). Since I like the default Octopress theme, I didn&rsquo;t try any 3rd party themes. But It&rsquo;s worth checking out those.</p>

<p>PS: I&rsquo;ll be writing mainly about Javascript , HTML ,CSS and client side framework and design patterns here. Expect more posts from me soon in this space.</p>
]]></content>
  </entry>
  
</feed>
