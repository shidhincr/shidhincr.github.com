<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Some Gotchas In Arithmetic Expression Evaluation : JavaScript</title><link rel="apple-touch-icon" sizes="57x57" href="/img/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/img/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#A7457F"><meta name="msapplication-TileImage" content="/img/ms-icon-144x144.png"><meta name="theme-color" content="#A7457F"><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous"><link href="https://www.google-analytics.com" rel="preconnect" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com/"><link rel="dns-prefetch" href="https://www.google.co.in"><link rel="dns-prefetch" href="https://stats.g.doubleclick.net"><link rel="dns-prefetch" href="https://www.google.com"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preload" href="https://fonts.gstatic.com/s/lora/v14/0QIvMX1D_JOuMwr7I_FMl_E.woff2" as="font" crossorigin="" type="font/woff2"><meta name="Description" content="This post explains how the JavaScript engine actually parses the arithmetic expressions."><style>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}@font-face{font-family:Lora;font-style:normal;font-weight:400;font-display:swap;src:local('Lora Regular'),local('Lora-Regular'),url(https://fonts.gstatic.com/s/lora/v14/0QIvMX1D_JOuMwr7I_FMl_E.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}code[class*=language-],pre[class*=language-]{color:#9efeff;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;font-family:'Operator Mono','Fira Code',Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-weight:400;font-size:14px;line-height:22px;letter-spacing:.5px;text-shadow:0 1px #222245}code[class*=language-] ::-moz-selection,code[class*=language-] ::selection,code[class*=language-]::-moz-selection,code[class*=language-]::selection,pre[class*=language-] ::-moz-selection,pre[class*=language-] ::selection,pre[class*=language-]::-moz-selection,pre[class*=language-]::selection{color:inherit;background:#a599e9}pre[class*=language-]{padding:2em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1e1e3f}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token{font-weight:400}.token.cdata,.token.comment,.token.prolog{color:#b362ff}.token.atrule,.token.delimiter,.token.important,.token.keyword,.token.selector{color:#ff9d00}.token.attr-name,.token.operator{color:#ffb454}.token.punctuation{color:#fff}.token.boolean{color:#ff628c}.token.builtin,.token.doctype,.token.tag,.token.tag .punctuation{color:#ff9d00}.token.entity,.token.symbol{color:#6897bb}.token.number{color:#ff628c}.token.constant,.token.property,.token.variable{color:#ff628c}.token.char,.token.string{color:#a5ff90}.token.attr-value,.token.attr-value .punctuation{color:#a5c261}.token.attr-value .punctuation:first-child{color:#a9b7c6}.token.url{color:#287bde;text-decoration:underline}.token.function{color:#fad000}.token.regex{background:#364135}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.inserted{background:#0f0}.token.deleted{background:#ff000d}code.language-css .token.property,code.language-css .token.property+.token.punctuation{color:#a9b7c6}code.language-css .token.id{color:#ffc66d}code.language-css .token.selector>.token.attribute,code.language-css .token.selector>.token.class,code.language-css .token.selector>.token.pseudo-class,code.language-css .token.selector>.token.pseudo-element{color:#ffc66d}.token.class-name{color:#fb94ff}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:0 0}pre .line-highlight,pre .line-highlight.line-highlight,pre>code.line-highlight{margin-top:36px;background:linear-gradient(to right,rgba(179,98,255,.17),transparent)}pre .line-highlight:before,pre .line-highlight[data-end]:after,pre>code.line-highlight:before,pre>code.line-highlight[data-end]:after{content:''}</style><style>:root{--red:#c5004a;--darkred:#7f0036;--lightgray:#e0e0e0;--gray:#c0c0c0;--darkgray:#333;--navy:#17050f;--blue:#082840;--white:#fff;--shadow:#aaa}*{box-sizing:border-box}body,html{padding:0;margin:0;font-family:Lora,sans-serif;font-weight:400;color:var(--darkgray);background:linear-gradient(to top,#76769a,#f5d1d1,#cae0e0);background-attachment:fixed;overflow-x:hidden}p:last-child{margin-bottom:0}.tmpl-post li,img,p{max-width:50em}.tmpl-post li,p{line-height:1.6}a[href]{color:var(--blue)}a[href]:visited{color:var(--navy)}main :first-child{margin-top:0}header{box-shadow:0 1px 10px var(--shadow);background-color:var(--white);max-height:50px}header:after{content:'';display:table;clear:both}table{margin:1em 0}table td,table th{padding-right:1em}code,pre{font-family:Consolas,Menlo,Monaco,'Andale Mono WT','Andale Mono','Lucida Console','Lucida Sans Typewriter','DejaVu Sans Mono','Bitstream Vera Sans Mono','Liberation Mono','Nimbus Mono L','Courier New',Courier,monospace;line-height:1.5}pre{font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;background-color:#f6f6f6}blockquote{border-left:5px solid #86a8e7;margin:0;padding-left:30px;font-style:italic;color:#888}.info{line-height:1.5em;padding:15px;border:1px solid #ffc66d;background-color:#ffffcc8a}.tmpl-post .info>p{margin:0}pre+.info{margin-top:30px}.highlight-line{display:block;padding:.125em 1em;text-decoration:none;color:inherit}.highlight-line:empty:before{content:' '}.highlight-line+br{display:none}.highlight-line-isdir{color:#b0b0b0;background-color:#222}.highlight-line-active{background-color:#444;background-color:hsla(0,0%,27%,.8)}.highlight-line-add{background-color:#45844b}.highlight-line-remove{background-color:#902f2f}.home{padding:0 1rem;float:left;margin:1rem 0;font-size:1em}.home :link:not(:hover){text-decoration:none}.nav{padding:0;list-style:none;float:left;margin-left:1em}.nav-item{display:inline-block;margin-right:1em}.nav-item a[href]:not(:hover){text-decoration:none}.nav-item-active{font-weight:700;text-decoration:underline}.postlist-year>h3{background:linear-gradient(to left,#e91e63,#9c27b0,#3f51b5);-webkit-text-fill-color:transparent;-webkit-background-clip:text;display:inline-block;margin:0}.postlist{list-style:none;padding:0;padding-left:20px}.postlist-item{font-size:16px;margin:10px 0}.postlist-item:before{display:inline-block;pointer-events:none;line-height:100%;text-align:right}.postlist-date,.postlist-item:before{font-size:.8125em;color:var(--darkgray)}.postlist-date{word-spacing:-.5px;margin:0 10px;font-style:italic}.postlist-link{display:inline-block;padding:.25em .1875em}.postlist-item-active .postlist-link{font-weight:700}.tmpl-home .postlist-link{font-size:1em;font-weight:300}.warning{background-color:#ffc;padding:1em .625em}.warning ol:only-child{margin:0}.direct-link{font-family:sans-serif;text-decoration:none;font-style:normal;margin-left:.1em}a[href].direct-link,a[href].direct-link:visited{color:transparent}:hover>a[href].direct-link,:hover>a[href].direct-link:visited,a[href].direct-link:focus,a[href].direct-link:focus:visited{color:#aaa}main{width:100%;max-width:900px;font-size:17px;min-height:100vh;padding:40px;background-color:var(--white);box-shadow:0 6px 5px #aaa;margin:auto;margin-top:-15px;padding-top:45px}main>h1{text-align:center}main img{display:block;max-width:100%;height:auto}.header-section{display:flex;flex-direction:row;justify-content:space-between;align-items:center;max-width:800px;margin:auto}.tmpl-post p{line-height:1.7;margin:25px 0}.tmpl-post>.post-card__title{margin:30px 0;font-size:1.7em}#homeLink{display:flex;flex-direction:row;color:#c6304b91;font-weight:100;font-size:12px;align-items:center}#homeLink>span{margin:0 10px}#homeLink>a:hover{text-decoration:none}#homeLink>a{color:#c6304b;font-size:25px;font-weight:700;letter-spacing:3px;font-family:monospace;background:linear-gradient(45deg,#607d8b,#9e9e9e);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.post-card{text-decoration:none;display:grid;grid-template:repeat(3,auto)/1fr;margin:10px 0;grid-row-gap:10px;border-bottom:1px solid #f1f1f1;padding:15px 30px}.post-card:last-child{border:none}.post-card__link{text-decoration:none}.post-card__title{margin:0;font-size:1.5em;font-weight:700;font-family:sans-serif;background:linear-gradient(45deg,#6642bd,#ea4337);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.rainbow-border-box{border-bottom:2px solid transparent;border-image:linear-gradient(to right,#b827fc 0,#2c90fc 25%,#b8fd33 50%,#fec837 75%,#fd1892 100%);border-image-slice:1;height:2px;display:block;margin:15px 0}.post-card__meta{display:flex;justify-content:space-between}.post-card__meta--center{justify-content:center}.post-card__meta-date{font-size:.9em;color:#666}.post-card__meta-readtime{font-size:.9em}.post-card__category{font-family:monospace;font-size:13px;font-weight:100;color:#c53261;padding:5px;background:#f1f1f1;border-radius:5px;margin:0 5px 5px;display:inline-block}.post-card__excerpt{line-height:1.8em}.post-card__date{font-size:.9em;color:#666}.tmpl-post p>code{background-color:#f1f1f1;color:#3f51b5;border-radius:2px;box-shadow:0 1px 3px #b1b1b1;border:none;padding:2px 10px;font-weight:400;font-family:inherit}.embedd-iframe{width:100%;min-height:300px;border:none}.image-center{display:flex;justify-content:center;align-items:center}.about-me__image{width:150px;border-radius:50%;height:150px;box-shadow:0 0 0 5px #fff,0 0 0 8px #ccc;margin-bottom:30px}.footer__content{padding:20px 0;display:flex;justify-content:center;max-width:80%;margin:auto;align-items:center}.footer__image{height:100px;width:200px;overflow:hidden;display:flex;align-items:center;justify-content:center}.footer__image img{width:100px;border-radius:50%;max-width:100%;max-height:100%}.footer__desc{margin:0 20px;line-height:30px;padding:10px 0}.footer__desc a[href].twitter-link:visited,.footer_desc a[href].twitter-link{color:#5f5ff2}.footer_desc-social-links{padding-top:10px}.footer_desc-social-links a{font-size:13px;border-right:1px solid #ccc;padding:0 5px}.footer_desc-social-links a:first-child{padding-left:0}.footer_desc-social-links a:last-child{border:none}.footer-links{background:#fafafa;color:#666;font-size:10px;padding:10px 20px;max-width:900px;margin:auto;display:flex;flex-direction:row-reverse;justify-content:space-between}.footer-links a,.footer-links a:visited{color:#666;text-decoration:none}.load-comments{padding:10px;max-width:200px;border:2px inset #9c27b08f;text-align:center;margin:auto;margin:50px auto;cursor:pointer;box-shadow:0 0 10px 0 #eec6f5;border-radius:5px;font-size:14px;color:#666}@media(max-width:560px){body{background:linear-gradient(to left,#7f7fd5,#86a8e7,#91eae4)}main{padding:20px;margin-top:5px}header{max-height:none}.header-section{flex-direction:column}.post-card{padding:20px 10px}.footer__content{flex-direction:column}}main>pre[class*=language-]{border-radius:0;margin-left:-40px;margin-right:-40px;padding:15px 40px}</style><link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="< UNDEFINED NULL />"></head><body><header><section class="header-section"><h1 id="homeLink" class="home"><a href="/">&lt; UNDEFINED NULL /&gt;</a></h1><ul class="nav"><li class="nav-item"><a href="/">Home</a></li><li class="nav-item"><a href="/archive/">Archive</a></li><li class="nav-item"><a href="/about/">About</a></li></ul></section></header><main class="tmpl-post"><h1 class="post-card__title">Some Gotchas In Arithmetic Expression Evaluation : JavaScript</h1><div class="post-card__meta"><div class="post-card__meta-date">26 Sep 2013</div><div class="post-card__meta-readtime">About 4 min read</div></div><div class="rainbow-border-box"></div><span class="post-card__category">JavaScript </span><span class="post-card__category">arithmetic expressions</span><h2 id="solve-a-small-problem-in-javascript">Solve a small problem in JavaScript <a class="direct-link" href="#solve-a-small-problem-in-javascript" aria-hidden="true">#</a></h2><p>This post is just for recollecting some of the basics of JavaScript. Let's start with a small JavaScript code. Here is the code –– Solve it with out using the console.</p><pre class="language-js"><code class="language-js">	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><br>	a <span class="token operator">=</span> <span class="token punctuation">(</span> a <span class="token operator">-</span> <span class="token punctuation">(</span> b <span class="token operator">=</span> <span class="token punctuation">(</span> a <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token punctuation">)</span> <span class="token operator">-</span> b <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Take your own time to come up with an answer before moving to the next section.</p><h2 id="analyzing-the-problem">Analyzing the problem <a class="direct-link" href="#analyzing-the-problem" aria-hidden="true">#</a></h2><p>If your answer is <code>a = 3 and b = 5</code>, this post is written for you. Open your favorite browser and fire up the console. Put the above code in the console and see the values of <code>a</code> and <code>b</code> now.</p><p>Stunned ? Yeah, The values of <code>a</code> and <code>b</code> are <code>a = 0 and b = 5</code> now. Honestly I also got it wrong initially. I did ask this question to some of my friends ( who are in JavaScript circle ), and all of them gave me wrong answer.</p><h2 id="some-flashback">Some flashback <a class="direct-link" href="#some-flashback" aria-hidden="true">#</a></h2><p>So, here is how I arrived this to particular question. Last week I was trying to write the code for an interview problem in JavaScript and it's a very common one –– How to swap values of 2 variables with out using a 3rd variable.</p><p>Let the variables be <code>a = 5</code> and <code>b = 3</code>. Swap the values of <code>a</code> and <code>b</code> with out using any 3rd variable .</p><p>Solution is simple . Just do the following arithmetic operations</p><pre><code>a = a + b
b = a - b
a = a - b
</code></pre><p>This will do the job.</p><p>What I was trying is to write the entire expression in one single line. I wrote it like below.</p><p><strong>Code 1 :</strong></p><pre class="language-js"><code class="language-js">	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><br>	a <span class="token operator">=</span> <span class="token punctuation">(</span> a <span class="token operator">-</span> <span class="token punctuation">(</span> b <span class="token operator">=</span> <span class="token punctuation">(</span> a <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token punctuation">)</span> <span class="token operator">-</span> b <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Cool .. I thought it's done.</p><p>But I got surpriced when I tried it in the console. I was expecting final values should be <code>a = 3 and b = 5</code> but the output was different. I got <code>a = 0 and b =5</code>.</p><p>WTF ? Let me change the code a bit. I modified the code like this</p><p><strong>Code 2 :</strong></p><pre class="language-js"><code class="language-js">	<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><br>	a <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> b <span class="token operator">=</span> <span class="token punctuation">(</span> a <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token punctuation">)</span> <span class="token operator">-</span> b <span class="token punctuation">)</span> <span class="token operator">-</span> a <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>This time I got the correct results <code>a = -3 and b = 5</code>. So why the hell it didn't work for the first expression ?</p><h2 id="the-answer-is-%3A">The answer is : <a class="direct-link" href="#the-answer-is-%3A" aria-hidden="true">#</a></h2><p>We're evaluating it wrongly. I mean we are not doing the way JavaScript engine does. I went to the EcmaScript specification and read the section for "Arithmetic Expression".</p><blockquote><p>Expressions : Any valid unit code that resolves to some value.</p></blockquote><p><strong>Two things to note :</strong></p><ul><li>Assignment operators are right to left associative. That means for the expression <code>a = b = 5</code>, the value <code>5</code> will be assigned to variable <code>b</code> and then assigned to variable <code>b</code>.</li><li>Arithmetic and multiplicative operators are left to right associative. For the expression <code>c = a + b</code>, the value of <code>a</code> will be computed first, then goes to <code>b</code> and computes it's value.</li></ul><p>For our problem, if I draw the parse tree roughly, it will be like below.</p><pre><code>   =
 /	 \
a	  -
	/	\
   a	 =
	   /   \
	  b		-
	  	  /	  \
		 =      b
	   /   \
	  a	    +
	  	  /   \
		 a     b
</code></pre><p>Ideally parse tree doesn't contain the <code>=</code> operator. I made it like this to understand how the parser start evaluating the expression.</p><p>In the above parse tree, all the <code>=</code> operators are evaluated from right-to left ( that means the right node will be evaluated first and the value will be assigned to the left node ). On the other hand, arithmetic/multiplicative expressions are evaluated from left to right ( that means the values will be assigned from left and the arithmetic/multiplicative operation will be carried out ).</p><p>We can identify sub-expressions in our code. Basically, we can extract the expressions containing <code>=</code> to sub-expressions. Hence the above parse tree can be re-drawn like below.</p><pre><code>   =
 /	 \
a	  -
	/	\
   a	 X
</code></pre><p>Where <code>X</code> is the <strong>Sub-Expression 1</strong> given below :</p><pre><code>		 =
	   /   \
	  b		-
	  	  /	  \
         Y	   b
</code></pre><p>Where <code>Y</code> is the <strong>Sub-Expression 2</strong> given below :</p><pre><code>		 =
	   /   \
	  a	    +
	  	  /   \
		 a     b
</code></pre><p>Let's see how JavaScript parser evaluate the value of <code>a</code> finally.</p><h3 id="steps-%3A">Steps : <a class="direct-link" href="#steps-%3A" aria-hidden="true">#</a></h3><ul><li><p>Parser takes the main expression <code>a = a - X</code> and evaluated from left to right. At first, parser finds the variable<code>a</code> and finds it's value. Now the parser moves to the next variable <code>X</code> and try to calculate it's value. Since <code>X</code> is an expression, it need to be evaluated to form a primitive value.</p><p><em>Note: To get the value, parser internally calls the <a href="http://es5.github.io/#x8.7.1">GetValue</a> of each operands</em></p><p>So, for the parser, the expression becomes like this :</p></li></ul><pre class="language-js"><code class="language-js">a <span class="token operator">=</span> <span class="token function">GetValue</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">GetValue</span><span class="token punctuation">(</span> <span class="token function">Evaluate</span><span class="token punctuation">(</span> <span class="token constant">X</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span></code></pre><p>Which is :</p><pre class="language-js"><code class="language-js">a <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">-</span> <span class="token function">GetValue</span><span class="token punctuation">(</span> <span class="token function">Evaluate</span><span class="token punctuation">(</span> <span class="token constant">X</span> <span class="token punctuation">)</span></code></pre><ul><li><p>Now it need to evaluate the expression <code>X</code> where <code>b = Y - b</code>. Here the first operand <code>Y</code> itself a sub-expression, so parser has to evaluate it first before calculating the value of the second operand <code>b</code>.</p></li><li><p>Let's evaluate the expression <code>Y</code> which is <code>a = a + b</code>. This is straightforward and contains no sub expression , hence evaluated like this.</p></li></ul><pre class="language-js"><code class="language-js">	a <span class="token operator">=</span> <span class="token function">GetValue</span><span class="token punctuation">(</span> a <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">GetValue</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span></code></pre><p>This equals to :</p><pre class="language-js"><code class="language-js">	a <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">3</span></code></pre><p>Finally the value of expression <code>Y</code> becomes <code>8</code>.</p><ul><li>Coming back to step 2 where expression <code>X</code> needs to be completed. expression <code>X</code> is</li></ul><pre class="language-js"><code class="language-js">	b <span class="token operator">=</span> <span class="token function">GetValue</span><span class="token punctuation">(</span> <span class="token constant">Y</span> <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">GetValue</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span></code></pre><p>Becomes like this :</p><pre class="language-js"><code class="language-js">	b <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">-</span> <span class="token function">GetValue</span><span class="token punctuation">(</span> b <span class="token punctuation">)</span></code></pre><p>Which is :</p><pre class="language-js"><code class="language-js">	b <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">-</span> <span class="token number">3</span></code></pre><p>Finally the value of <code>b</code> and expression <code>X</code> becomes <code>5</code>.</p><ul><li>So now all the sub expressions are evaluated , the main expression can be completed now.</li></ul><p>The main expression was :</p><pre class="language-js"><code class="language-js">	a <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">-</span> <span class="token function">GetValue</span><span class="token punctuation">(</span> <span class="token constant">X</span> <span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token comment">// value of X = 5 now</span></code></pre><p>That means final value of <code>a = 5 - 5</code> which is <code>0</code>.</p><ul><li>Finally the values of <code>a</code> and <code>b</code> will become <code>a = 0 and b = 5</code></li></ul><p>Now we're in the same direction with JS engine. We can apply what we learned for the <strong>Code 2</strong> also.</p><h2 id="conclusion">Conclusion <a class="direct-link" href="#conclusion" aria-hidden="true">#</a></h2><p>I didn't want to write this much long. All I wanted to recollect some of those basic stuff. Thanks for reading !!</p><p>References :</p><ol><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators</a></li><li><a href="http://www.ecma-international.org/ecma-262/5.1/#sec-8.7">http://www.ecma-international.org/ecma-262/5.1/#sec-8.7</a></li><li><a href="http://es5.github.io/#x8.7.1">http://es5.github.io/#x8.7.1</a></li><li><a href="http://stackoverflow.com/questions/19045411/can-somebody-explain-how-javascript-arithmetic-expressions-work">http://stackoverflow.com/questions/19045411/can-somebody-explain-how-javascript-arithmetic-expressions-work</a></li></ol><div class="load-comments" data-load-disqus="">Comments</div><p><a href="/">← Home</a></p><footer class="footer"><div class="rainbow-border-box"></div><div class="footer__content"><div class="footer__image"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZGNywtQFdBRkxOUlNSMj5aYVpQYEpRUk8BDg4OExETJhUVJk81LTVPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT//AABEIAAwACwMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ALrSyyS2VxEJ2V8CQKBtI5ySPx/Snyz5vIfucrtuR3V9Aly6/ZZODj/PFaqLsc8tyDQrqY6GsjNuZIgBkf7TD+VTGTtLyN5xV4mJqep3cep3SLINqysBwOmaIO8U2hzjaTSP/9k=" alt="Shidhin CR" loading="lazy" data-src="/img/shidhin_dp_small.png" class="lazyload" width="100" height="111"></div><div class="footer__desc">Shidhin is a Front-end engineer and <a href="https://developers.google.com/community/experts/directory/profile/profile-shidhin_cr">Google Developer Expert</a> in Web Tech. Follow him on <a class="twitter-link" href="https://twitter.com/intent/follow?original_referer=undefinednull.com&amp;ref_src=twsrc%5Etfw&amp;screen_name=shidhincr&amp;tw_p=followbutton">Twitter</a><div class="footer_desc-social-links"><a href="//linkedin.com/in/shidhincr">LinkedIn</a> <a href="//github.com/shidhincr">Github</a> <a href="//facebook.com/shidhincr">Facebook</a> <a href="mailto: shidhincr@gmail.com">Email</a></div></div></div></footer><div id="disqus_thread"></div></main><script>window.addEventListener("DOMContentLoaded",()=>{
/*! instant.page v3.0.0 - (C) 2019 Alexandre Dieulot - https://instant.page/license */
let e,t;window.disqus_config=function(){this.page.url="https://www.undefinednull.com/2013/09/26/some-gotchas-in-arithmetic-expression-evaluation-javascript/",this.page.identifier="https://www.undefinednull.com/2013/09/26/some-gotchas-in-arithmetic-expression-evaluation-javascript/"},function(e,t,n){if("loading"in HTMLImageElement.prototype){var o=document.querySelectorAll("img"),s=o.length;if(s>0)for(var a=0;a<s;a++)o[a].src=o[a].dataset.src}else{var i=document.createElement("script");i.async=!0,i.src="https://cdn.jsdelivr.net/npm/lazysizes@5/lazysizes.min.js",document.body.appendChild(i)}}();const n=new Set,o=document.createElement("link"),s=o.relList&&o.relList.supports&&o.relList.supports("prefetch")&&window.IntersectionObserver&&"isIntersecting"in IntersectionObserverEntry.prototype,a="instantAllowQueryString"in document.body.dataset,i="instantAllowExternalLinks"in document.body.dataset,r="instantWhitelist"in document.body.dataset;let c=65,d=!1,l=!1,u=!1;if("instantIntensity"in document.body.dataset){const e=document.body.dataset.instantIntensity;if("mousedown"==e.substr(0,"mousedown".length))d=!0,"mousedown-only"==e&&(l=!0);else if("viewport"==e.substr(0,"viewport".length))navigator.connection&&(navigator.connection.saveData||navigator.connection.effectiveType.includes("2g"))||("viewport"==e?document.documentElement.clientWidth*document.documentElement.clientHeight<45e4&&(u=!0):"viewport-all"==e&&(u=!0));else{const t=parseInt(e);isNaN(t)||(c=t)}}if(s){const n={capture:!0,passive:!0};if(l||document.addEventListener("touchstart",(function(e){t=performance.now();const n=e.target.closest("a");p(n)&&h(n.href)}),n),d?document.addEventListener("mousedown",(function(e){const t=e.target.closest("a");p(t)&&h(t.href)}),n):document.addEventListener("mouseover",(function(n){if(performance.now()-t<1100)return;const o=n.target.closest("a");p(o)&&(o.addEventListener("mouseout",m,{passive:!0}),e=setTimeout(()=>{h(o.href),e=void 0},c))}),n),u){let e;(e=window.requestIdleCallback?e=>{requestIdleCallback(e,{timeout:1500})}:e=>{e()})(()=>{const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;e.unobserve(n),h(n.href)}})});document.querySelectorAll("a").forEach(t=>{p(t)&&e.observe(t)})})}}function m(t){t.relatedTarget&&t.target.closest("a")==t.relatedTarget.closest("a")||e&&(clearTimeout(e),e=void 0)}function p(e){if(e&&e.href&&(!r||"instant"in e.dataset)&&(i||e.origin==location.origin||"instant"in e.dataset)&&["http:","https:"].includes(e.protocol)&&("http:"!=e.protocol||"https:"!=location.protocol)&&(a||!e.search||"instant"in e.dataset)&&!(e.hash&&e.pathname+e.search==location.pathname+location.search||"noInstant"in e.dataset))return!0}function h(e){if(n.has(e))return;const t=document.createElement("link");t.rel="prefetch",t.href=e,document.head.appendChild(t),n.add(e)}!function(e,t,n,o,s,a,i){e.GoogleAnalyticsObject=s,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,a=t.createElement(n),i=t.getElementsByTagName(n)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(a,i)}(window,document,"script",0,"ga"),ga("create","UA-10379928-17","auto"),ga("require","displayfeatures"),ga("send","pageview")}),function(){let e=document.querySelector("[data-load-disqus]");e&&e.addEventListener("click",(function(t){var n,o;e.innerHTML="Loading Comments ...",n=document,(o=n.createElement("script")).src="https://shidhincr.disqus.com/embed.js",o.setAttribute("data-timestamp",+new Date),(n.head||n.body).appendChild(o),setTimeout(()=>{var t=document.querySelector("#disqus_thread");t&&t.scrollIntoView(),e.remove()},2e3)}),{once:!0})}();</script><div class="footer-links" aria-hidden="true"><div>© 2020 Shidhin CR</div><div><a href="/sitemap.xml">Sitemap</a></div></div></body></html>