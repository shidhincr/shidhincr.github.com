<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Command & CommandFor Attribute Demo</title><style>:root {
            --primary-color: #3498db;
            --primary-dark: #2980b9;
            --secondary-color: #e74c3c;
            --text-color: #333;
            --background-color: #f9f9f9;
            --border-color: #ddd;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        h1, h2, h3 {
            color: #2c3e50;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        .demo-box {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .example-code {
            background: #f8f8f8;
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            font-family: monospace;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px 5px 5px 0;
            transition: background-color 0.2s;
        }

        button:hover {
            background-color: var(--primary-dark);
        }

        button.secondary {
            background-color: var(--secondary-color);
        }

        dialog {
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            width: 400px;
            max-width: 90%;
        }

        dialog::backdrop {
            background-color: rgba(0, 0, 0, 0.5);
        }

        [popover] {
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            width: 300px;
        }

        #theme-demo {
            transition: background-color 0.3s, color 0.3s;
        }

        #theme-demo[data-theme="dark"] {
            background-color: #2c3e50;
            color: #ecf0f1;
        }

        #theme-demo[data-theme="custom"] {
            background-color: #9b59b6;
            color: white;
        }

        .fallback-note {
            background-color: #fffde7;
            padding: 10px;
            border-left: 4px solid #fbc02d;
            margin-top: 20px;
        }</style></head><body><h1>Command & CommandFor Attribute Demo</h1><p>This page demonstrates the new <code>command</code> and <code>commandfor</code> attributes introduced in Chrome 135 (April 2025).</p><div class="fallback-note"><p><strong>Note:</strong> If you're using a browser that doesn't support these attributes yet, a JavaScript fallback will be used.</p></div><div class="container"><div class="demo-box"><h2>Dialog Example</h2><p>Using command attributes to control a dialog:</p><button command="show-modal" commandfor="example-dialog">Open Modal Dialog</button><dialog id="example-dialog"><h3>Example Dialog</h3><p>This is a modal dialog controlled by the command and commandfor attributes.</p><button command="close" commandfor="example-dialog">Close Dialog</button></dialog><div class="example-code">&lt;button command="show-modal" commandfor="example-dialog"&gt;Open Modal Dialog&lt;/button&gt; &lt;dialog id="example-dialog"&gt; &lt;h3&gt;Example Dialog&lt;/h3&gt; &lt;p&gt;This is a modal dialog controlled by the command and commandfor attributes.&lt;/p&gt; &lt;button command="close" commandfor="example-dialog"&gt;Close Dialog&lt;/button&gt; &lt;/dialog&gt;</div></div><div class="demo-box"><h2>Popover Example</h2><p>Using command attributes to control a popover:</p><button command="toggle-popover" commandfor="example-popover">Toggle Popover</button> <button command="show-popover" commandfor="example-popover">Show Popover</button> <button command="hide-popover" commandfor="example-popover">Hide Popover</button><div id="example-popover" popover><h3>Example Popover</h3><p>This is a popover controlled by the command and commandfor attributes.</p><button command="hide-popover" commandfor="example-popover">Close</button></div><div class="example-code">&lt;button command="toggle-popover" commandfor="example-popover"&gt;Toggle Popover&lt;/button&gt; &lt;button command="show-popover" commandfor="example-popover"&gt;Show Popover&lt;/button&gt; &lt;button command="hide-popover" commandfor="example-popover"&gt;Hide Popover&lt;/button&gt; &lt;div id="example-popover" popover&gt; &lt;h3&gt;Example Popover&lt;/h3&gt; &lt;p&gt;This is a popover controlled by the command and commandfor attributes.&lt;/p&gt; &lt;button command="hide-popover" commandfor="example-popover"&gt;Close&lt;/button&gt; &lt;/div&gt;</div></div></div><div class="demo-box"><h2>Custom Command Example</h2><p>Using custom commands to create a theme switcher:</p><div id="theme-demo" class="demo-box"><h3>Theme Controller</h3><p>This box changes its theme based on the buttons below.</p><button commandfor="theme-demo" command="--set-theme" value="light">Light Theme</button> <button commandfor="theme-demo" command="--set-theme" value="dark">Dark Theme</button> <button commandfor="theme-demo" command="--set-theme" value="custom">Custom Theme</button></div><div class="example-code">&lt;div id="theme-demo"&gt; &lt;h3&gt;Theme Controller&lt;/h3&gt; &lt;p&gt;This box changes its theme based on the buttons below.&lt;/p&gt; &lt;button commandfor="theme-demo" command="--set-theme" value="light"&gt;Light Theme&lt;/button&gt; &lt;button commandfor="theme-demo" command="--set-theme" value="dark"&gt;Dark Theme&lt;/button&gt; &lt;button commandfor="theme-demo" command="--set-theme" value="custom"&gt;Custom Theme&lt;/button&gt; &lt;/div&gt; &lt;script&gt; const themeDemo = document.getElementById('theme-demo'); themeDemo.addEventListener('command', (event) => { if (event.command === '--set-theme') { const theme = event.source.value; themeDemo.setAttribute('data-theme', theme); } }); &lt;/script&gt;</div></div><div class="demo-box"><h2>Command Event Information</h2><p>This example shows information about the CommandEvent when triggering commands:</p><div id="event-demo" class="demo-box"><h3>Command Event Demo</h3><p>Click the buttons below to see command event details:</p><button commandfor="event-demo" command="--action-one">Action One</button> <button commandfor="event-demo" command="--action-two" value="custom-value">Action Two (with value)</button><pre id="event-output" style="background: #f8f8f8; padding: 10px; margin-top: 10px; border-radius: 4px;">Click a button to see event details</pre></div></div><script>// Check for command/commandfor support
        const isCommandSupported = 'command' in HTMLButtonElement.prototype;
        
        // Fallback implementation if not supported
        if (!isCommandSupported) {
            console.log('Command attributes not supported in this browser. Using fallback implementation.');
            
            // Dialog fallback
            document.querySelectorAll('button[commandfor]').forEach(button => {
                button.addEventListener('click', () => {
                    const targetId = button.getAttribute('commandfor');
                    const target = document.getElementById(targetId);
                    
                    if (!target) return;
                    
                    const command = button.getAttribute('command');
                    
                    // Handle dialogs
                    if (target.tagName === 'DIALOG') {
                        if (command === 'show-modal') {
                            target.showModal();
                        } else if (command === 'close') {
                            target.close();
                        }
                    }
                    
                    // Handle popovers
                    if (target.hasAttribute('popover')) {
                        if (command === 'show-popover') {
                            target.showPopover();
                        } else if (command === 'hide-popover') {
                            target.hidePopover();
                        } else if (command === 'toggle-popover') {
                            if (target.matches(':popover-open')) {
                                target.hidePopover();
                            } else {
                                target.showPopover();
                            }
                        }
                    }
                    
                    // Custom command handling
                    if (command.startsWith('--')) {
                        // Create a custom event similar to CommandEvent
                        const event = new CustomEvent('command', {
                            bubbles: true,
                            cancelable: true,
                            detail: {
                                command: command,
                                source: button
                            }
                        });
                        
                        // Add command and source properties to mimic CommandEvent
                        event.command = command;
                        event.source = button;
                        
                        target.dispatchEvent(event);
                    }
                });
            });
        }
        
        // Theme demo functionality
        const themeDemo = document.getElementById('theme-demo');
        
        themeDemo.addEventListener('command', (event) => {
            if (event.command === '--set-theme') {
                const theme = event.source.value;
                themeDemo.setAttribute('data-theme', theme);
            }
        });
        
        // Event demo functionality
        const eventDemo = document.getElementById('event-demo');
        const eventOutput = document.getElementById('event-output');
        
        eventDemo.addEventListener('command', (event) => {
            eventOutput.textContent = `Command Event Details:
- command: ${event.command}
- source: <${event.source.tagName.toLowerCase()}>
- value: ${event.source.hasAttribute('value') ? event.source.getAttribute('value') : 'none'}
- timestamp: ${new Date().toISOString()}`;
        });</script></body></html>