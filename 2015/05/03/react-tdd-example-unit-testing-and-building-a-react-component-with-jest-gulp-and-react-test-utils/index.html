<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>React TDD Example: Unit Testing and Building a React Component with Jest, Gulp and React Test Utils</title><link rel="apple-touch-icon" sizes="57x57" href="/img/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/img/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png"><link rel="manifest" href="/img/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/img/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin=""><link href="https://www.google-analytics.com" rel="preconnect" crossorigin=""><link rel="preload" href="https://fonts.gstatic.com/s/lora/v14/0QIvMX1D_JOuMwr7I_FMl_E.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://fonts.gstatic.com/s/lora/v14/0QIgMX1D_JOuO7HeNtJumtus-7zu-Q.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://fonts.gstatic.com/s/lora/v14/0QIgMX1D_JOuO7HeNtxumtus-7w.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://fonts.gstatic.com/s/lora/v14/0QIvMX1D_JOuMwf7I_FMl_GW8g.woff2" as="font" crossorigin="" type="font/woff2"><meta name="Description" content="Writings by Shidhin"><style>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}

      @font-face{font-family:Lora;font-style:normal;font-weight:400;font-display:swap;src:local('Lora Regular'),local('Lora-Regular'),url(https://fonts.gstatic.com/s/lora/v14/0QIvMX1D_JOuMwT7I_FMl_GW8g.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Lora;font-style:normal;font-weight:400;font-display:swap;src:local('Lora Regular'),local('Lora-Regular'),url(https://fonts.gstatic.com/s/lora/v14/0QIvMX1D_JOuMwr7I_FMl_E.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Lora;font-style:normal;font-weight:700;font-display:swap;src:local('Lora Bold'),local('Lora-Bold'),url(https://fonts.gstatic.com/s/lora/v14/0QIgMX1D_JOuO7HeNtJumtus-7zu-Q.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Lora;font-style:normal;font-weight:700;font-display:swap;src:local('Lora Bold'),local('Lora-Bold'),url(https://fonts.gstatic.com/s/lora/v14/0QIgMX1D_JOuO7HeNtxumtus-7w.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}

      code[class*=language-],pre[class*=language-]{color:#9efeff;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;font-family:'Operator Mono','Fira Code',Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-weight:400;font-size:14px;line-height:22px;letter-spacing:.5px;text-shadow:0 1px #222245}code[class*=language-] ::-moz-selection,code[class*=language-] ::selection,code[class*=language-]::-moz-selection,code[class*=language-]::selection,pre[class*=language-] ::-moz-selection,pre[class*=language-] ::selection,pre[class*=language-]::-moz-selection,pre[class*=language-]::selection{color:inherit;background:#a599e9}pre[class*=language-]{padding:2em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1e1e3f}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token{font-weight:400}.token.cdata,.token.comment,.token.prolog{color:#b362ff}.token.atrule,.token.delimiter,.token.important,.token.keyword,.token.selector{color:#ff9d00}.token.attr-name,.token.operator{color:#ffb454}.token.punctuation{color:#fff}.token.boolean{color:#ff628c}.token.builtin,.token.doctype,.token.tag,.token.tag .punctuation{color:#ff9d00}.token.entity,.token.symbol{color:#6897bb}.token.number{color:#ff628c}.token.constant,.token.property,.token.variable{color:#ff628c}.token.char,.token.string{color:#a5ff90}.token.attr-value,.token.attr-value .punctuation{color:#a5c261}.token.attr-value .punctuation:first-child{color:#a9b7c6}.token.url{color:#287bde;text-decoration:underline}.token.function{color:#fad000}.token.regex{background:#364135}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.inserted{background:#0f0}.token.deleted{background:#ff000d}code.language-css .token.property,code.language-css .token.property+.token.punctuation{color:#a9b7c6}code.language-css .token.id{color:#ffc66d}code.language-css .token.selector>.token.attribute,code.language-css .token.selector>.token.class,code.language-css .token.selector>.token.pseudo-class,code.language-css .token.selector>.token.pseudo-element{color:#ffc66d}.token.class-name{color:#fb94ff}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:0 0}pre .line-highlight,pre .line-highlight.line-highlight,pre>code.line-highlight{margin-top:36px;background:linear-gradient(to right,rgba(179,98,255,.17),transparent)}pre .line-highlight:before,pre .line-highlight[data-end]:after,pre>code.line-highlight:before,pre>code.line-highlight[data-end]:after{content:''}</style><style>:root{--red:#c5004a;--darkred:#7f0036;--lightgray:#e0e0e0;--gray:#c0c0c0;--darkgray:#333;--navy:#17050f;--blue:#082840;--white:#fff;--shadow:#aaa}*{box-sizing:border-box}body,html{padding:0;margin:0;font-family:Lora,sans-serif;color:var(--darkgray);background:linear-gradient(to top,#7f7fd5,#86a8e7,#91eae4);overflow-x:hidden}p:last-child{margin-bottom:0}.tmpl-post li,img,p{max-width:50em}.tmpl-post li,p{line-height:1.6}a[href]{color:var(--blue)}a[href]:visited{color:var(--navy)}main :first-child{margin-top:0}header{box-shadow:0 1px 10px var(--shadow);background-color:var(--white);max-height:50px}header:after{content:'';display:table;clear:both}table{margin:1em 0}table td,table th{padding-right:1em}code,pre{font-family:Consolas,Menlo,Monaco,'Andale Mono WT','Andale Mono','Lucida Console','Lucida Sans Typewriter','DejaVu Sans Mono','Bitstream Vera Sans Mono','Liberation Mono','Nimbus Mono L','Courier New',Courier,monospace;line-height:1.5}pre{font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;background-color:#f6f6f6}blockquote{border-left:5px solid #86a8e7;margin:0;padding-left:30px;font-style:italic;color:#888}.info{line-height:1.5em;padding:15px;border:1px solid #ffc66d;background-color:#ffffcc8a}.tmpl-post .info>p{margin:0}pre+.info{margin-top:30px}.highlight-line{display:block;padding:.125em 1em;text-decoration:none;color:inherit}.highlight-line:empty:before{content:' '}.highlight-line+br{display:none}.highlight-line-isdir{color:#b0b0b0;background-color:#222}.highlight-line-active{background-color:#444;background-color:hsla(0,0%,27%,.8)}.highlight-line-add{background-color:#45844b}.highlight-line-remove{background-color:#902f2f}.home{padding:0 1rem;float:left;margin:1rem 0;font-size:1em}.home :link:not(:hover){text-decoration:none}.nav{padding:0;list-style:none;float:left;margin-left:1em}.nav-item{display:inline-block;margin-right:1em}.nav-item a[href]:not(:hover){text-decoration:none}.nav-item-active{font-weight:700;text-decoration:underline}.postlist{list-style:none;padding:0}.postlist-item{font-size:16px;margin:10px 0}.postlist-item:before{display:inline-block;pointer-events:none;line-height:100%;text-align:right}.postlist-date,.postlist-item:before{font-size:.8125em;color:var(--darkgray)}.postlist-date{word-spacing:-.5px}.postlist-link{display:inline-block;padding:.25em .1875em}.postlist-item-active .postlist-link{font-weight:700}.tmpl-home .postlist-link{font-size:1em;font-weight:300}.warning{background-color:#ffc;padding:1em .625em}.warning ol:only-child{margin:0}.direct-link{font-family:sans-serif;text-decoration:none;font-style:normal;margin-left:.1em}a[href].direct-link,a[href].direct-link:visited{color:transparent}:hover>a[href].direct-link,:hover>a[href].direct-link:visited,a[href].direct-link:focus,a[href].direct-link:focus:visited{color:#aaa}main{width:100%;max-width:900px;font-size:17px;min-height:100vh;padding:40px;background-color:var(--white);box-shadow:0 6px 5px #aaa;margin:auto;margin-top:-15px;padding-top:45px}main>h1{text-align:center}main img{display:block;width:100%;max-width:100%;height:auto}.header-section{display:flex;flex-direction:row;justify-content:space-between;align-items:center;max-width:800px;margin:auto}.tmpl-post p{line-height:1.7;margin:25px 0}.tmpl-post>.post-card__title{margin:30px 0;font-size:1.7em}#homeLink{display:flex;flex-direction:row;color:#c6304b91;font-weight:100;font-size:12px;align-items:center}#homeLink>span{margin:0 10px}#homeLink>a:hover{text-decoration:none}#homeLink>a{color:#c6304b;font-size:30px;font-weight:700;letter-spacing:3px;font-family:monospace;background:-webkit-linear-gradient(45deg,#839ce1,#8fdee4);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.post-card{text-decoration:none;display:grid;grid-template:repeat(3,auto)/1fr;margin:10px 0;grid-row-gap:10px;border-bottom:1px solid #f1f1f1;padding:15px 30px}.post-card:last-child{border:none}.post-card__link{text-decoration:none}.post-card__title{margin:0;font-size:1.5em;font-weight:700;font-family:sans-serif;background:-webkit-linear-gradient(45deg,#653b43,#f92672);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.rainbow-border-box{border-bottom:2px solid transparent;border-image:linear-gradient(to right,#b827fc 0,#2c90fc 25%,#b8fd33 50%,#fec837 75%,#fd1892 100%);border-image-slice:1;height:2px;display:block;margin:15px 0}.post-card__meta{display:flex;justify-content:space-between}.post-card__meta--center{justify-content:center}.post-card__meta-date{font-size:.9em;color:#888}.post-card__meta-readtime{font-size:.9em}.post-card__category{font-family:monospace;font-size:13px;font-weight:100;color:#c53261;padding:5px;background:#f1f1f1;border-radius:5px;margin:0 5px 5px;display:inline-block}.post-card__excerpt{line-height:1.8em}.post-card__date{font-size:.9em;color:#666}.tmpl-post p>code{background-color:#f1f1f1;color:#3f51b5;border-radius:2px;box-shadow:0 1px 3px #b1b1b1;border:none;padding:2px 10px;font-weight:400;font-family:inherit}.embedd-iframe{width:100%;min-height:300px;border:none}.image-center{text-align:center}.about-me__image{width:150px;border-radius:50%;height:150px;box-shadow:0 0 0 5px #fff,0 0 0 8px #ccc;margin-bottom:30px}.footer__content{padding:20px 0;display:flex;justify-content:center;max-width:80%;margin:auto;align-items:center}.footer__image{height:100px;width:200px;overflow:hidden;display:flex;align-items:center;justify-content:center}.footer__image img{width:auto;border-radius:50%;max-width:100%;max-height:100%}.footer__desc{margin:0 20px;line-height:30px;padding:10px 0}.footer__desc a[href].twitter-link:visited,.footer_desc a[href].twitter-link{color:#5f5ff2}.footer_desc-social-links{padding-top:10px}.footer_desc-social-links a{font-size:13px;border-right:1px solid #ccc;padding:0 5px}.footer_desc-social-links a:first-child{padding-left:0}.footer_desc-social-links a:last-child{border:none}@media(max-width:560px){body{background:linear-gradient(to left,#7f7fd5,#86a8e7,#91eae4)}main{padding:20px;margin-top:5px}header{max-height:none}.header-section{flex-direction:column}.post-card{padding:20px 10px}.footer__content{flex-direction:column}}main>pre[class*=language-]{border-radius:0;margin-left:-40px;margin-right:-40px;padding:15px 40px}</style><link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="~ UNDEFINED NULL ~"></head><body><header><section class="header-section"><h1 id="homeLink" class="home"><a href="/">~ UNDEFINED NULL ~</a></h1><ul class="nav"><li class="nav-item"><a href="/">Home</a></li><li class="nav-item"><a href="/archive/">Archive</a></li><li class="nav-item"><a href="/about/">About</a></li></ul></section></header><main class="tmpl-post"><h1 class="post-card__title">React TDD Example: Unit Testing and Building a React Component with Jest, Gulp and React Test Utils</h1><div class="post-card__meta"><div class="post-card__meta-date">3 May 2015</div><div class="post-card__meta-readtime">About 7 min read</div></div><div class="rainbow-border-box"></div><span class="post-card__category">React </span><span class="post-card__category">Jest </span><span class="post-card__category">TDD</span><p>ReactJs has attained lot of momentum since its initial release in 2013, and became the best JavaScript library for developing rich UI interface. React also popularized different concepts like Virtual DOM, Uni-directional data flow and Componentization in the front-end community. As of today, React has more than 20,000 stars in <a href="https://github.com/facebook/react">Github repo</a>, and actively maintained by the Facebook team.</p><div class="info"><strong>Update Feb 9 2016</strong> : The ReactJS version is bumped to 0.14 in the seed project and updated the article accordingly.</div><br><div class="image-center"><p><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZGNywtQFdBRkxOUlNSMj5aYVpQYEpRUk8BDg4OExETJhUVJk81LTVPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT//AABEIAAkADAMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APObcwmN1kjj3KC25mYFumAMUXFa/UrnBJIGB6UDHUAFAH//2Q==" alt="React and Jest for TDD" loading="lazy" data-src="https://lh4.googleusercontent.com/-qJ1PeOhFiBM/VVBaO3ZI6qI/AAAAAAAAhpw/l-WLLtdZuxM/w640-h480-no/react-jest.jpg" class="lazyload" width="640" height="480"></p></div><p>As I said already, React is a solid piece of work from Facebook. Any solid software will be built with testability in mind; And React is not an exception to that. Facebook built React with complete testing support -- They even released their own testing framework named "<strong>Jest</strong>" and <strong>React Test Utils</strong> for unit testing React components.</p><p>Here in this post, we'll see how to build a react component in TDD approach.</p><h2 id="what-we're-going-to-build-%3F">What we're going to build ? <a class="direct-link" href="#what-we're-going-to-build-%3F" aria-hidden="true">#</a></h2><p>We will build a simple Accordion component in React. If you're not sure what an Accordion is, have a look at the twitter bootstrap page:</p><p><a href="http://getbootstrap.com/2.3.2/javascript.html#collapse">Accordion Widget</a><br>Or, see<br><a href="https://jqueryui.com/accordion/">jQuery UI Accordion</a></p><p>We'll be creating a simple Accordion component in React.</p><h2 id="setting-up-the-tools">Setting up the tools <a class="direct-link" href="#setting-up-the-tools" aria-hidden="true">#</a></h2><p>We're going to build our component in TDD fashion. Hence, we need to set up our environment with a test runner (for running unit tests), and local server ( with automatic reloading enabled ).</p><p>These are the tools I am going to use:</p><ol><li><a href="www.browsersync.io">BrowserSync</a> for live development ( browser reloading ).</li><li><a href="https://facebook.github.io/jest/">Jest</a> for unit testing.</li><li><a href="http://jspm.io/">JSPM</a> and <a href="https://www.npmjs.org/">npm</a> for package management.</li><li><a href="http://gulpjs.com/">Gulp</a> for running build and test tasks.</li><li>Finally, <a href="https://facebook.github.io/react/">ReactJS</a> for developing our component</li></ol><p>Setting up all these takes time. Therefore, I have created a <a href="https://github.com/shidhincr/react-jest-gulp-jspm-seed">seed project</a> for bootstrapping the set-up and the initial boiler plate code. So, as the first step, clone the seed project to your system:</p><pre class="language-shell-session"><code class="language-shell-session"><span class="token output">git clone git@github.com:shidhincr/react-jest-gulp-jspm-seed.git react-seed<br>cd react-seed<br>npm install</span></code></pre><p>Once you download the seed and install the node modules, we're good to start.</p><h2 id="developing-the-component-in-tdd">Developing the Component in TDD <a class="direct-link" href="#developing-the-component-in-tdd" aria-hidden="true">#</a></h2><p>We're using <em>Gulp</em> as our build and task tool. If you open the <strong>gulpfile.js</strong> in the seed folder, you can see there are two main tasks for test driven development ( as explained in the project README file ). One task will build the project and open the development server in browser, while the other task run the unit tests and watch for any changes the source files and test files.</p><p>Open two terminal windows, and run <code>gulp develop</code> in one and <code>gulp test</code> in the other one.</p><p>There are two example files provided in the <code>scripts</code> folder and <code>__tests__</code> folder. When you run the <code>gulp test</code> task at first, you should see those tests passing.</p><h3 id="accordion-react-component">Accordion React Component <a class="direct-link" href="#accordion-react-component" aria-hidden="true">#</a></h3><p>Let's add the file <strong>accordionComponent.js</strong> in <code>scripts</code> and <strong>accordionComponent-spec.js</strong> in the <code>__tests__</code> folders respectively.</p><p>From here onwards, we're going to build our component by writing each functionality as a test case and then implementing them. When adding the test case, you should be able to see the tests failing in the terminal ( gulp test ). Hence, once we see the failing test, the next step is to implement the code to make them pass.</p><p><strong>Test Case 1:</strong></p><blockquote><p>The accordion should exist as a React Component</p></blockquote><p>Write the first test case in <strong>accordionComponent-spec.js</strong></p><pre class="language-js"><code class="language-js">jest<span class="token punctuation">.</span><span class="token function">dontMock</span><span class="token punctuation">(</span><span class="token string">'../scripts/accordionComponent.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Accordion'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">var</span> ReactDOM <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-dom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">var</span> TestUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-addons-test-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">var</span> Accordion<span class="token punctuation">;</span><br><br>  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    Accordion <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../scripts/accordionComponent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should exists'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Render into document</span><br>    <span class="token keyword">var</span> accordion <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">renderIntoDocument</span><span class="token punctuation">(</span> <span class="token operator">&lt;</span>Accordion <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>TestUtils<span class="token punctuation">.</span><span class="token function">isCompositeComponent</span><span class="token punctuation">(</span>accordion<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="info">Note: By using <strong>jest.dontMock</strong>, we get the original react component in the scripts folder ( as Jest tries to mock every component by default ).</div><br><p>Let's make the test pass:</p><pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> Accordion <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Accordion component<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Accordion<span class="token punctuation">;</span></code></pre><p>Okay, the tests are passing now. Let's also make sure that our component renders properly in the browser. Modify the <strong>app.js</strong> to render the <strong>accordionComponent</strong>.</p><pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> ReactDOM <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-dom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> Accordion <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'components/accordionComponent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Accordion<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'view'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>If it works, proceed to next test case.</p><p><strong>Test Case 2:</strong></p><blockquote><p>Accordion should build the layout from an array of objects passed as prop.</p></blockquote><p>This time let's make our component configurable. We have to pass an array data to the component, and expect it to build the layout for the Accordion.</p><pre class="language-js"><code class="language-js"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should build the layout from an array of objects passed as prop'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>    <span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 1'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 1'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 2'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 2'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> accordion <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">renderIntoDocument</span><span class="token punctuation">(</span> <span class="token operator">&lt;</span>Accordion data<span class="token operator">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> headers <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-header'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token function">expect</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token function">expect</span><span class="token punctuation">(</span>headers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Title 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>headers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Title 2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Content belongs to title 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Content belongs to title 2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>To make everything green:</p><pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> Accordion <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> panes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>      panes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><br>          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion-header"</span><span class="token operator">&gt;</span><br>            <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion-content"</span><span class="token operator">&gt;</span><br>            <span class="token punctuation">{</span>item<span class="token punctuation">.</span>content<span class="token punctuation">}</span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion"</span><span class="token operator">&gt;</span><br>        <span class="token punctuation">{</span>panes<span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Accordion<span class="token punctuation">;</span></code></pre><p>All the tests pass now. To see the component works in browser, edit the <code>app.js</code> and pass the configuration:</p><pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> ReactDOM <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-dom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> Accordion <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'components/accordionComponent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><br>  name<span class="token operator">:</span> <span class="token string">'Title 1'</span><span class="token punctuation">,</span><br>  content<span class="token operator">:</span> <span class="token string">'Content belongs to title 1'</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><br>  name<span class="token operator">:</span> <span class="token string">'Title 2'</span><span class="token punctuation">,</span><br>  content<span class="token operator">:</span> <span class="token string">'Content belongs to title 2'</span><br><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Accordion data<span class="token operator">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'view'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>You should be able to see that our Accordion component renders the new layout.</p><p><strong>Test Case 3:</strong></p><blockquote><p>By default, all the content section should be hidden unless specified by a flag.</p></blockquote><p>Add the following test case:</p><pre class="language-js"><code class="language-js"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should hide all the contents by default unless specified by a flag'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 1'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 1'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 2'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 2'</span><span class="token punctuation">,</span><br>      showOnLoad<span class="token operator">:</span> <span class="token boolean">true</span><br>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> accordion <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">renderIntoDocument</span><span class="token punctuation">(</span> <span class="token operator">&lt;</span>Accordion data<span class="token operator">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Content belongs to title 2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>And make it pass:</p><pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> Accordion <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> panes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> <span class="token function-variable function">getContent</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token operator">!</span>item<span class="token punctuation">.</span>showOnLoad <span class="token operator">?</span> <span class="token string">''</span><span class="token operator">:</span> <span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion-content"</span><span class="token operator">&gt;</span><br>          <span class="token punctuation">{</span>item<span class="token punctuation">.</span>content<span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>      panes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span><br>          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion-header"</span><span class="token operator">&gt;</span><br>            <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><br>          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>          <span class="token punctuation">{</span> <span class="token function">getContent</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion"</span><span class="token operator">&gt;</span><br>        <span class="token punctuation">{</span>panes<span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Accordion<span class="token punctuation">;</span></code></pre><p>This code will make the above test case pass, but you can see that it makes the previous test case ( Test case 2 ) fail.</p><p>This is not a problem at all, because in TDD this is what we expect. We need to continuously refactor both source and test codes while we build the component. Let's modify the <code>input</code> in the previous test case to make the tests pass.</p><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><br>   name<span class="token operator">:</span> <span class="token string">'Title 1'</span><span class="token punctuation">,</span><br>   content<span class="token operator">:</span> <span class="token string">'Content belongs to title 1'</span><span class="token punctuation">,</span><br>   showOnLoad<span class="token operator">:</span> <span class="token boolean">true</span><br> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><br>   name<span class="token operator">:</span> <span class="token string">'Title 2'</span><span class="token punctuation">,</span><br>   content<span class="token operator">:</span> <span class="token string">'Content belongs to title 2'</span><span class="token punctuation">,</span><br>   showOnLoad<span class="token operator">:</span> <span class="token boolean">true</span><br> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>This is the beauty of TDD; designing the component step by step. By now, we made our component configurable also.</p><p><strong>Test Case 4:</strong></p><blockquote><p>It should be able to toggle the content by clicking on the respective title.</p></blockquote><pre class="language-js"><code class="language-js"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should be able to toggle the content by clicking on the respective title.'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 1'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 1'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 2'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 2'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> accordion <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">renderIntoDocument</span><span class="token punctuation">(</span> <span class="token operator">&lt;</span>Accordion data<span class="token operator">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> headers <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-header'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    TestUtils<span class="token punctuation">.</span>Simulate<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>headers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Content belongs to title 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    TestUtils<span class="token punctuation">.</span>Simulate<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>headers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The tests are <span style="color:red">RED</span> again. Before we move on, it's time to think about the code design again. If you obeserve, we have a stateful component now. It means, each of the <em>pane</em> in the Accordion can have its own closed or open states.</p><p>While designing your applications, it's a bad practice to put whole logic into one single component. We should think about small components -- which handles single tasks -- and create composite components for big features. Here, in our code we should move the state-full code into a separate component; Let's call it as a <strong>Pane</strong> component.</p><p>See the code below:</p><pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> Pane <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token function-variable function">getInitialState</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">{</span><br>      show<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">.</span>showOnLoad<br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><br>  <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      show<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show<br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><br>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> getContent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion-content"</span><span class="token operator">&gt;</span><br>          <span class="token punctuation">{</span>item<span class="token punctuation">.</span>content<span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><br>        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion-header"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>toggle<span class="token punctuation">}</span><span class="token operator">&gt;</span><br>          <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>        <span class="token punctuation">{</span> <span class="token function">getContent</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> Accordion <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> panes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>      panes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>Pane data<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><br>      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion"</span><span class="token operator">&gt;</span><br>        <span class="token punctuation">{</span>panes<span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Accordion<span class="token punctuation">;</span></code></pre><p>All tests are <span style="color: green">GREEN</span> now ! If you check your browser window ( where the server is running ), you can see that our Accordion component is functional.</p><p>Before we summarise, see the final source code and tests:</p><pre class="language-js"><code class="language-js">jest<span class="token punctuation">.</span><span class="token function">dontMock</span><span class="token punctuation">(</span><span class="token string">'../scripts/accordionComponent.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Accordion'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">var</span> TestUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-addons-test-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">var</span> Accordion<span class="token punctuation">;</span><br><br>  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    Accordion <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../scripts/accordionComponent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should exists'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token comment">// Render into document</span><br>    <span class="token keyword">var</span> accordion <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">renderIntoDocument</span><span class="token punctuation">(</span> <span class="token operator">&lt;</span>Accordion <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>TestUtils<span class="token punctuation">.</span><span class="token function">isCompositeComponent</span><span class="token punctuation">(</span>accordion<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should build the layout from an array of objects passed as prop'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>    <span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 1'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 1'</span><span class="token punctuation">,</span><br>      showOnLoad<span class="token operator">:</span> <span class="token boolean">true</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 2'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 2'</span><span class="token punctuation">,</span><br>      showOnLoad<span class="token operator">:</span> <span class="token boolean">true</span><br>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> accordion <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">renderIntoDocument</span><span class="token punctuation">(</span> <span class="token operator">&lt;</span>Accordion data<span class="token operator">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> headers <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-header'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token function">expect</span><span class="token punctuation">(</span>headers<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token function">expect</span><span class="token punctuation">(</span>headers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Title 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>headers<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Title 2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Content belongs to title 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Content belongs to title 2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should hide all the contents by default unless specified by a flag'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 1'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 1'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 2'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 2'</span><span class="token punctuation">,</span><br>      showOnLoad<span class="token operator">:</span> <span class="token boolean">true</span><br>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> accordion <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">renderIntoDocument</span><span class="token punctuation">(</span> <span class="token operator">&lt;</span>Accordion data<span class="token operator">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Content belongs to title 2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should be able to toggle the content by clicking on the respective title.'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 1'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 1'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><br>      name<span class="token operator">:</span> <span class="token string">'Title 2'</span><span class="token punctuation">,</span><br>      content<span class="token operator">:</span> <span class="token string">'Content belongs to title 2'</span><br>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> accordion <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">renderIntoDocument</span><span class="token punctuation">(</span> <span class="token operator">&lt;</span>Accordion data<span class="token operator">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> headers <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-header'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    TestUtils<span class="token punctuation">.</span>Simulate<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>headers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">'Content belongs to title 1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    TestUtils<span class="token punctuation">.</span>Simulate<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>headers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    contents <span class="token operator">=</span> TestUtils<span class="token punctuation">.</span><span class="token function">scryRenderedDOMComponentsWithClass</span><span class="token punctuation">(</span>accordion<span class="token punctuation">,</span> <span class="token string">'accordion-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token function">expect</span><span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> Pane <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token function-variable function">getInitialState</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">{</span><br>      show<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">.</span>showOnLoad<br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><br>  <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      show<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show<br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br><br>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> getContent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion-content"</span><span class="token operator">&gt;</span><br>          <span class="token punctuation">{</span>item<span class="token punctuation">.</span>content<span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><br>        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion-header"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>toggle<span class="token punctuation">}</span><span class="token operator">&gt;</span><br>          <span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><br>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>        <span class="token punctuation">{</span> <span class="token function">getContent</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> Accordion <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>    <span class="token keyword">var</span> panes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br>      panes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br>        <span class="token operator">&lt;</span>Pane data<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><br>      <span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"accordion"</span><span class="token operator">&gt;</span><br>        <span class="token punctuation">{</span>panes<span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Accordion<span class="token punctuation">;</span></code></pre><pre class="language-js"><code class="language-js"><span class="token string">'use strict'</span><span class="token punctuation">;</span><br><br><span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> ReactDOM <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-dom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> Accordion <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'components/accordionComponent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">var</span> input <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><br>  name<span class="token operator">:</span> <span class="token string">'Title 1'</span><span class="token punctuation">,</span><br>  content<span class="token operator">:</span> <span class="token string">'Content belongs to title 1'</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><br>  name<span class="token operator">:</span> <span class="token string">'Title 2'</span><span class="token punctuation">,</span><br>  content<span class="token operator">:</span> <span class="token string">'Content belongs to title 2'</span><br><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Accordion data<span class="token operator">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'view'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="summary">Summary <a class="direct-link" href="#summary" aria-hidden="true">#</a></h2><p>When I saw ReactJs first time, I didn't like the syntax at all. I watched the project grow with quite skepticism. Later, I got chance to work with it, and then I knew how powerful it was. Writing code in React really changed my thinking process about a UI driven application. Now I started thinking everything in terms of components, and I know that's the <a href="http://webcomponents.org/">future of web development</a>.</p><p>This article is my attempt to mix TDD with ReactJs . Here, we saw how to make a React component from scratch using TDD approach. I hope this tutorial is useful for everyone. Feedbacks are most welcome.</p><p><a href="/">← Home</a></p><div class="footer"><div class="rainbow-border-box"></div><div class="footer__content"><div class="footer__image"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZGNywtQFdBRkxOUlNSMj5aYVpQYEpRUk8BDg4OExETJhUVJk81LTVPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT//AABEIAAwACwMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ALrSyyS2VxEJ2V8CQKBtI5ySPx/Snyz5vIfucrtuR3V9Aly6/ZZODj/PFaqLsc8tyDQrqY6GsjNuZIgBkf7TD+VTGTtLyN5xV4mJqep3cep3SLINqysBwOmaIO8U2hzjaTSP/9k=" alt="Shidhin CR" loading="lazy" data-src="/img/shidhin_dp_small.png" class="lazyload" width="100" height="111"></div><div class="footer__desc">Shidhin is a Front-end engineer and <a href="https://developers.google.com/community/experts/directory/profile/profile-shidhin_cr">Google Developer Expert</a> in Web Tech. Follow him on <a class="twitter-link" href="https://twitter.com/intent/follow?original_referer=undefinednull.com&amp;ref_src=twsrc%5Etfw&amp;screen_name=shidhincr&amp;tw_p=followbutton">Twitter</a><div class="footer_desc-social-links"><a href="//linkedin.com/in/shidhincr">LinkedIn</a> <a href="//github.com/shidhincr">Github</a> <a href="//facebook.com/shidhincr">Facebook</a> <a href="mailto: shidhincr@gmail.com">Email</a></div></div></div></div></main><script src="/js/quicklink.umd.js" async="" defer=""></script><script>window.addEventListener('load', () =>{
        quicklink.listen();
      });
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-10379928-17', 'auto');
ga('require', 'displayfeatures');
ga('send', 'pageview');</script><script>(function(selector, src, preferNativeLazyLoad) {
  if (preferNativeLazyLoad && 'loading' in HTMLImageElement.prototype) {
    var images = document.querySelectorAll(selector);
    var numImages = images.length;

    if (numImages > 0) {
      for (var i = 0; i < numImages; i++) {
        images[i].src = images[i].dataset.src;
      }
    }

    return;
  }

  var script = document.createElement('script');
  script.async = true;
  script.src = src;
  document.body.appendChild(script);
})(
              'img',
              'https://cdn.jsdelivr.net/npm/lazysizes@5/lazysizes.min.js',
              true
            );</script></body></html>